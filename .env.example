# InkWeld Environment Configuration
# Copy this file to .env at the project root and update the values as needed
#
# The backend will automatically load this file from:
#   1. backend/.env (if it exists)
#   2. .env (project root - RECOMMENDED)
#   3. ~/.inkweld/.env (user config directory)

#############################################
# Server Configuration
#############################################

# Server port (default: 8333)
PORT=8333

# Node.js environment (development/production)
NODE_ENV=development

# Application version (set automatically in CI/CD)
INKWELD_VERSION=0.1.0

# Comma-separated list of allowed CORS origins
ALLOWED_ORIGINS=http://localhost:4200,http://localhost:8333

#############################################
# Frontend Serving
#############################################

# Whether to serve the embedded/bundled frontend (default: true)
# Set to 'false' to run in API-only mode (when hosting frontend separately)
# SERVE_FRONTEND=true

# Path to external frontend dist folder (optional)
# If set, serves frontend from this path instead of embedded assets
# FRONTEND_DIST=/app/frontend

#############################################
# Database Configuration
#############################################

# Database type: sqlite or d1 (default: sqlite)
# Use 'sqlite' for local development, 'd1' for Cloudflare Workers
DB_TYPE=sqlite

# SQLite database file path (used when DB_TYPE=sqlite)
# DB_PATH=./sqlite.db

#############################################
# Data Storage
#############################################

# Base path for project data storage (default: ./data)
# This is where LevelDB stores per-project Yjs documents
DATA_PATH=./data

#############################################
# Authentication & Security
#############################################

# Secret key for session cookies and database encryption
# IMPORTANT: Change this in production! Must be at least 32 characters.
SESSION_SECRET=your-super-secret-session-key-change-this-in-production

# Alternative: Use DATABASE_KEY for encryption (falls back to SESSION_SECRET)
# DATABASE_KEY=your-database-encryption-key

# Require admin approval for new user registrations (default: true)
USER_APPROVAL_REQUIRED=true

# Cookie domain (optional, for production deployments)
# COOKIE_DOMAIN=your-domain.com

#############################################
# Default Admin User (Optional)
#############################################

# Create a default admin user on startup (useful for bootstrapping)
# Both username and password must be set for the admin to be created
# DEFAULT_ADMIN_USERNAME=admin
# DEFAULT_ADMIN_PASSWORD=your-secure-admin-password

#############################################
# GitHub OAuth Configuration
#############################################

# Enable GitHub authentication (default: false)
GITHUB_ENABLED=false

# GitHub OAuth credentials (required if GITHUB_ENABLED=true)
# GITHUB_CLIENT_ID=your-github-client-id
# GITHUB_CLIENT_SECRET=your-github-client-secret

# GitHub OAuth callback URL (optional, auto-generated if not set)
# GITHUB_CALLBACK_URL=http://localhost:8333/api/auth/github/callback

#############################################
# AI Features (Optional)
#############################################

# OpenAI API key for AI features (optional)
# If not set, AI features (linting, image generation) will be disabled
# OPENAI_API_KEY=your-openai-api-key

#############################################
# Application Mode (Frontend)
#############################################

# Application mode: ONLINE, LOCAL, or BOTH (default: BOTH)
# - ONLINE: Requires server connection (no local-only option)
# - LOCAL: Local mode only (no server connection option)
# - BOTH: User can choose either mode
APP_MODE=BOTH

#############################################
# Yjs Real-time Collaboration (Advanced)
#############################################

# These settings are for advanced Yjs configuration and are typically
# not needed for standard deployments.

# Callback URL for Yjs updates (optional)
# CALLBACK_URL=http://localhost:8333/yjs-callback

# Callback timeout in milliseconds (default: 5000)
# CALLBACK_TIMEOUT=5000

# Callback debounce wait time in milliseconds (default: 2000)
# CALLBACK_DEBOUNCE_WAIT=2000

# Callback debounce max wait time in milliseconds (default: 10000)
# CALLBACK_DEBOUNCE_MAXWAIT=10000

# Enable garbage collection for Yjs documents (default: true)
# GC=true
