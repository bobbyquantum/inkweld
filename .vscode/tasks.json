{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "ðŸš€ Start Frontend",
      "type": "shell",
      "command": "cd frontend && bun run start",
      "isBackground": true,
      "problemMatcher": {
        "owner": "typescript",
        "pattern": "$tsc",
        "background": {
          "activeOnStart": true,
          "beginsPattern": "Application bundle generation complete",
          "endsPattern": "Watch mode enabled. Watching for file changes..."
        }
      }
    },
    {
      "label": "ðŸš€ Start Backend",
      "type": "shell",
      "command": "cd backend && bun run dev",
      "isBackground": true,
      "problemMatcher": {
        "owner": "typescript",
        "pattern": "$tsc",
        "background": {
          "activeOnStart": true,
          "beginsPattern": ".",
          "endsPattern": "Ready on"
        }
      }
    },
    {
      "label": "ðŸ§ª Test Backend",
      "type": "shell",
      "command": "bun run test -- --coverage-reporter=lcov",
      "options": {
        "cwd": "${workspaceFolder}/backend"
      },
      "problemMatcher": {
        "owner": "bun",
        "fileLocation": ["relative", "${workspaceFolder}"],
        "pattern": [
          {
            // Match the test file header: "example.test.js:"
            "regexp": "^(.+\\.test\\.(?:js|ts|jsx|tsx)):",
            "file": 1
          },
          {
            // Match failing test lines prefixed with âœ•
            "regexp": "^âœ• (.+) \\[(\\d+\\.\\d+ms)\\]$",
            "message": 1,
            "severity": 1
          },
          {
            // Match passing test lines (optional)
            "regexp": "^âœ“ (.+) \\[(\\d+\\.\\d+ms)\\]$",
            "message": 1
          },
          {
            // Capture stack trace locations: "at src/foo.test.ts:10:5"
            "regexp": "^\\s*at (.+):(\\d+):(\\d+)",
            "file": 1,
            "line": 2,
            "column": 3
          }
        ]
      }
    },
    {
      "label": "Lint Backend",
      "type": "shell",
      "command": "bun run lint",
      "options": {
        "cwd": "${workspaceFolder}/backend"
      },
      "problemMatcher": "$eslint-stylish"
    },
    {
      "label": "Lint Frontend",
      "type": "shell",
      "command": "bun run lint:fix",
      "options": {
        "cwd": "${workspaceFolder}/frontend"
      },
      "problemMatcher": "$eslint-stylish"
    },
    {
      "label": "Lint All",
      "dependsOn": ["Lint Backend", "Lint Frontend"],
      "dependsOrder": "sequence",
      "problemMatcher": ["$eslint-stylish"]
    }
  ]
}
