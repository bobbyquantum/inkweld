
> inkweld-frontend@0.1.0 test
> ng test --watch=false

[33mâ¯[39m Building...
[32mâœ”[39m Building...
[1mInitial chunk files[22m                         [2m | [22m[1mNames[22m                                    [2m | [22m [1mRaw size[22m
[32mchunk-RVO2QCS3.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m[36m141.16 kB[39m[2m | [22m
[32mstyles.css[39m                                  [2m | [22m[2mstyles[22m                                   [2m | [22m[36m126.99 kB[39m[2m | [22m
[32mchunk-2YSN6IKP.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m[36m107.41 kB[39m[2m | [22m
[32mchunk-FWRNUBKA.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m97.71 kB[39m[2m | [22m
[32mspec-project.component.js[39m                   [2m | [22m[2mspec-project.component[22m                   [2m | [22m [36m80.14 kB[39m[2m | [22m
[32mspec-home.component.js[39m                      [2m | [22m[2mspec-home.component[22m                      [2m | [22m [36m73.38 kB[39m[2m | [22m
[32mspec-publish-plan-tab.component.js[39m          [2m | [22m[2mspec-publish-plan-tab.component[22m          [2m | [22m [36m72.21 kB[39m[2m | [22m
[32mspec-register.component.js[39m                  [2m | [22m[2mspec-register.component[22m                  [2m | [22m [36m68.71 kB[39m[2m | [22m
[32mspec-templates-tab.component.js[39m             [2m | [22m[2mspec-templates-tab.component[22m             [2m | [22m [36m59.50 kB[39m[2m | [22m
[32mspec-setup.component.js[39m                     [2m | [22m[2mspec-setup.component[22m                     [2m | [22m [36m55.17 kB[39m[2m | [22m
[32mchunk-B4IVTIOQ.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m52.78 kB[39m[2m | [22m
[32mspec-bookshelf.component.js[39m                 [2m | [22m[2mspec-bookshelf.component[22m                 [2m | [22m [36m50.83 kB[39m[2m | [22m
[32mspec-home-tab.component.js[39m                  [2m | [22m[2mspec-home-tab.component[22m                  [2m | [22m [36m49.55 kB[39m[2m | [22m
[32mchunk-6JQ6M77N.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m46.33 kB[39m[2m | [22m
[32mspec-user-profile.component.js[39m              [2m | [22m[2mspec-user-profile.component[22m              [2m | [22m [36m41.19 kB[39m[2m | [22m
[32mchunk-TXSBK537.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m39.98 kB[39m[2m | [22m
[32mspec-html-generator.service.js[39m              [2m | [22m[2mspec-html-generator.service[22m              [2m | [22m [36m39.37 kB[39m[2m | [22m
[32mchunk-L6SUDM4G.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m38.23 kB[39m[2m | [22m
[32mspec-sync-settings.component.js[39m             [2m | [22m[2mspec-sync-settings.component[22m             [2m | [22m [36m37.00 kB[39m[2m | [22m
[32mspec-publishing-progress-dialog.component.js[39m[2m | [22m[2mspec-publishing-progress-dialog.component[22m[2m | [22m [36m36.74 kB[39m[2m | [22m
[32mchunk-GK7NBZ34.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m35.71 kB[39m[2m | [22m
[32mspec-markdown-generator.service.js[39m          [2m | [22m[2mspec-markdown-generator.service[22m          [2m | [22m [36m34.75 kB[39m[2m | [22m
[32mspec-documents-list-tab.component.js[39m        [2m | [22m[2mspec-documents-list-tab.component[22m        [2m | [22m [36m31.84 kB[39m[2m | [22m
[32mchunk-Q562VXDK.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m29.59 kB[39m[2m | [22m
[32mspec-welcome.component.js[39m                   [2m | [22m[2mspec-welcome.component[22m                   [2m | [22m [36m29.58 kB[39m[2m | [22m
[32mspec-epub-generator.service.js[39m              [2m | [22m[2mspec-epub-generator.service[22m              [2m | [22m [36m29.06 kB[39m[2m | [22m
[32mchunk-BEK7ONZS.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m29.05 kB[39m[2m | [22m
[32mchunk-BL5A7TGC.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m28.36 kB[39m[2m | [22m
[32mchunk-QOEYQNKS.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m26.90 kB[39m[2m | [22m
[32mspec-pdf-generator.service.js[39m               [2m | [22m[2mspec-pdf-generator.service[22m               [2m | [22m [36m26.57 kB[39m[2m | [22m
[32mspec-create-project.component.js[39m            [2m | [22m[2mspec-create-project.component[22m            [2m | [22m [36m26.05 kB[39m[2m | [22m
[32mspec-project.service.js[39m                     [2m | [22m[2mspec-project.service[22m                     [2m | [22m [36m25.81 kB[39m[2m | [22m
[32mchunk-6T6BZLYF.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m25.33 kB[39m[2m | [22m
[32mspec-project-files-tab.component.js[39m         [2m | [22m[2mspec-project-files-tab.component[22m         [2m | [22m [36m23.74 kB[39m[2m | [22m
[32mchunk-IBFIQUYU.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m22.48 kB[39m[2m | [22m
[32mchunk-QKSL7TSJ.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m19.96 kB[39m[2m | [22m
[32mspec-project-state.service.js[39m               [2m | [22m[2mspec-project-state.service[22m               [2m | [22m [36m19.78 kB[39m[2m | [22m
[32mspec-edit-project-dialog.component.js[39m       [2m | [22m[2mspec-edit-project-dialog.component[22m       [2m | [22m [36m19.27 kB[39m[2m | [22m
[32mchunk-QCMORQ7U.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m18.49 kB[39m[2m | [22m
[32mspec-worldbuilding-tab.component.js[39m         [2m | [22m[2mspec-worldbuilding-tab.component[22m         [2m | [22m [36m17.84 kB[39m[2m | [22m
[32mchunk-53R3X3DF.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m17.34 kB[39m[2m | [22m
[32mspec-worldbuilding.service.js[39m               [2m | [22m[2mspec-worldbuilding.service[22m               [2m | [22m [36m17.29 kB[39m[2m | [22m
[32mspec-project-tree.component.js[39m              [2m | [22m[2mspec-project-tree.component[22m              [2m | [22m [36m17.17 kB[39m[2m | [22m
[32mspec-approval-pending.component.js[39m          [2m | [22m[2mspec-approval-pending.component[22m          [2m | [22m [36m17.08 kB[39m[2m | [22m
[32mspec-project-import-export.service.js[39m       [2m | [22m[2mspec-project-import-export.service[22m       [2m | [22m [36m16.96 kB[39m[2m | [22m
[32mspec-user-settings-dialog.component.js[39m      [2m | [22m[2mspec-user-settings-dialog.component[22m      [2m | [22m [36m16.50 kB[39m[2m | [22m
[32mspec-app.component.js[39m                       [2m | [22m[2mspec-app.component[22m                       [2m | [22m [36m16.40 kB[39m[2m | [22m
[32mspec-connection-settings.component.js[39m       [2m | [22m[2mspec-connection-settings.component[22m       [2m | [22m [36m16.27 kB[39m[2m | [22m
[32mchunk-ET73NHFT.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m15.96 kB[39m[2m | [22m
[32mspec-reset.component.js[39m                     [2m | [22m[2mspec-reset.component[22m                     [2m | [22m [36m15.82 kB[39m[2m | [22m
[32mspec-offline-project.service.js[39m             [2m | [22m[2mspec-offline-project.service[22m             [2m | [22m [36m15.73 kB[39m[2m | [22m
[32mspec-element-tree.service.js[39m                [2m | [22m[2mspec-element-tree.service[22m                [2m | [22m [36m15.55 kB[39m[2m | [22m
[32mchunk-UNA3TTXN.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m15.41 kB[39m[2m | [22m
[32mchunk-FSSVMGOF.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m15.03 kB[39m[2m | [22m
[32mchunk-U4RCOVXU.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m14.93 kB[39m[2m | [22m
[32mspec-document.service.js[39m                    [2m | [22m[2mspec-document.service[22m                    [2m | [22m [36m14.89 kB[39m[2m | [22m
[32mchunk-EOXODMHX.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m14.88 kB[39m[2m | [22m
[32mspec-migration.service.js[39m                   [2m | [22m[2mspec-migration.service[22m                   [2m | [22m [36m14.84 kB[39m[2m | [22m
[32mspec-worldbuilding-editor.component.js[39m      [2m | [22m[2mspec-worldbuilding-editor.component[22m      [2m | [22m [36m14.60 kB[39m[2m | [22m
[32mchunk-P2SWG5Y6.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m14.40 kB[39m[2m | [22m
[32mspec-system-config.service.js[39m               [2m | [22m[2mspec-system-config.service[22m               [2m | [22m [36m13.69 kB[39m[2m | [22m
[32mchunk-LMTJS3GC.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m13.37 kB[39m[2m | [22m
[32mspec-user.service.js[39m                        [2m | [22m[2mspec-user.service[22m                        [2m | [22m [36m13.10 kB[39m[2m | [22m
[32mchunk-6MFCHQC7.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m12.98 kB[39m[2m | [22m
[32mspec-lint-floating-menu.component.js[39m        [2m | [22m[2mspec-lint-floating-menu.component[22m        [2m | [22m [36m12.96 kB[39m[2m | [22m
[32mchunk-CMZR42FC.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m12.85 kB[39m[2m | [22m
[32mspec-template-editor-dialog.component.js[39m    [2m | [22m[2mspec-template-editor-dialog.component[22m    [2m | [22m [36m12.77 kB[39m[2m | [22m
[32mspec-offline-project-elements.service.js[39m    [2m | [22m[2mspec-offline-project-elements.service[22m    [2m | [22m [36m12.62 kB[39m[2m | [22m
[32mspec-tab-manager.service.js[39m                 [2m | [22m[2mspec-tab-manager.service[22m                 [2m | [22m [36m12.50 kB[39m[2m | [22m
[32mchunk-HIG6VJZL.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m12.27 kB[39m[2m | [22m
[32mspec-setup.service.js[39m                       [2m | [22m[2mspec-setup.service[22m                       [2m | [22m [36m12.24 kB[39m[2m | [22m
[32mspec-project-sync.service-2.js[39m              [2m | [22m[2mspec-project-sync.service-2[22m              [2m | [22m [36m12.12 kB[39m[2m | [22m
[32mspec-new-element-dialog.component.js[39m        [2m | [22m[2mspec-new-element-dialog.component[22m        [2m | [22m [36m12.03 kB[39m[2m | [22m
[32mspec-folder-tab.component.js[39m                [2m | [22m[2mspec-folder-tab.component[22m                [2m | [22m [36m11.86 kB[39m[2m | [22m
[32mchunk-22GN7NIZ.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m11.76 kB[39m[2m | [22m
[32mspec-tab-interface.component.js[39m             [2m | [22m[2mspec-tab-interface.component[22m             [2m | [22m [36m11.63 kB[39m[2m | [22m
[32mspec-snapshot-panel.component.js[39m            [2m | [22m[2mspec-snapshot-panel.component[22m            [2m | [22m [36m11.54 kB[39m[2m | [22m
[32mchunk-WZ7QWW37.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m11.21 kB[39m[2m | [22m
[32mspec-csrf.interceptor.js[39m                    [2m | [22m[2mspec-csrf.interceptor[22m                    [2m | [22m [36m11.09 kB[39m[2m | [22m
[32mspec-unified-project.service.js[39m             [2m | [22m[2mspec-unified-project.service[22m             [2m | [22m [36m11.06 kB[39m[2m | [22m
[32mspec-offline-storage.service.js[39m             [2m | [22m[2mspec-offline-storage.service[22m             [2m | [22m [36m10.97 kB[39m[2m | [22m
[32mspec-document-tab.component.js[39m              [2m | [22m[2mspec-document-tab.component[22m              [2m | [22m [36m10.94 kB[39m[2m | [22m
[32mspec-lint-overlay.component.js[39m              [2m | [22m[2mspec-lint-overlay.component[22m              [2m | [22m [36m10.84 kB[39m[2m | [22m
[32mchunk-EQSKCEVU.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m10.77 kB[39m[2m | [22m
[32mspec-publish.service.js[39m                     [2m | [22m[2mspec-publish.service[22m                     [2m | [22m [36m10.75 kB[39m[2m | [22m
[32mspec-project-cover.component.js[39m             [2m | [22m[2mspec-project-cover.component[22m             [2m | [22m [36m10.55 kB[39m[2m | [22m
[32mchunk-OUZI3HN6.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m10.52 kB[39m[2m | [22m
[32mchunk-P3XRC7FY.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m [36m10.47 kB[39m[2m | [22m
[32mspec-custom-route-reuse-strategy.js[39m         [2m | [22m[2mspec-custom-route-reuse-strategy[22m         [2m | [22m [36m10.02 kB[39m[2m | [22m
[32mchunk-24KQ227M.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m9.84 kB[39m[2m | [22m
[32mspec-project-file.service.js[39m                [2m | [22m[2mspec-project-file.service[22m                [2m | [22m  [36m9.71 kB[39m[2m | [22m
[32mchunk-LU3XYKVI.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m9.54 kB[39m[2m | [22m
[32mchunk-3XCNNQJX.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m9.28 kB[39m[2m | [22m
[32mspec-publish-plan.service.js[39m                [2m | [22m[2mspec-publish-plan.service[22m                [2m | [22m  [36m8.91 kB[39m[2m | [22m
[32mspec-document-element-editor.component.js[39m   [2m | [22m[2mspec-document-element-editor.component[22m   [2m | [22m  [36m8.86 kB[39m[2m | [22m
[32mchunk-I2EVO2IQ.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m8.61 kB[39m[2m | [22m
[32mchunk-BCQHTHEF.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m8.53 kB[39m[2m | [22m
[32mspec-unified-user.service.js[39m                [2m | [22m[2mspec-unified-user.service[22m                [2m | [22m  [36m8.47 kB[39m[2m | [22m
[32mspec-project-sync.service.js[39m                [2m | [22m[2mspec-project-sync.service[22m                [2m | [22m  [36m8.34 kB[39m[2m | [22m
[32mspec-publish-plan.js[39m                        [2m | [22m[2mspec-publish-plan[22m                        [2m | [22m  [36m7.63 kB[39m[2m | [22m
[32mspec-side-nav.component.js[39m                  [2m | [22m[2mspec-side-nav.component[22m                  [2m | [22m  [36m7.62 kB[39m[2m | [22m
[32mspec-folder-element-editor.component.js[39m     [2m | [22m[2mspec-folder-element-editor.component[22m     [2m | [22m  [36m7.53 kB[39m[2m | [22m
[32mspec-auth.interceptor.js[39m                    [2m | [22m[2mspec-auth.interceptor[22m                    [2m | [22m  [36m7.50 kB[39m[2m | [22m
[32mspec-dialog-gateway.service.js[39m              [2m | [22m[2mspec-dialog-gateway.service[22m              [2m | [22m  [36m7.42 kB[39m[2m | [22m
[32mspec-document-snapshot.service.js[39m           [2m | [22m[2mspec-document-snapshot.service[22m           [2m | [22m  [36m7.22 kB[39m[2m | [22m
[32mspec-default-templates.service.js[39m           [2m | [22m[2mspec-default-templates.service[22m           [2m | [22m  [36m7.10 kB[39m[2m | [22m
[32mspec-auth-token.interceptor.js[39m              [2m | [22m[2mspec-auth-token.interceptor[22m              [2m | [22m  [36m7.05 kB[39m[2m | [22m
[32mspec-auth.guard.js[39m                          [2m | [22m[2mspec-auth.guard[22m                          [2m | [22m  [36m6.91 kB[39m[2m | [22m
[32mchunk-OM6AIR5L.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m6.66 kB[39m[2m | [22m
[32mchunk-EUKDXMT2.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m6.62 kB[39m[2m | [22m
[32mspec-edit-avatar-dialog.component.js[39m        [2m | [22m[2mspec-edit-avatar-dialog.component[22m        [2m | [22m  [36m6.50 kB[39m[2m | [22m
[32mchunk-TQYUFFIF.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m6.50 kB[39m[2m | [22m
[32mchunk-XNAQ6FJC.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m6.47 kB[39m[2m | [22m
[32mspec-offline-element-sync.provider.js[39m       [2m | [22m[2mspec-offline-element-sync.provider[22m       [2m | [22m  [36m6.12 kB[39m[2m | [22m
[32mspec-generate-cover-dialog.component.js[39m     [2m | [22m[2mspec-generate-cover-dialog.component[22m     [2m | [22m  [36m6.07 kB[39m[2m | [22m
[32mchunk-XUQLC4EV.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m6.05 kB[39m[2m | [22m
[32mspec-xsrf.service.js[39m                        [2m | [22m[2mspec-xsrf.service[22m                        [2m | [22m  [36m5.96 kB[39m[2m | [22m
[32mspec-offline-user.service.js[39m                [2m | [22m[2mspec-offline-user.service[22m                [2m | [22m  [36m5.79 kB[39m[2m | [22m
[32mchunk-UYSW5F2L.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m5.62 kB[39m[2m | [22m
[32mchunk-3JU67NFX.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m5.44 kB[39m[2m | [22m
[32mspec-theme.service.js[39m                       [2m | [22m[2mspec-theme.service[22m                       [2m | [22m  [36m5.42 kB[39m[2m | [22m
[32mspec-oauth-provider-list.component.js[39m       [2m | [22m[2mspec-oauth-provider-list.component[22m       [2m | [22m  [36m5.39 kB[39m[2m | [22m
[32mspec-user-avatar.component.js[39m               [2m | [22m[2mspec-user-avatar.component[22m               [2m | [22m  [36m5.38 kB[39m[2m | [22m
[32mspec-user-menu.component.js[39m                 [2m | [22m[2mspec-user-menu.component[22m                 [2m | [22m  [36m5.28 kB[39m[2m | [22m
[32mspec-lint-plugin.js[39m                         [2m | [22m[2mspec-lint-plugin[22m                         [2m | [22m  [36m5.27 kB[39m[2m | [22m
[32mspec-recent-files.service.js[39m                [2m | [22m[2mspec-recent-files.service[22m                [2m | [22m  [36m5.25 kB[39m[2m | [22m
[32mspec-file-list.component.js[39m                 [2m | [22m[2mspec-file-list.component[22m                 [2m | [22m  [36m5.22 kB[39m[2m | [22m
[32mspec-schema-types.js[39m                        [2m | [22m[2mspec-schema-types[22m                        [2m | [22m  [36m5.15 kB[39m[2m | [22m
[32mchunk-2G4E2D5V.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m4.93 kB[39m[2m | [22m
[32mspec-create-snapshot-dialog.component.js[39m    [2m | [22m[2mspec-create-snapshot-dialog.component[22m    [2m | [22m  [36m4.75 kB[39m[2m | [22m
[32mchunk-A44TLS2P.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m4.74 kB[39m[2m | [22m
[32mchunk-3MGWJJHA.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m4.71 kB[39m[2m | [22m
[32mspec-file-upload.component.js[39m               [2m | [22m[2mspec-file-upload.component[22m               [2m | [22m  [36m4.55 kB[39m[2m | [22m
[32mchunk-QQV3FZVZ.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m4.54 kB[39m[2m | [22m
[32mspec-lint-storage.service.js[39m                [2m | [22m[2mspec-lint-storage.service[22m                [2m | [22m  [36m4.50 kB[39m[2m | [22m
[32mchunk-MEJ7ANT4.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m4.40 kB[39m[2m | [22m
[32mchunk-D2D2L7CX.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m4.39 kB[39m[2m | [22m
[32mspec-unavailable.component.js[39m               [2m | [22m[2mspec-unavailable.component[22m               [2m | [22m  [36m4.34 kB[39m[2m | [22m
[32mspec-project-archive.js[39m                     [2m | [22m[2mspec-project-archive[22m                     [2m | [22m  [36m4.28 kB[39m[2m | [22m
[32mchunk-EXCSVUWW.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m4.25 kB[39m[2m | [22m
[32mspec-not-found.component.js[39m                 [2m | [22m[2mspec-not-found.component[22m                 [2m | [22m  [36m4.22 kB[39m[2m | [22m
[32mspec-project-settings.component.js[39m          [2m | [22m[2mspec-project-settings.component[22m          [2m | [22m  [36m4.22 kB[39m[2m | [22m
[32mchunk-UJYCJIMI.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m4.20 kB[39m[2m | [22m
[32mchunk-APYMXRQI.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m4.19 kB[39m[2m | [22m
[32mchunk-IDT4W66L.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m4.11 kB[39m[2m | [22m
[32mspec-lint-api.service.js[39m                    [2m | [22m[2mspec-lint-api.service[22m                    [2m | [22m  [36m3.94 kB[39m[2m | [22m
[32mchunk-IURJZT4M.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m3.64 kB[39m[2m | [22m
[32mchunk-JFACLW27.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m3.63 kB[39m[2m | [22m
[32mchunk-SLH6NZW6.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m3.63 kB[39m[2m | [22m
[32mchunk-2T7KXTO6.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m3.61 kB[39m[2m | [22m
[32mspec-restore-snapshot-dialog.component.js[39m   [2m | [22m[2mspec-restore-snapshot-dialog.component[22m   [2m | [22m  [36m3.58 kB[39m[2m | [22m
[32mspec-settings.service.js[39m                    [2m | [22m[2mspec-settings.service[22m                    [2m | [22m  [36m3.53 kB[39m[2m | [22m
[32mspec-file-upload.js[39m                         [2m | [22m[2mspec-file-upload[22m                         [2m | [22m  [36m3.53 kB[39m[2m | [22m
[32mspec-storage.service.js[39m                     [2m | [22m[2mspec-storage.service[22m                     [2m | [22m  [36m3.38 kB[39m[2m | [22m
[32mspec-project-element.js[39m                     [2m | [22m[2mspec-project-element[22m                     [2m | [22m  [36m3.36 kB[39m[2m | [22m
[32mchunk-YNXFYKNS.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m3.34 kB[39m[2m | [22m
[32mchunk-IM2VRSWA.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m3.27 kB[39m[2m | [22m
[32mchunk-KPFOS3GB.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m3.25 kB[39m[2m | [22m
[32mchunk-6JYZQ3IN.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m3.23 kB[39m[2m | [22m
[32mspec-auth-token.service.js[39m                  [2m | [22m[2mspec-auth-token.service[22m                  [2m | [22m  [36m3.13 kB[39m[2m | [22m
[32mchunk-WHB5NCJ4.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m3.12 kB[39m[2m | [22m
[32mspec-tree-node-icon.component.js[39m            [2m | [22m[2mspec-tree-node-icon.component[22m            [2m | [22m  [36m3.03 kB[39m[2m | [22m
[32mspec-element-sync-provider.factory.js[39m       [2m | [22m[2mspec-element-sync-provider.factory[22m       [2m | [22m  [36m2.81 kB[39m[2m | [22m
[32mspec-project-tree-settings.component.js[39m     [2m | [22m[2mspec-project-tree-settings.component[22m     [2m | [22m  [36m2.78 kB[39m[2m | [22m
[32mspec-rename-dialog.component.js[39m             [2m | [22m[2mspec-rename-dialog.component[22m             [2m | [22m  [36m2.73 kB[39m[2m | [22m
[32mchunk-VHQ6XKCC.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m2.52 kB[39m[2m | [22m
[32mspec-general-settings.component.js[39m          [2m | [22m[2mspec-general-settings.component[22m          [2m | [22m  [36m2.37 kB[39m[2m | [22m
[32mchunk-WDEBRJEM.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m2.36 kB[39m[2m | [22m
[32mspec-logger.service.js[39m                      [2m | [22m[2mspec-logger.service[22m                      [2m | [22m  [36m2.24 kB[39m[2m | [22m
[32mspec-confirmation-dialog.component.js[39m       [2m | [22m[2mspec-confirmation-dialog.component[22m       [2m | [22m  [36m2.08 kB[39m[2m | [22m
[32mspec-worldbuilding.utils.js[39m                 [2m | [22m[2mspec-worldbuilding.utils[22m                 [2m | [22m  [36m2.02 kB[39m[2m | [22m
[32mchunk-Z6OWDHA4.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m1.99 kB[39m[2m | [22m
[32mspec-can-deactivate-project.guard.js[39m        [2m | [22m[2mspec-can-deactivate-project.guard[22m        [2m | [22m  [36m1.94 kB[39m[2m | [22m
[32mspec-image-viewer-dialog.component.js[39m       [2m | [22m[2mspec-image-viewer-dialog.component[22m       [2m | [22m  [36m1.78 kB[39m[2m | [22m
[32mspec-document-sync-state.js[39m                 [2m | [22m[2mspec-document-sync-state[22m                 [2m | [22m  [36m1.65 kB[39m[2m | [22m
[32mchunk-QLKBYQGX.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m1.51 kB[39m[2m | [22m
[32mchunk-VUV2DLAZ.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m  [36m1.25 kB[39m[2m | [22m
[32minit-testbed.js[39m                             [2m | [22m[2minit-testbed[22m                             [2m | [22m  [36m1.20 kB[39m[2m | [22m
[32mspec-file-size.pipe.js[39m                      [2m | [22m[2mspec-file-size.pipe[22m                      [2m | [22m[36m969 bytes[39m[2m | [22m
[32mchunk-EP4NYFYQ.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m[36m953 bytes[39m[2m | [22m
[32mchunk-JVSZ5XS6.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m[36m836 bytes[39m[2m | [22m
[32mchunk-SDYKV77S.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m[36m621 bytes[39m[2m | [22m
[32mchunk-JU7FRB2R.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m[36m606 bytes[39m[2m | [22m
[32mspec-project-card.component.js[39m              [2m | [22m[2mspec-project-card.component[22m              [2m | [22m[36m515 bytes[39m[2m | [22m
[32mchunk-ZSFKHUOK.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m[36m480 bytes[39m[2m | [22m
[32mchunk-6BKY3ELI.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m[36m409 bytes[39m[2m | [22m
[32mspec-document-tab-minimal.js[39m                [2m | [22m[2mspec-document-tab-minimal[22m                [2m | [22m[36m287 bytes[39m[2m | [22m
[32mspec-document-tab-test.js[39m                   [2m | [22m[2mspec-document-tab-test[22m                   [2m | [22m[36m278 bytes[39m[2m | [22m
[32mchunk-ELJ3YOAT.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m[36m238 bytes[39m[2m | [22m
[32mchunk-LFC6ERUI.js[39m                           [2m | [22m[2m-[22m                                        [2m | [22m[36m216 bytes[39m[2m | [22m

[1m [22m                                           [2m | [22m[1mInitial total[22m                            [2m | [22m  [1m2.94 MB[22m

[1mLazy chunk files[22m                            [2m | [22m[1mNames[22m                                    [2m | [22m [1mRaw size[22m
[32mchunk-XNA7XBQN.js[39m                           [2m | [22m[2menvironment[22m                              [2m | [22m[36m152 bytes[39m[2m | [22m

Application bundle generation complete. [7.316 seconds] - 2025-12-03T01:16:14.908Z


[1m[46m RUN [49m[22m [36mv4.0.13 [39m[90mD:/dev/inkweld/frontend[39m
      [2mCoverage enabled with [22m[33mv8[39m

[90mstdout[2m | src/app/components/lint/lint-plugin.spec.ts[2m > [22m[2mLintPlugin[2m > [22m[2mshould create the plugin successfully
[22m[39m[LintPlugin] Returning 0 decorations for rendering
[LintPlugin] Initializing lint plugin view

[90mstdout[2m | src/app/components/lint/lint-plugin.spec.ts[2m > [22m[2mLintPlugin[2m > [22m[2mshould create the plugin successfully
[22m[39m[LintPlugin] Destroying lint plugin subscription

[90mstdout[2m | src/app/components/lint/lint-plugin.spec.ts[2m > [22m[2mLintPlugin[2m > [22m[2mshould initialize with empty decorations
[22m[39m[LintPlugin] Returning 0 decorations for rendering
[LintPlugin] Initializing lint plugin view

[90mstdout[2m | src/app/components/lint/lint-plugin.spec.ts[2m > [22m[2mLintPlugin[2m > [22m[2mshould initialize with empty decorations
[22m[39m[LintPlugin] Destroying lint plugin subscription

[90mstdout[2m | src/app/components/lint/lint-plugin.spec.ts[2m > [22m[2mLintPlugin[2m > [22m[2mshould call the lint service when document changes
[22m[39m[LintPlugin] Returning 0 decorations for rendering
[LintPlugin] Initializing lint plugin view

[90mstdout[2m | src/app/components/lint/lint-plugin.spec.ts[2m > [22m[2mLintPlugin[2m > [22m[2mshould call the lint service when document changes
[22m[39m[LintPlugin] Initializing lint plugin view
[LintPlugin] Returning 0 decorations for rendering

[90mstdout[2m | src/app/components/lint/lint-plugin.spec.ts[2m > [22m[2mLintPlugin[2m > [22m[2mshould call the lint service when document changes
[22m[39m[LintPlugin] Sending text for linting: New textThis is a test paragraph with some grammar...

[90mstdout[2m | src/app/components/lint/lint-plugin.spec.ts[2m > [22m[2mLintPlugin[2m > [22m[2mshould call the lint service when document changes
[22m[39m[LintPlugin] Received lint result: {
  originalParagraph: [32m'This is a test paragraph with some grammar errors.'[39m,
  corrections: [
    {
      from: [33m10[39m,
      to: [33m14[39m,
      suggestion: [32m'test sentence'[39m,
      reason: [32m'Grammar improvement'[39m
    }
  ],
  styleRecommendations: [ { recommendation: [32m'Consider using active voice for clarity'[39m } ],
  source: [32m'openai'[39m
}

[90mstdout[2m | src/app/components/lint/lint-plugin.spec.ts[2m > [22m[2mLintPlugin[2m > [22m[2mshould call the lint service when document changes
[22m[39m[LintPlugin] Destroying lint plugin subscription

[90mstdout[2m | src/app/components/lint/lint-plugin.spec.ts[2m > [22m[2mLintPlugin[2m > [22m[2mshould handle click events on lint errors
[22m[39m[LintPlugin] Returning 0 decorations for rendering
[LintPlugin] Initializing lint plugin view

[90mstdout[2m | src/app/components/lint/lint-plugin.spec.ts[2m > [22m[2mLintPlugin[2m > [22m[2mshould handle click events on lint errors
[22m[39m[LintPlugin] Destroying lint plugin subscription

[90mstdout[2m | src/app/components/lint/lint-plugin.spec.ts[2m > [22m[2mLintPlugin[2m > [22m[2mshould ignore stale lint results
[22m[39m[LintPlugin] Returning 0 decorations for rendering
[LintPlugin] Initializing lint plugin view

stderr | src/app/components/lint/lint-plugin.spec.ts > LintPlugin > should ignore stale lint results
[LintPlugin] Invalid range detected, from >= to { from: 1, to: 1 }
[LintPlugin] Invalid range detected, from >= to { from: 1, to: 1 }

[90mstdout[2m | src/app/components/lint/lint-plugin.spec.ts[2m > [22m[2mLintPlugin[2m > [22m[2mshould ignore stale lint results
[22m[39m[LintPlugin] Applying new decorations from meta
[LintPlugin] Creating decorations for corrections: [
  {
    from: [33m10[39m,
    to: [33m14[39m,
    suggestion: [32m'test sentence'[39m,
    reason: [32m'Grammar improvement'[39m
  }
]
[LintPlugin] Filtered 0 rejected suggestions
[LintPlugin] Created 0 decorations
[LintPlugin] Returning 0 decorations for rendering
[LintPlugin] Applying new decorations from meta
[LintPlugin] Creating decorations for corrections: [
  {
    from: [33m20[39m,
    to: [33m25[39m,
    suggestion: [32m'different suggestion'[39m,
    reason: [32m'Different correction'[39m
  }
]
[LintPlugin] Filtered 0 rejected suggestions
[LintPlugin] Created 0 decorations
[LintPlugin] Returning 0 decorations for rendering
[LintPlugin] Returning 0 decorations for rendering

[90mstdout[2m | src/app/components/lint/lint-plugin.spec.ts[2m > [22m[2mLintPlugin[2m > [22m[2mshould ignore stale lint results
[22m[39m[LintPlugin] Destroying lint plugin subscription

[90mstdout[2m | src/app/components/lint/lint-plugin.spec.ts[2m > [22m[2mLintPlugin[2m > [22m[2mshould clean up on destroy
[22m[39m[LintPlugin] Returning 0 decorations for rendering
[LintPlugin] Initializing lint plugin view

[90mstdout[2m | src/app/components/lint/lint-plugin.spec.ts[2m > [22m[2mLintPlugin[2m > [22m[2mshould clean up on destroy
[22m[39m[LintPlugin] Initializing lint plugin view
[LintPlugin] Destroying lint plugin subscription

[90mstdout[2m | src/app/components/lint/lint-plugin.spec.ts[2m > [22m[2mLintPlugin[2m > [22m[2mshould clean up on destroy
[22m[39m[LintPlugin] Destroying lint plugin subscription

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/components/lint/lint-plugin.spec.ts [2m([22m[2m6 tests[22m[2m)[22m[33m 889[2mms[22m[39m
     [33m[2mâœ“[22m[39m should call the lint service when document changes [33m 823[2mms[22m[39m
[90mstdout[2m | src/app/pages/setup/setup.component.spec.ts[2m > [22m[2mSetupComponent[2m > [22m[2mngOnInit[2m > [22m[2mshould not load system config if no server is configured
[22m[39mNo server configured yet, using default setup options

stderr | src/app/pages/project/tabs/templates/templates-tab.component.spec.ts > TemplatesTabComponent > loadTemplates > should handle empty schemas
[TemplatesTab] No schemas found in library

stderr | src/app/pages/project/tabs/templates/templates-tab.component.spec.ts > TemplatesTabComponent > loadDefaultTemplates > should load default templates successfully
[TemplatesTab] No schemas found in library

stderr | src/app/pages/project/tabs/templates/templates-tab.component.spec.ts > TemplatesTabComponent > loadDefaultTemplates > should load default templates successfully
[TemplatesTab] No schemas found in library

[90mstdout[2m | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts[2m > [22m[2mEditProjectDialogComponent[2m > [22m[2mshould create
[22m[39mdialogData:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}
Project:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}

[90mstdout[2m | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts[2m > [22m[2mEditProjectDialogComponent[2m > [22m[2mshould initialize form with project data
[22m[39mdialogData:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}
Project:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/pages/setup/setup.component.spec.ts [2m([22m[2m34 tests[22m[2m)[22m[33m 2685[2mms[22m[39m
     [33m[2mâœ“[22m[39m should create [33m 301[2mms[22m[39m
[90mstdout[2m | src/app/dialogs/user-settings-dialog/tabs/connection-settings/connection-settings.component.spec.ts[2m > [22m[2mConnectionSettingsComponent[2m > [22m[2mauthenticate[2m > [22m[2mshould show error when username is empty
[22m[39m[Migration] authenticate() called

[90mstdout[2m | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts[2m > [22m[2mEditProjectDialogComponent[2m > [22m[2monCancel[2m > [22m[2mshould close the dialog without returning data
[22m[39mdialogData:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}
Project:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}

[90mstdout[2m | src/app/dialogs/user-settings-dialog/tabs/connection-settings/connection-settings.component.spec.ts[2m > [22m[2mConnectionSettingsComponent[2m > [22m[2mauthenticate[2m > [22m[2mshould show error when password is empty
[22m[39m[Migration] authenticate() called

stderr | src/app/pages/project/tabs/templates/templates-tab.component.spec.ts > TemplatesTabComponent > cloneTemplate > should clone a template successfully
[TemplatesTab] No schemas found in library

stderr | src/app/pages/project/tabs/templates/templates-tab.component.spec.ts > TemplatesTabComponent > cloneTemplate > should clone a template successfully
[TemplatesTab] No schemas found in library

[90mstdout[2m | src/app/dialogs/user-settings-dialog/tabs/connection-settings/connection-settings.component.spec.ts[2m > [22m[2mConnectionSettingsComponent[2m > [22m[2mauthenticate[2m > [22m[2mshould show error when passwords do not match in register mode
[22m[39m[Migration] authenticate() called

[90mstdout[2m | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts[2m > [22m[2mEditProjectDialogComponent[2m > [22m[2mloadCoverImage on init[2m > [22m[2mshould call getProjectCover on init
[22m[39mdialogData:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}
Project:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}

stderr | src/app/pages/project/tabs/templates/templates-tab.component.spec.ts > TemplatesTabComponent > deleteTemplate > should delete a template successfully
[TemplatesTab] No schemas found in library

stderr | src/app/pages/project/tabs/templates/templates-tab.component.spec.ts > TemplatesTabComponent > deleteTemplate > should delete a template successfully
[TemplatesTab] No schemas found in library

[90mstdout[2m | src/app/dialogs/user-settings-dialog/tabs/connection-settings/connection-settings.component.spec.ts[2m > [22m[2mConnectionSettingsComponent[2m > [22m[2mauthenticate[2m > [22m[2mshould call registerOnServer when in register mode
[22m[39m[Migration] authenticate() called
[Migration] Starting authentication, mode: register
[Migration] Before configureServerMode, current mode: offline

[90mstdout[2m | src/app/dialogs/user-settings-dialog/tabs/connection-settings/connection-settings.component.spec.ts[2m > [22m[2mConnectionSettingsComponent[2m > [22m[2mauthenticate[2m > [22m[2mshould call registerOnServer when in register mode
[22m[39m[Migration] After configureServerMode, new mode: offline
[Migration] localStorage inkweld-app-config: [1mnull[22m

[90mstdout[2m | src/app/dialogs/user-settings-dialog/tabs/connection-settings/connection-settings.component.spec.ts[2m > [22m[2mConnectionSettingsComponent[2m > [22m[2mauthenticate[2m > [22m[2mshould call registerOnServer when in register mode
[22m[39m[Migration] After auth, token in localStorage: MISSING

[90mstdout[2m | src/app/dialogs/user-settings-dialog/tabs/connection-settings/connection-settings.component.spec.ts[2m > [22m[2mConnectionSettingsComponent[2m > [22m[2mauthenticate[2m > [22m[2mshould call registerOnServer when in register mode
[22m[39m[Migration] Final state: {"status":"Completed","totalProjects":1,"completedProjects":1,"failedProjects":0,"projectStatuses":[]}
[Migration] Configuring server mode...
[Migration] Server mode configured, app-config: {"mode":"server","serverUrl":"http://localhost:8333"}
[Migration] Before cleanup, offline user: [1mnull[22m
[Migration] After cleanup, offline user: [1mnull[22m
[Migration] After cleanup, app-config: {"mode":"server","serverUrl":"http://localhost:8333"}
[Migration] After cleanup, auth_token: MISSING

[90mstdout[2m | src/app/dialogs/user-settings-dialog/tabs/connection-settings/connection-settings.component.spec.ts[2m > [22m[2mConnectionSettingsComponent[2m > [22m[2mauthenticate[2m > [22m[2mshould call loginToServer when in login mode
[22m[39m[Migration] authenticate() called
[Migration] Starting authentication, mode: login
[Migration] Before configureServerMode, current mode: offline

[90mstdout[2m | src/app/dialogs/user-settings-dialog/tabs/connection-settings/connection-settings.component.spec.ts[2m > [22m[2mConnectionSettingsComponent[2m > [22m[2mauthenticate[2m > [22m[2mshould call loginToServer when in login mode
[22m[39m[Migration] After configureServerMode, new mode: offline
[Migration] localStorage inkweld-app-config: {"mode":"server","serverUrl":"http://localhost:8333"}

[90mstdout[2m | src/app/dialogs/user-settings-dialog/tabs/connection-settings/connection-settings.component.spec.ts[2m > [22m[2mConnectionSettingsComponent[2m > [22m[2mauthenticate[2m > [22m[2mshould call loginToServer when in login mode
[22m[39m[Migration] After auth, token in localStorage: MISSING

[90mstdout[2m | src/app/dialogs/user-settings-dialog/tabs/connection-settings/connection-settings.component.spec.ts[2m > [22m[2mConnectionSettingsComponent[2m > [22m[2mauthenticate[2m > [22m[2mshould call loginToServer when in login mode
[22m[39m[Migration] Final state: {"status":"Completed","totalProjects":1,"completedProjects":1,"failedProjects":0,"projectStatuses":[]}
[Migration] Configuring server mode...
[Migration] Server mode configured, app-config: {"mode":"server","serverUrl":"http://localhost:8333"}
[Migration] Before cleanup, offline user: [1mnull[22m
[Migration] After cleanup, offline user: [1mnull[22m
[Migration] After cleanup, app-config: {"mode":"server","serverUrl":"http://localhost:8333"}
[Migration] After cleanup, auth_token: MISSING

[90mstdout[2m | src/app/dialogs/user-settings-dialog/tabs/connection-settings/connection-settings.component.spec.ts[2m > [22m[2mConnectionSettingsComponent[2m > [22m[2mauthenticate[2m > [22m[2mshould show failure message when migration has failed projects
[22m[39m[Migration] authenticate() called
[Migration] Starting authentication, mode: login
[Migration] Before configureServerMode, current mode: offline

[90mstdout[2m | src/app/dialogs/user-settings-dialog/tabs/connection-settings/connection-settings.component.spec.ts[2m > [22m[2mConnectionSettingsComponent[2m > [22m[2mauthenticate[2m > [22m[2mshould show failure message when migration has failed projects
[22m[39m[Migration] After configureServerMode, new mode: offline
[Migration] localStorage inkweld-app-config: {"mode":"server","serverUrl":"http://localhost:8333"}

[90mstdout[2m | src/app/dialogs/user-settings-dialog/tabs/connection-settings/connection-settings.component.spec.ts[2m > [22m[2mConnectionSettingsComponent[2m > [22m[2mauthenticate[2m > [22m[2mshould show failure message when migration has failed projects
[22m[39m[Migration] After auth, token in localStorage: MISSING

[90mstdout[2m | src/app/dialogs/user-settings-dialog/tabs/connection-settings/connection-settings.component.spec.ts[2m > [22m[2mConnectionSettingsComponent[2m > [22m[2mauthenticate[2m > [22m[2mshould show failure message when migration has failed projects
[22m[39m[Migration] Final state: {"status":"Failed","totalProjects":2,"completedProjects":1,"failedProjects":1,"projectStatuses":[]}

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
[90mstdout[2m | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts[2m > [22m[2mEditProjectDialogComponent[2m > [22m[2mloadCoverImage on init[2m > [22m[2mshould set coverImageUrl when loadCoverImage completes successfully
[22m[39mdialogData:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}
Project:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}

[90mstdout[2m | src/app/dialogs/user-settings-dialog/tabs/connection-settings/connection-settings.component.spec.ts[2m > [22m[2mConnectionSettingsComponent[2m > [22m[2mauthenticate[2m > [22m[2mshould handle authentication errors gracefully
[22m[39m[Migration] authenticate() called
[Migration] Starting authentication, mode: login
[Migration] Before configureServerMode, current mode: offline

[90mstdout[2m | src/app/dialogs/user-settings-dialog/tabs/connection-settings/connection-settings.component.spec.ts[2m > [22m[2mConnectionSettingsComponent[2m > [22m[2mauthenticate[2m > [22m[2mshould handle authentication errors gracefully
[22m[39m[Migration] After configureServerMode, new mode: offline
[Migration] localStorage inkweld-app-config: {"mode":"server","serverUrl":"http://localhost:8333"}

[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mshould create
[22m[39mProjectComponent init
Loading project testuser/test-project

[90mstdout[2m | src/app/dialogs/user-settings-dialog/tabs/connection-settings/connection-settings.component.spec.ts[2m > [22m[2mConnectionSettingsComponent[2m > [22m[2mauthenticate[2m > [22m[2mshould show generic error message for non-Error exceptions
[22m[39m[Migration] authenticate() called
[Migration] Starting authentication, mode: login
[Migration] Before configureServerMode, current mode: offline

[90mstdout[2m | src/app/dialogs/user-settings-dialog/tabs/connection-settings/connection-settings.component.spec.ts[2m > [22m[2mConnectionSettingsComponent[2m > [22m[2mauthenticate[2m > [22m[2mshould show generic error message for non-Error exceptions
[22m[39m[Migration] After configureServerMode, new mode: offline
[Migration] localStorage inkweld-app-config: {"mode":"server","serverUrl":"http://localhost:8333"}

stderr | src/app/pages/project/tabs/templates/templates-tab.component.spec.ts > TemplatesTabComponent > editTemplate > should handle template not found
Invalid access: Add Yjs type to a document before reading data.

[90mstdout[2m | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts[2m > [22m[2mEditProjectDialogComponent[2m > [22m[2mloadCoverImage on init[2m > [22m[2mshould handle "Cover image not found" error gracefully
[22m[39mdialogData:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}
Project:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}

[90mstdout[2m | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts[2m > [22m[2mEditProjectDialogComponent[2m > [22m[2mloadCoverImage on init[2m > [22m[2mshould handle "Cover image not found" error gracefully
[22m[39mNo cover image set for this project

[90mstdout[2m | src/app/pages/home/home.component.spec.ts[2m > [22m[2mHomeComponent[2m > [22m[2mshould navigate to project when selecting a project
[22m[39m[HomeComponent] selectProject called with: {
  project: { username: [32m'testuser'[39m, slug: [32m'test-project'[39m, title: [90mundefined[39m }
}

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
stderr | src/app/pages/home/home.component.spec.ts > HomeComponent > should handle error when loading projects
Failed to load projects: Error: Failed to load projects
    at D:/dev/inkweld/frontend/src/app/pages/home/home.component.spec.ts:182:23
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:26
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1237:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1203:10)
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:37
    at Traces.$ (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/test.DqQZzsWf.js:234:21)
    at runTest (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:12)

[90mstdout[2m | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts[2m > [22m[2mEditProjectDialogComponent[2m > [22m[2mloadCoverImage on init[2m > [22m[2mshould handle generic errors during cover load
[22m[39mdialogData:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}
Project:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}

[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2minitialization[2m > [22m[2mshould load project on init with route params
[22m[39mProjectComponent init
Loading project testuser/test-project

[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2minitialization[2m > [22m[2mshould load project on init with route params
[22m[39mProjectComponent init
Loading project testuser/test-project

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/publish/project-sync.service.spec.ts [2m([22m[2m20 tests[22m[2m)[22m[33m 2742[2mms[22m[39m
       [33m[2mâœ“[22m[39m should complete sync with errors when some documents fail [33m 306[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/pages/project/tabs/templates/templates-tab.component.spec.ts [2m([22m[2m21 tests[22m[2m)[22m[33m 3450[2mms[22m[39m
     [33m[2mâœ“[22m[39m should create [33m 765[2mms[22m[39m
       [33m[2mâœ“[22m[39m should load default templates successfully [33m 467[2mms[22m[39m
       [33m[2mâœ“[22m[39m should clone a template successfully [33m 384[2mms[22m[39m
[90mstdout[2m | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts[2m > [22m[2mEditProjectDialogComponent[2m > [22m[2monCoverImageSelected[2m > [22m[2mshould activate cropper for valid file
[22m[39mdialogData:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}
Project:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
[90mstdout[2m | src/app/dialogs/user-settings-dialog/tabs/connection-settings/connection-settings.component.spec.ts[2m > [22m[2mConnectionSettingsComponent[2m > [22m[2msafety guards[2m > [22m[2mshould handle error when switch to offline mode fails
[22m[39m[Migration] About to reload...

[90mstdout[2m | src/app/dialogs/user-settings-dialog/tabs/connection-settings/connection-settings.component.spec.ts[2m > [22m[2mConnectionSettingsComponent[2m > [22m[2msafety guards[2m > [22m[2mshould handle error when switch to offline mode fails
[22m[39m[Migration] About to reload...

[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2minitialization[2m > [22m[2mshould select home tab (0) on init
[22m[39mProjectComponent init
Loading project testuser/test-project

[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2minitialization[2m > [22m[2mshould select home tab (0) on init
[22m[39mProjectComponent init
Loading project testuser/test-project

[90mstdout[2m | src/app/pages/project/tabs/tab-interface.component.spec.ts[2m > [22m[2mTabInterfaceComponent[2m > [22m[2mshould open a system tab
[22m[39m[TabInterface] Opening system tab: documents-list

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
[90mstdout[2m | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts[2m > [22m[2mEditProjectDialogComponent[2m > [22m[2monCoverImageSelected[2m > [22m[2mshould show error for invalid file type
[22m[39mdialogData:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}
Project:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}

[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2msidebar toggling[2m > [22m[2mshould toggle sidebar visibility for desktop
[22m[39mProjectComponent init
Loading project testuser/test-project

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
[90mstdout[2m | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts[2m > [22m[2mEditProjectDialogComponent[2m > [22m[2monCoverImageSelected[2m > [22m[2mshould do nothing if no file is selected
[22m[39mdialogData:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}
Project:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}

[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mdocument opening[2m > [22m[2mshould open document via projectState
[22m[39mProjectComponent init
Loading project testuser/test-project

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
[90mstdout[2m | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts[2m > [22m[2mEditProjectDialogComponent[2m > [22m[2mimage cropper functionality[2m > [22m[2mshould apply cropped image correctly
[22m[39mdialogData:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}
Project:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}

[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mdocument opening[2m > [22m[2mshould navigate to document route when opening document
[22m[39mProjectComponent init
Loading project testuser/test-project

stderr | src/app/pages/create-project/create-project.component.spec.ts > CreateProjectComponent > should handle project creation failure
Failed to create project: Error: API Error
    at D:/dev/inkweld/frontend/src/app/pages/create-project/create-project.component.spec.ts:216:19
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:26
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1237:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1203:10)
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:37
    at Traces.$ (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/test.DqQZzsWf.js:234:21)
    at runTest (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:12)

[90mstdout[2m | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts[2m > [22m[2mEditProjectDialogComponent[2m > [22m[2mimage cropper functionality[2m > [22m[2mshould cancel cropping and reset state
[22m[39mdialogData:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}
Project:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/pages/project/tabs/tab-interface.component.spec.ts [2m([22m[2m17 tests[22m[2m)[22m[33m 3320[2mms[22m[39m
     [33m[2mâœ“[22m[39m should create [33m 753[2mms[22m[39m
     [33m[2mâœ“[22m[39m should change tab when onTabChange is called [33m 374[2mms[22m[39m
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mdocument opening[2m > [22m[2mshould navigate to folder route when opening folder
[22m[39mProjectComponent init
Loading project testuser/test-project

[90mstdout[2m | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts[2m > [22m[2mEditProjectDialogComponent[2m > [22m[2mimage cropper functionality[2m > [22m[2mshould reset cropper state correctly
[22m[39mdialogData:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}
Project:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mtab management[2m > [22m[2mshould close tab at specified index
[22m[39mProjectComponent init
Loading project testuser/test-project

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/pages/welcome/welcome.component.spec.ts [2m([22m[2m29 tests[22m[2m)[22m[33m 5687[2mms[22m[39m
     [33m[2mâœ“[22m[39m should create [33m 511[2mms[22m[39m
       [33m[2mâœ“[22m[39m should clear passwordError when username changes [33m 352[2mms[22m[39m
[90mstdout[2m | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts[2m > [22m[2mEditProjectDialogComponent[2m > [22m[2mimage cropper functionality[2m > [22m[2mshould handle image load failure
[22m[39mdialogData:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}
Project:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/pages/home/home.component.spec.ts [2m([22m[2m23 tests[22m[2m)[22m[33m 2083[2mms[22m[39m
[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mtab management[2m > [22m[2mshould not close home tab (index 0)
[22m[39mProjectComponent init
Loading project testuser/test-project

[90mstdout[2m | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts[2m > [22m[2mEditProjectDialogComponent[2m > [22m[2mimage cropper functionality[2m > [22m[2mshould set hasImageLoaded when image loads
[22m[39mdialogData:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}
Project:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/pages/create-project/create-project.component.spec.ts [2m([22m[2m12 tests[22m[2m)[22m[33m 5193[2mms[22m[39m
     [33m[2mâœ“[22m[39m should create [33m 1483[2mms[22m[39m
     [33m[2mâœ“[22m[39m should initialize form with default values [33m 457[2mms[22m[39m
     [33m[2mâœ“[22m[39m should generate slug from title [33m 508[2mms[22m[39m
     [33m[2mâœ“[22m[39m should update project URL when slug changes [33m 348[2mms[22m[39m
     [33m[2mâœ“[22m[39m should not submit if form is invalid [33m 304[2mms[22m[39m
     [33m[2mâœ“[22m[39m should create project successfully [33m 307[2mms[22m[39m
     [33m[2mâœ“[22m[39m should redirect to home if project response is incomplete [33m 512[2mms[22m[39m
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mtab management[2m > [22m[2mshould set selected tab index
[22m[39mProjectComponent init
Loading project testuser/test-project

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/dialogs/user-settings-dialog/tabs/connection-settings/connection-settings.component.spec.ts [2m([22m[2m30 tests[22m[2m)[22m[33m 6114[2mms[22m[39m
     [33m[2mâœ“[22m[39m should create [33m 842[2mms[22m[39m
       [33m[2mâœ“[22m[39m should show error when server responds with error [33m 327[2mms[22m[39m
       [33m[2mâœ“[22m[39m should not switch modes if user cancels confirmation [33m 331[2mms[22m[39m
[90mstdout[2m | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts[2m > [22m[2mEditProjectDialogComponent[2m > [22m[2mimage cropper functionality[2m > [22m[2mshould set isCropperReady when cropper is ready
[22m[39mdialogData:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}
Project:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
stderr | src/app/pages/project/tabs/publish-plan/publish-plan-tab.component.spec.ts > PublishPlanTabComponent > should call updatePublishPlan when saving
[SystemConfig] Failed to load system features, using defaults: HttpErrorResponse {
  headers: HttpHeaders {
    headers: Map(0) {},
    normalizedNames: Map(0) {},
    lazyInit: undefined,
    lazyUpdate: null
  },
  status: 0,
  statusText: 'Unknown Error',
  url: 'http://localhost:8333/api/v1/config/features',
  ok: false,
  type: undefined,
  redirected: undefined,
  responseType: undefined,
  name: 'HttpErrorResponse',
  message: 'Http failure response for http://localhost:8333/api/v1/config/features: 0 Unknown Error',
  error: ProgressEvent { isTrusted: [Getter] }
}

stderr | src/app/pages/project/tabs/publish-plan/publish-plan-tab.component.spec.ts > PublishPlanTabComponent > should call updatePublishPlan when saving
[SystemConfig] Failed to load system features, using defaults: HttpErrorResponse {
  headers: HttpHeaders {
    headers: Map(0) {},
    normalizedNames: Map(0) {},
    lazyInit: undefined,
    lazyUpdate: null
  },
  status: 0,
  statusText: 'Unknown Error',
  url: 'http://localhost:8333/api/v1/config/features',
  ok: false,
  type: undefined,
  redirected: undefined,
  responseType: undefined,
  name: 'HttpErrorResponse',
  message: 'Http failure response for http://localhost:8333/api/v1/config/features: 0 Unknown Error',
  error: ProgressEvent { isTrusted: [Getter] }
}

stderr | src/app/pages/project/tabs/publish-plan/publish-plan-tab.component.spec.ts > PublishPlanTabComponent > should call updatePublishPlan when saving
[SystemConfig] Failed to load system features, using defaults: HttpErrorResponse {
  headers: HttpHeaders {
    headers: Map(0) {},
    normalizedNames: Map(0) {},
    lazyInit: undefined,
    lazyUpdate: null
  },
  status: 0,
  statusText: 'Unknown Error',
  url: 'http://localhost:8333/api/v1/config/features',
  ok: false,
  type: undefined,
  redirected: undefined,
  responseType: undefined,
  name: 'HttpErrorResponse',
  message: 'Http failure response for http://localhost:8333/api/v1/config/features: 0 Unknown Error',
  error: ProgressEvent { isTrusted: [Getter] }
}

stderr | src/app/pages/project/tabs/publish-plan/publish-plan-tab.component.spec.ts > PublishPlanTabComponent > should call updatePublishPlan when saving
[SystemConfig] Failed to load system features, using defaults: HttpErrorResponse {
  headers: HttpHeaders {
    headers: Map(0) {},
    normalizedNames: Map(0) {},
    lazyInit: undefined,
    lazyUpdate: null
  },
  status: 0,
  statusText: 'Unknown Error',
  url: 'http://localhost:8333/api/v1/config/features',
  ok: false,
  type: undefined,
  redirected: undefined,
  responseType: undefined,
  name: 'HttpErrorResponse',
  message: 'Http failure response for http://localhost:8333/api/v1/config/features: 0 Unknown Error',
  error: ProgressEvent { isTrusted: [Getter] }
}

[90mstdout[2m | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts[2m > [22m[2mEditProjectDialogComponent[2m > [22m[2mopenCoverImageSelector[2m > [22m[2mshould trigger click on the cover image file input
[22m[39mdialogData:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}
Project:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}

[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mnavigation[2m > [22m[2mshould exit project and navigate home
[22m[39mProjectComponent init
Loading project testuser/test-project

stderr | src/app/components/document-element-editor/document-element-editor.component.spec.ts > DocumentElementEditorComponent > should create
Error during cleanup of component {
  component: _DocumentElementEditorComponent {
    documentService: {
      setupCollaboration: [Function],
      disconnect: [Function],
      getSyncStatusSignal: [Function],
      getWordCountSignal: [Function]
    },
    projectState: { isLoading: [Function], project: [Function] },
    settingsService: { getSetting: [Function] },
    fileInput: undefined,
    _documentId: 'invalid',
    documentIdSignal: [Function: getter] {
      toString: [Function (anonymous)],
      set: [Function: set],
      update: [Function: update],
      asReadonly: [Function: bound signalAsReadonlyFn],
      Symbol(SIGNAL): [Object]
    },
    zenMode: false,
    tabsDisabled: false,
    showSnapshotPanel: [Function: getter] {
      toString: [Function (anonymous)],
      set: [Function: set],
      update: [Function: update],
      asReadonly: [Function: bound signalAsReadonlyFn],
      Symbol(SIGNAL): [Object]
    },
    editor: undefined,
    toolbar: [ [Array], [Array], [Array], [Array], [Array], [Array] ],
    floatToolbar: [ [Array] ],
    colorPresets: [
      '#000000', '#434343', '#666666',
      '#999999', '#b7b7b7', '#cccccc',
      '#d9d9d9', '#efefef', '#f3f3f3',
      '#ffffff', '#980000', '#ff0000',
      '#ff9900', '#ffff00', '#00ff00',
      '#00ffff', '#4a86e8', '#0000ff',
      '#9900ff', '#ff00ff'
    ],
    idFormatted: false,
    collaborationSetup: false,
    editorKey: 0,
    cdr: ViewRef {
      _lView: [Array],
      _cdRefInjectingView: [Array],
      _appRef: null,
      _attachedToViewContainer: false,
      exhaustive: undefined
    },
    syncState: [Function: computed] {
      toString: [Function (anonymous)],
      Symbol(SIGNAL): [Object]
    },
    wordCount: [Function: computed] {
      toString: [Function (anonymous)],
      Symbol(SIGNAL): [Object]
    },
    __ngContext__: 614
  },
  stacktrace: TypeError: Cannot read properties of undefined (reading 'destroy')
      at _DocumentElementEditorComponent.ngOnDestroy (D:/dev/inkweld/frontend/src/app/components/document-element-editor/document-element-editor.component.ts:254:17)
      at executeOnDestroys (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4558:20)
      at cleanUpView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4436:5)
      at destroyViewTree (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4403:9)
      at destroyLView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4425:3)
      at ViewRef.destroy (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5829:5)
      at ComponentRef.destroy (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:8366:19)
      at ComponentFixture.destroy (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/testing.mjs:284:25)
      at file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/testing.mjs:1502:17
      at Array.forEach (<anonymous>)
}

stderr | src/app/components/document-element-editor/document-element-editor.component.spec.ts > DocumentElementEditorComponent > initialization > should initialize with default values
Error during cleanup of component {
  component: _DocumentElementEditorComponent {
    documentService: {
      setupCollaboration: [Function],
      disconnect: [Function],
      getSyncStatusSignal: [Function],
      getWordCountSignal: [Function]
    },
    projectState: { isLoading: [Function], project: [Function] },
    settingsService: { getSetting: [Function] },
    fileInput: undefined,
    _documentId: 'invalid',
    documentIdSignal: [Function: getter] {
      toString: [Function (anonymous)],
      set: [Function: set],
      update: [Function: update],
      asReadonly: [Function: bound signalAsReadonlyFn],
      Symbol(SIGNAL): [Object]
    },
    zenMode: false,
    tabsDisabled: false,
    showSnapshotPanel: [Function: getter] {
      toString: [Function (anonymous)],
      set: [Function: set],
      update: [Function: update],
      asReadonly: [Function: bound signalAsReadonlyFn],
      Symbol(SIGNAL): [Object]
    },
    editor: undefined,
    toolbar: [ [Array], [Array], [Array], [Array], [Array], [Array] ],
    floatToolbar: [ [Array] ],
    colorPresets: [
      '#000000', '#434343', '#666666',
      '#999999', '#b7b7b7', '#cccccc',
      '#d9d9d9', '#efefef', '#f3f3f3',
      '#ffffff', '#980000', '#ff0000',
      '#ff9900', '#ffff00', '#00ff00',
      '#00ffff', '#4a86e8', '#0000ff',
      '#9900ff', '#ff00ff'
    ],
    idFormatted: false,
    collaborationSetup: false,
    editorKey: 0,
    cdr: ViewRef {
      _lView: [Array],
      _cdRefInjectingView: [Array],
      _appRef: null,
      _attachedToViewContainer: false,
      exhaustive: undefined
    },
    syncState: [Function: computed] {
      toString: [Function (anonymous)],
      Symbol(SIGNAL): [Object]
    },
    wordCount: [Function: computed] {
      toString: [Function (anonymous)],
      Symbol(SIGNAL): [Object]
    },
    __ngContext__: 616
  },
  stacktrace: TypeError: Cannot read properties of undefined (reading 'destroy')
      at _DocumentElementEditorComponent.ngOnDestroy (D:/dev/inkweld/frontend/src/app/components/document-element-editor/document-element-editor.component.ts:254:17)
      at executeOnDestroys (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4558:20)
      at cleanUpView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4436:5)
      at destroyViewTree (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4403:9)
      at destroyLView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4425:3)
      at ViewRef.destroy (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5829:5)
      at ComponentRef.destroy (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:8366:19)
      at ComponentFixture.destroy (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/testing.mjs:284:25)
      at file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/testing.mjs:1502:17
      at Array.forEach (<anonymous>)
}

stderr | src/app/components/document-element-editor/document-element-editor.component.spec.ts > DocumentElementEditorComponent > initialization > should have default toolbar configuration
Error during cleanup of component {
  component: _DocumentElementEditorComponent {
    documentService: {
      setupCollaboration: [Function],
      disconnect: [Function],
      getSyncStatusSignal: [Function],
      getWordCountSignal: [Function]
    },
    projectState: { isLoading: [Function], project: [Function] },
    settingsService: { getSetting: [Function] },
    fileInput: undefined,
    _documentId: 'invalid',
    documentIdSignal: [Function: getter] {
      toString: [Function (anonymous)],
      set: [Function: set],
      update: [Function: update],
      asReadonly: [Function: bound signalAsReadonlyFn],
      Symbol(SIGNAL): [Object]
    },
    zenMode: false,
    tabsDisabled: false,
    showSnapshotPanel: [Function: getter] {
      toString: [Function (anonymous)],
      set: [Function: set],
      update: [Function: update],
      asReadonly: [Function: bound signalAsReadonlyFn],
      Symbol(SIGNAL): [Object]
    },
    editor: undefined,
    toolbar: [ [Array], [Array], [Array], [Array], [Array], [Array] ],
    floatToolbar: [ [Array] ],
    colorPresets: [
      '#000000', '#434343', '#666666',
      '#999999', '#b7b7b7', '#cccccc',
      '#d9d9d9', '#efefef', '#f3f3f3',
      '#ffffff', '#980000', '#ff0000',
      '#ff9900', '#ffff00', '#00ff00',
      '#00ffff', '#4a86e8', '#0000ff',
      '#9900ff', '#ff00ff'
    ],
    idFormatted: false,
    collaborationSetup: false,
    editorKey: 0,
    cdr: ViewRef {
      _lView: [Array],
      _cdRefInjectingView: [Array],
      _appRef: null,
      _attachedToViewContainer: false,
      exhaustive: undefined
    },
    syncState: [Function: computed] {
      toString: [Function (anonymous)],
      Symbol(SIGNAL): [Object]
    },
    wordCount: [Function: computed] {
      toString: [Function (anonymous)],
      Symbol(SIGNAL): [Object]
    },
    __ngContext__: 618
  },
  stacktrace: TypeError: Cannot read properties of undefined (reading 'destroy')
      at _DocumentElementEditorComponent.ngOnDestroy (D:/dev/inkweld/frontend/src/app/components/document-element-editor/document-element-editor.component.ts:254:17)
      at executeOnDestroys (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4558:20)
      at cleanUpView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4436:5)
      at destroyViewTree (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4403:9)
      at destroyLView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4425:3)
      at ViewRef.destroy (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5829:5)
      at ComponentRef.destroy (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:8366:19)
      at ComponentFixture.destroy (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/testing.mjs:284:25)
      at file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/testing.mjs:1502:17
      at Array.forEach (<anonymous>)
}

stderr | src/app/components/document-element-editor/document-element-editor.component.spec.ts > DocumentElementEditorComponent > initialization > should have color presets
Error during cleanup of component {
  component: _DocumentElementEditorComponent {
    documentService: {
      setupCollaboration: [Function],
      disconnect: [Function],
      getSyncStatusSignal: [Function],
      getWordCountSignal: [Function]
    },
    projectState: { isLoading: [Function], project: [Function] },
    settingsService: { getSetting: [Function] },
    fileInput: undefined,
    _documentId: 'invalid',
    documentIdSignal: [Function: getter] {
      toString: [Function (anonymous)],
      set: [Function: set],
      update: [Function: update],
      asReadonly: [Function: bound signalAsReadonlyFn],
      Symbol(SIGNAL): [Object]
    },
    zenMode: false,
    tabsDisabled: false,
    showSnapshotPanel: [Function: getter] {
      toString: [Function (anonymous)],
      set: [Function: set],
      update: [Function: update],
      asReadonly: [Function: bound signalAsReadonlyFn],
      Symbol(SIGNAL): [Object]
    },
    editor: undefined,
    toolbar: [ [Array], [Array], [Array], [Array], [Array], [Array] ],
    floatToolbar: [ [Array] ],
    colorPresets: [
      '#000000', '#434343', '#666666',
      '#999999', '#b7b7b7', '#cccccc',
      '#d9d9d9', '#efefef', '#f3f3f3',
      '#ffffff', '#980000', '#ff0000',
      '#ff9900', '#ffff00', '#00ff00',
      '#00ffff', '#4a86e8', '#0000ff',
      '#9900ff', '#ff00ff'
    ],
    idFormatted: false,
    collaborationSetup: false,
    editorKey: 0,
    cdr: ViewRef {
      _lView: [Array],
      _cdRefInjectingView: [Array],
      _appRef: null,
      _attachedToViewContainer: false,
      exhaustive: undefined
    },
    syncState: [Function: computed] {
      toString: [Function (anonymous)],
      Symbol(SIGNAL): [Object]
    },
    wordCount: [Function: computed] {
      toString: [Function (anonymous)],
      Symbol(SIGNAL): [Object]
    },
    __ngContext__: 620
  },
  stacktrace: TypeError: Cannot read properties of undefined (reading 'destroy')
      at _DocumentElementEditorComponent.ngOnDestroy (D:/dev/inkweld/frontend/src/app/components/document-element-editor/document-element-editor.component.ts:254:17)
      at executeOnDestroys (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4558:20)
      at cleanUpView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4436:5)
      at destroyViewTree (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4403:9)
      at destroyLView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4425:3)
      at ViewRef.destroy (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5829:5)
      at ComponentRef.destroy (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:8366:19)
      at ComponentFixture.destroy (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/testing.mjs:284:25)
      at file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/testing.mjs:1502:17
      at Array.forEach (<anonymous>)
}

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/components/snapshot-panel/snapshot-panel.component.spec.ts [2m([22m[2m22 tests[22m[2m)[22m[33m 5057[2mms[22m[39m
     [33m[2mâœ“[22m[39m should create [33m 997[2mms[22m[39m
       [33m[2mâœ“[22m[39m should load snapshots on init [33m 497[2mms[22m[39m
       [33m[2mâœ“[22m[39m should set loading to true while loading [33m 430[2mms[22m[39m
       [33m[2mâœ“[22m[39m should open restore dialog and restore snapshot when confirmed [33m 310[2mms[22m[39m
[90mstdout[2m | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts[2m > [22m[2mEditProjectDialogComponent[2m > [22m[2mremoveCoverImage[2m > [22m[2mshould call deleteProjectCover and clear local state on success
[22m[39mdialogData:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}
Project:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/pages/project/tabs/publish-plan/publish-plan-tab.component.spec.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 4170[2mms[22m[39m
     [33m[2mâœ“[22m[39m should create [33m 1749[2mms[22m[39m
     [33m[2mâœ“[22m[39m should display plan name [33m 707[2mms[22m[39m
     [33m[2mâœ“[22m[39m should show save button when changes are made [33m 797[2mms[22m[39m
     [33m[2mâœ“[22m[39m should call updatePublishPlan when saving [33m 914[2mms[22m[39m
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
stderr | src/app/components/document-element-editor/document-element-editor.component.spec.ts > DocumentElementEditorComponent > documentId handling > should set documentId via input
Error during cleanup of component {
  component: _DocumentElementEditorComponent {
    documentService: {
      setupCollaboration: [Function],
      disconnect: [Function],
      getSyncStatusSignal: [Function],
      getWordCountSignal: [Function]
    },
    projectState: { isLoading: [Function], project: [Function] },
    settingsService: { getSetting: [Function] },
    fileInput: undefined,
    _documentId: 'testuser:test-project:doc-1',
    documentIdSignal: [Function: getter] {
      toString: [Function (anonymous)],
      set: [Function: set],
      update: [Function: update],
      asReadonly: [Function: bound signalAsReadonlyFn],
      Symbol(SIGNAL): [Object]
    },
    zenMode: false,
    tabsDisabled: false,
    showSnapshotPanel: [Function: getter] {
      toString: [Function (anonymous)],
      set: [Function: set],
      update: [Function: update],
      asReadonly: [Function: bound signalAsReadonlyFn],
      Symbol(SIGNAL): [Object]
    },
    editor: undefined,
    toolbar: [ [Array], [Array], [Array], [Array], [Array], [Array] ],
    floatToolbar: [ [Array] ],
    colorPresets: [
      '#000000', '#434343', '#666666',
      '#999999', '#b7b7b7', '#cccccc',
      '#d9d9d9', '#efefef', '#f3f3f3',
      '#ffffff', '#980000', '#ff0000',
      '#ff9900', '#ffff00', '#00ff00',
      '#00ffff', '#4a86e8', '#0000ff',
      '#9900ff', '#ff00ff'
    ],
    idFormatted: false,
    collaborationSetup: false,
    editorKey: 0,
    cdr: ViewRef {
      _lView: [Array],
      _cdRefInjectingView: [Array],
      _appRef: null,
      _attachedToViewContainer: false,
      exhaustive: undefined
    },
    syncState: [Function: computed] {
      toString: [Function (anonymous)],
      Symbol(SIGNAL): [Object]
    },
    wordCount: [Function: computed] {
      toString: [Function (anonymous)],
      Symbol(SIGNAL): [Object]
    },
    __ngContext__: 622
  },
  stacktrace: TypeError: Cannot read properties of undefined (reading 'destroy')
      at _DocumentElementEditorComponent.ngOnDestroy (D:/dev/inkweld/frontend/src/app/components/document-element-editor/document-element-editor.component.ts:254:17)
      at executeOnDestroys (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4558:20)
      at cleanUpView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4436:5)
      at destroyViewTree (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4403:9)
      at destroyLView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4425:3)
      at ViewRef.destroy (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5829:5)
      at ComponentRef.destroy (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:8366:19)
      at ComponentFixture.destroy (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/testing.mjs:284:25)
      at file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/testing.mjs:1502:17
      at Array.forEach (<anonymous>)
}

[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mnavigation[2m > [22m[2mshould navigate to home tab via goHome
[22m[39mProjectComponent init
Loading project testuser/test-project

[90mstdout[2m | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts[2m > [22m[2mEditProjectDialogComponent[2m > [22m[2mremoveCoverImage[2m > [22m[2mshould show error message if deleteProjectCover fails
[22m[39mdialogData:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}
Project:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/dialogs/user-settings-dialog/tabs/sync-settings/sync-settings.component.spec.ts [2m([22m[2m16 tests[22m[2m)[22m[33m 2244[2mms[22m[39m
[90mstdout[2m | src/app/components/document-element-editor/document-element-editor.component.spec.ts[2m > [22m[2mDocumentElementEditorComponent[2m > [22m[2mdocumentId handling[2m > [22m[2mshould format documentId with project info when incomplete
[22m[39m[DocumentEditor] ngOnInit - documentId: doc-1
[DocumentEditor] ngOnInit - creating editor for testuser:test-project:doc-1
[DocumentEditor] ngOnInit - editor created, doc size: [33m0[39m
[DocumentEditor] ngAfterViewChecked - calling setupCollaboration: testuser:test-project:doc-1

[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2msystem tabs[2m > [22m[2mshould show document list
[22m[39mProjectComponent init
Loading project testuser/test-project

[90mstdout[2m | src/app/pages/project/tabs/home/home-tab.component.spec.ts[2m > [22m[2mHomeTabComponent[2m > [22m[2mshould open generate cover dialog when generate cover button is clicked
[22m[39mSaving cover image for project: testuser test-project

stderr | src/app/pages/project/tabs/home/home-tab.component.spec.ts > HomeTabComponent > should open generate cover dialog when generate cover button is clicked
Failed to refresh project after cover upload: TypeError: this.projectService.getProjectByUsernameAndSlug is not a function
    at D:/dev/inkweld/frontend/src/app/pages/project/tabs/home/home-tab.component.ts:167:39
    at processTicksAndRejections (node:internal/process/task_queues:105:5)

[90mstdout[2m | src/app/pages/project/tabs/home/home-tab.component.spec.ts[2m > [22m[2mHomeTabComponent[2m > [22m[2mshould open generate cover dialog when generate cover button is clicked
[22m[39mCover image uploaded successfully

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/dialogs/publishing-progress-dialog/publishing-progress-dialog.component.spec.ts [2m([22m[2m36 tests[22m[2m)[22m[33m 4979[2mms[22m[39m
     [33m[2mâœ“[22m[39m should create [33m 746[2mms[22m[39m
[90mstdout[2m | src/app/components/document-element-editor/document-element-editor.component.spec.ts[2m > [22m[2mDocumentElementEditorComponent[2m > [22m[2msyncState[2m > [22m[2mshould return sync state from document service
[22m[39m[DocumentEditor] ngOnInit - documentId: testuser:test-project:doc-1
[DocumentEditor] ngOnInit - creating editor for testuser:test-project:doc-1
[DocumentEditor] ngOnInit - editor created, doc size: [33m0[39m
[DocumentEditor] ngAfterViewChecked - calling setupCollaboration: testuser:test-project:doc-1

[90mstdout[2m | src/app/pages/project/tabs/home/home-tab.component.spec.ts[2m > [22m[2mHomeTabComponent[2m > [22m[2mshould save cover image when dialog approves with image data
[22m[39mSaving cover image for project: testuser test-project

stderr | src/app/pages/project/tabs/home/home-tab.component.spec.ts > HomeTabComponent > should save cover image when dialog approves with image data
Failed to refresh project after cover upload: TypeError: this.projectService.getProjectByUsernameAndSlug is not a function
    at D:/dev/inkweld/frontend/src/app/pages/project/tabs/home/home-tab.component.ts:167:39
    at processTicksAndRejections (node:internal/process/task_queues:105:5)

[90mstdout[2m | src/app/pages/project/tabs/home/home-tab.component.spec.ts[2m > [22m[2mHomeTabComponent[2m > [22m[2mshould save cover image when dialog approves with image data
[22m[39mCover image uploaded successfully

[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mshould create
[22m[39m[DEBUG][ProjectTree] Visible elements changed [
  {
    id: [32m'1'[39m,
    name: [32m'Test Element'[39m,
    type: [32m'FOLDER'[39m,
    order: [33m0[39m,
    level: [33m1[39m,
    expandable: [33mfalse[39m,
    version: [33m0[39m,
    metadata: {},
    visible: [33mtrue[39m,
    parentId: [1mnull[22m
  }
]

[90mstdout[2m | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts[2m > [22m[2mEditProjectDialogComponent[2m > [22m[2mremoveCoverImage[2m > [22m[2mshould not call deleteProjectCover if username or slug is missing
[22m[39mdialogData:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}
Project:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}

[90mstdout[2m | src/app/components/document-element-editor/document-element-editor.component.spec.ts[2m > [22m[2mDocumentElementEditorComponent[2m > [22m[2mwordCount[2m > [22m[2mshould return word count from document service
[22m[39m[DocumentEditor] ngOnInit - documentId: testuser:test-project:doc-1
[DocumentEditor] ngOnInit - creating editor for testuser:test-project:doc-1
[DocumentEditor] ngOnInit - editor created, doc size: [33m0[39m
[DocumentEditor] ngAfterViewChecked - calling setupCollaboration: testuser:test-project:doc-1

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mshould initialize with elements from service
[22m[39m[DEBUG][ProjectTree] Visible elements changed [
  {
    id: [32m'1'[39m,
    name: [32m'Test Element'[39m,
    type: [32m'FOLDER'[39m,
    order: [33m0[39m,
    level: [33m1[39m,
    expandable: [33mfalse[39m,
    version: [33m0[39m,
    metadata: {},
    visible: [33mtrue[39m,
    parentId: [1mnull[22m
  }
]

[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2msystem tabs[2m > [22m[2mshould show file list
[22m[39mProjectComponent init
Loading project testuser/test-project

[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mState Management[2m > [22m[2mshould handle loading, saving and error states
[22m[39m[DEBUG][ProjectTree] Visible elements changed [
  {
    id: [32m'1'[39m,
    name: [32m'Test Element'[39m,
    type: [32m'FOLDER'[39m,
    order: [33m0[39m,
    level: [33m1[39m,
    expandable: [33mfalse[39m,
    version: [33m0[39m,
    metadata: {},
    visible: [33mtrue[39m,
    parentId: [1mnull[22m
  }
]

[90mstdout[2m | src/app/components/document-element-editor/document-element-editor.component.spec.ts[2m > [22m[2mDocumentElementEditorComponent[2m > [22m[2mngOnDestroy[2m > [22m[2mshould destroy editor on destroy
[22m[39m[DocumentEditor] ngOnInit - documentId: testuser:test-project:doc-1
[DocumentEditor] ngOnInit - creating editor for testuser:test-project:doc-1
[DocumentEditor] ngOnInit - editor created, doc size: [33m0[39m
[DocumentEditor] ngAfterViewChecked - calling setupCollaboration: testuser:test-project:doc-1
[DocumentEditor] ngOnInit - documentId: testuser:test-project:doc-1
[DocumentEditor] ngOnInit - creating editor for testuser:test-project:doc-1
[DocumentEditor] ngOnInit - editor created, doc size: [33m0[39m

[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mDrag and Drop[2m > [22m[2mDrop Handling[2m > [22m[2mshould handle valid drops without confirmation
[22m[39m[DEBUG][ProjectTree] Visible elements changed [
  {
    id: [32m'1'[39m,
    name: [32m'Test Element'[39m,
    type: [32m'FOLDER'[39m,
    order: [33m0[39m,
    level: [33m1[39m,
    expandable: [33mfalse[39m,
    version: [33m0[39m,
    metadata: {},
    visible: [33mtrue[39m,
    parentId: [1mnull[22m
  }
]

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mDrag and Drop[2m > [22m[2mDrop Handling[2m > [22m[2mshould handle valid drops without confirmation
[22m[39m[DEBUG][ProjectTree] Drop event {
  previousIndex: [33m0[39m,
  currentIndex: [33m1[39m,
  isDraggingDown: [33mtrue[39m,
  draggedItem: [32m'Test Element'[39m
}

[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2msystem tabs[2m > [22m[2mshould show templates list
[22m[39mProjectComponent init
Loading project testuser/test-project

[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mDrag and Drop[2m > [22m[2mDrop Handling[2m > [22m[2mshould show confirmation dialog when confirmElementMoves is enabled
[22m[39m[DEBUG][ProjectTree] Visible elements changed [
  {
    id: [32m'1'[39m,
    name: [32m'Test Element'[39m,
    type: [32m'FOLDER'[39m,
    order: [33m0[39m,
    level: [33m1[39m,
    expandable: [33mfalse[39m,
    version: [33m0[39m,
    metadata: {},
    visible: [33mtrue[39m,
    parentId: [1mnull[22m
  }
]

[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mDrag and Drop[2m > [22m[2mDrop Handling[2m > [22m[2mshould show confirmation dialog when confirmElementMoves is enabled
[22m[39m[DEBUG][ProjectTree] Drop event {
  previousIndex: [33m0[39m,
  currentIndex: [33m1[39m,
  isDraggingDown: [33mtrue[39m,
  draggedItem: [32m'Test Element'[39m
}

[90mstdout[2m | src/app/components/document-element-editor/document-element-editor.component.spec.ts[2m > [22m[2mDocumentElementEditorComponent[2m > [22m[2mngOnDestroy[2m > [22m[2mshould disconnect from document service on destroy
[22m[39m[DocumentEditor] ngOnInit - documentId: testuser:test-project:doc-1
[DocumentEditor] ngOnInit - creating editor for testuser:test-project:doc-1
[DocumentEditor] ngOnInit - editor created, doc size: [33m0[39m
[DocumentEditor] ngAfterViewChecked - calling setupCollaboration: testuser:test-project:doc-1
[DocumentEditor] ngOnInit - documentId: testuser:test-project:doc-1
[DocumentEditor] ngOnInit - creating editor for testuser:test-project:doc-1
[DocumentEditor] ngOnInit - editor created, doc size: [33m0[39m

[90mstdout[2m | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts[2m > [22m[2mEditProjectDialogComponent[2m > [22m[2monSave functionality[2m > [22m[2mshould not save if form is invalid
[22m[39mdialogData:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}
Project:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}

[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mDrag and Drop[2m > [22m[2mDrop Handling[2m > [22m[2mshould not move element when confirmation is cancelled
[22m[39m[DEBUG][ProjectTree] Visible elements changed [
  {
    id: [32m'1'[39m,
    name: [32m'Test Element'[39m,
    type: [32m'FOLDER'[39m,
    order: [33m0[39m,
    level: [33m1[39m,
    expandable: [33mfalse[39m,
    version: [33m0[39m,
    metadata: {},
    visible: [33mtrue[39m,
    parentId: [1mnull[22m
  }
]

[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mDrag and Drop[2m > [22m[2mDrop Handling[2m > [22m[2mshould not move element when confirmation is cancelled
[22m[39m[DEBUG][ProjectTree] Drop event {
  previousIndex: [33m0[39m,
  currentIndex: [33m1[39m,
  isDraggingDown: [33mtrue[39m,
  draggedItem: [32m'Test Element'[39m
}

[90mstdout[2m | src/app/components/document-element-editor/document-element-editor.component.spec.ts[2m > [22m[2mDocumentElementEditorComponent[2m > [22m[2mngOnDestroy[2m > [22m[2mshould not disconnect if in zen mode
[22m[39m[DocumentEditor] ngOnInit - documentId: testuser:test-project:doc-1
[DocumentEditor] ngOnInit - creating editor for testuser:test-project:doc-1
[DocumentEditor] ngOnInit - editor created, doc size: [33m0[39m
[DocumentEditor] ngAfterViewChecked - calling setupCollaboration: testuser:test-project:doc-1
[DocumentEditor] ngOnInit - documentId: testuser:test-project:doc-1
[DocumentEditor] ngOnInit - creating editor for testuser:test-project:doc-1
[DocumentEditor] ngOnInit - editor created, doc size: [33m0[39m

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
[90mstdout[2m | src/app/dialogs/new-element-dialog/new-element-dialog.component.spec.ts[2m > [22m[2mNewElementDialogComponent[2m > [22m[2mworldbuilding type loading[2m > [22m[2mshould load worldbuilding types when project is set
[22m[39m[NewElementDialog] Loading worldbuilding types for testuser test-project

[90mstdout[2m | src/app/dialogs/new-element-dialog/new-element-dialog.component.spec.ts[2m > [22m[2mNewElementDialogComponent[2m > [22m[2mworldbuilding type loading[2m > [22m[2mshould load worldbuilding types when project is set
[22m[39m[NewElementDialog] Loaded library: [36m<ref *1>[39m YMap {
  _item: [1mnull[22m,
  _map: Map(1) {
    [32m'schemas'[39m => Item {
      id: [36m[ID][39m,
      length: [33m1[39m,
      origin: [1mnull[22m,
      left: [1mnull[22m,
      right: [1mnull[22m,
      rightOrigin: [1mnull[22m,
      parent: [36m[Circular *1][39m,
      parentSub: [32m'schemas'[39m,
      redone: [1mnull[22m,
      content: [36m[ContentType][39m,
      info: [33m2[39m
    }
  },
  _start: [1mnull[22m,
  doc: Doc {
    _observers: Map(2) { [32m'load'[39m => [36m[Set][39m, [32m'sync'[39m => [36m[Set][39m },
    gc: [33mtrue[39m,
    gcFilter: [36m[Function: gcFilter][39m,
    clientID: [33m4238788316[39m,
    guid: [32m'a8c633a5-a2cf-4083-802b-693ffbb7de72'[39m,
    collectionid: [1mnull[22m,
    share: Map(1) { [32m'library'[39m => [36m[Circular *1][39m },
    store: StructStore {
      clients: [36m[Map][39m,
      pendingStructs: [1mnull[22m,
      pendingDs: [1mnull[22m
    },
    _transaction: [1mnull[22m,
    _transactionCleanups: [],
    subdocs: Set(0) {},
    _item: [1mnull[22m,
    shouldLoad: [33mtrue[39m,
    autoLoad: [33mfalse[39m,
    meta: [1mnull[22m,
    isLoaded: [33mfalse[39m,
    isSynced: [33mfalse[39m,
    isDestroyed: [33mfalse[39m,
    whenLoaded: Promise { [36m<pending>[39m },
    whenSynced: Promise { [36m<pending>[39m }
  },
  _length: [33m0[39m,
  _eH: EventHandler { l: [] },
  _dEH: EventHandler { l: [] },
  _searchMarker: [1mnull[22m,
  _prelimContent: [1mnull[22m
}
[NewElementDialog] Found schemas map
[NewElementDialog] Found schema: {
  type: [32m'CHARACTER'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'A character template'[39m
}
[NewElementDialog] Found schema: {
  type: [32m'LOCATION'[39m,
  name: [32m'Location'[39m,
  icon: [32m'place'[39m,
  description: [32m'A location template'[39m
}
[NewElementDialog] Built worldbuilding options: [
  {
    type: [32m'CHARACTER'[39m,
    label: [32m'Character'[39m,
    icon: [32m'person'[39m,
    description: [32m'A character template'[39m,
    category: [32m'worldbuilding'[39m
  },
  {
    type: [32m'LOCATION'[39m,
    label: [32m'Location'[39m,
    icon: [32m'place'[39m,
    description: [32m'A location template'[39m,
    category: [32m'worldbuilding'[39m
  }
]
[NewElementDialog] Loaded 2 worldbuilding types from schema library

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/pages/project/tabs/home/home-tab.component.spec.ts [2m([22m[2m24 tests[22m[2m | [22m[33m6 skipped[39m[2m)[22m[33m 1954[2mms[22m[39m
[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mDrag and Drop[2m > [22m[2mDrop Handling[2m > [22m[2mshould not proceed when drop is invalid
[22m[39m[DEBUG][ProjectTree] Visible elements changed [
  {
    id: [32m'1'[39m,
    name: [32m'Test Element'[39m,
    type: [32m'FOLDER'[39m,
    order: [33m0[39m,
    level: [33m1[39m,
    expandable: [33mfalse[39m,
    version: [33m0[39m,
    metadata: {},
    visible: [33mtrue[39m,
    parentId: [1mnull[22m
  }
]

[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mpublish project[2m > [22m[2mshould open publish plan when onPublishClick is called
[22m[39mProjectComponent init
Loading project testuser/test-project

[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mDrag and Drop[2m > [22m[2mDrop Handling[2m > [22m[2mshould not proceed when drop is invalid
[22m[39m[DEBUG][ProjectTree] Drop event {
  previousIndex: [33m0[39m,
  currentIndex: [33m1[39m,
  isDraggingDown: [33mtrue[39m,
  draggedItem: [32m'Test Element'[39m
}

[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mDrag and Drop[2m > [22m[2mshould handle drag start
[22m[39m[DEBUG][ProjectTree] Visible elements changed [
  {
    id: [32m'1'[39m,
    name: [32m'Test Element'[39m,
    type: [32m'FOLDER'[39m,
    order: [33m0[39m,
    level: [33m1[39m,
    expandable: [33mfalse[39m,
    version: [33m0[39m,
    metadata: {},
    visible: [33mtrue[39m,
    parentId: [1mnull[22m
  }
]

stderr | src/app/components/document-element-editor/document-element-editor.component.spec.ts > DocumentElementEditorComponent > isCursorInLintSuggestion > should return false when editor is not initialized
Error during cleanup of component {
  component: _DocumentElementEditorComponent {
    documentService: {
      setupCollaboration: [Function],
      disconnect: [Function],
      getSyncStatusSignal: [Function],
      getWordCountSignal: [Function]
    },
    projectState: { isLoading: [Function], project: [Function] },
    settingsService: { getSetting: [Function] },
    fileInput: undefined,
    _documentId: 'invalid',
    documentIdSignal: [Function: getter] {
      toString: [Function (anonymous)],
      set: [Function: set],
      update: [Function: update],
      asReadonly: [Function: bound signalAsReadonlyFn],
      Symbol(SIGNAL): [Object]
    },
    zenMode: false,
    tabsDisabled: false,
    showSnapshotPanel: [Function: getter] {
      toString: [Function (anonymous)],
      set: [Function: set],
      update: [Function: update],
      asReadonly: [Function: bound signalAsReadonlyFn],
      Symbol(SIGNAL): [Object]
    },
    editor: undefined,
    toolbar: [ [Array], [Array], [Array], [Array], [Array], [Array] ],
    floatToolbar: [ [Array] ],
    colorPresets: [
      '#000000', '#434343', '#666666',
      '#999999', '#b7b7b7', '#cccccc',
      '#d9d9d9', '#efefef', '#f3f3f3',
      '#ffffff', '#980000', '#ff0000',
      '#ff9900', '#ffff00', '#00ff00',
      '#00ffff', '#4a86e8', '#0000ff',
      '#9900ff', '#ff00ff'
    ],
    idFormatted: false,
    collaborationSetup: false,
    editorKey: 0,
    cdr: ViewRef {
      _lView: [Array],
      _cdRefInjectingView: [Array],
      _appRef: null,
      _attachedToViewContainer: false,
      exhaustive: undefined
    },
    syncState: [Function: computed] {
      toString: [Function (anonymous)],
      Symbol(SIGNAL): [Object]
    },
    wordCount: [Function: computed] {
      toString: [Function (anonymous)],
      Symbol(SIGNAL): [Object]
    },
    __ngContext__: 694
  },
  stacktrace: TypeError: Cannot read properties of undefined (reading 'destroy')
      at _DocumentElementEditorComponent.ngOnDestroy (D:/dev/inkweld/frontend/src/app/components/document-element-editor/document-element-editor.component.ts:254:17)
      at executeOnDestroys (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4558:20)
      at cleanUpView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4436:5)
      at destroyViewTree (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4403:9)
      at destroyLView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4425:3)
      at ViewRef.destroy (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5829:5)
      at ComponentRef.destroy (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:8366:19)
      at ComponentFixture.destroy (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/testing.mjs:284:25)
      at file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/testing.mjs:1502:17
      at Array.forEach (<anonymous>)
}

[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mDrag and Drop[2m > [22m[2mshould handle sorted event
[22m[39m[DEBUG][ProjectTree] Visible elements changed [
  {
    id: [32m'1'[39m,
    name: [32m'Test Element'[39m,
    type: [32m'FOLDER'[39m,
    order: [33m0[39m,
    level: [33m1[39m,
    expandable: [33mfalse[39m,
    version: [33m0[39m,
    metadata: {},
    visible: [33mtrue[39m,
    parentId: [1mnull[22m
  }
]

[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mDrag and Drop[2m > [22m[2mshould handle sorted event
[22m[39m[DEBUG][ProjectTree] Sorted event {
  previousIndex: [33m0[39m,
  currentIndex: [33m1[39m,
  isDraggingDown: [33mtrue[39m,
  draggedItem: [32m'Test Element'[39m
}
[DEBUG][ProjectTree] Valid Levels {
  nodeAbove: [90mundefined[39m,
  nodeBelow: [90mundefined[39m,
  filteredLength: [33m0[39m,
  currentIndex: [33m1[39m
}

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/components/side-nav/side-nav.component.spec.ts [2m([22m[2m16 tests[22m[2m)[22m[33m 1257[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/dialogs/rename-dialog/rename-dialog.component.spec.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 1578[2mms[22m[39m
     [33m[2mâœ“[22m[39m should create [33m 563[2mms[22m[39m
[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mDrag and Drop[2m > [22m[2mshould handle drag move with valid container dimensions
[22m[39m[DEBUG][ProjectTree] Visible elements changed [
  {
    id: [32m'1'[39m,
    name: [32m'Test Element'[39m,
    type: [32m'FOLDER'[39m,
    order: [33m0[39m,
    level: [33m1[39m,
    expandable: [33mfalse[39m,
    version: [33m0[39m,
    metadata: {},
    visible: [33mtrue[39m,
    parentId: [1mnull[22m
  }
]

[90mstdout[2m | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts[2m > [22m[2mEditProjectDialogComponent[2m > [22m[2monSave functionality[2m > [22m[2mshould show error if project slug is missing
[22m[39mdialogData:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}
Project:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}

stderr | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts > EditProjectDialogComponent > onSave functionality > should show error if project slug is missing
Failed to update project: Project slug is required

[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mshould extract project info from URL
[22m[39m[DEBUG][ProjectTree] Visible elements changed [
  {
    id: [32m'1'[39m,
    name: [32m'Test Element'[39m,
    type: [32m'FOLDER'[39m,
    order: [33m0[39m,
    level: [33m1[39m,
    expandable: [33mfalse[39m,
    version: [33m0[39m,
    metadata: {},
    visible: [33mtrue[39m,
    parentId: [1mnull[22m
  }
]

[90mstdout[2m | src/app/dialogs/new-element-dialog/new-element-dialog.component.spec.ts[2m > [22m[2mNewElementDialogComponent[2m > [22m[2mworldbuilding type loading[2m > [22m[2mshould auto-load default templates if library is empty
[22m[39m[NewElementDialog] Loading worldbuilding types for testuser test-project

[90mstdout[2m | src/app/dialogs/new-element-dialog/new-element-dialog.component.spec.ts[2m > [22m[2mNewElementDialogComponent[2m > [22m[2mworldbuilding type loading[2m > [22m[2mshould auto-load default templates if library is empty
[22m[39m[NewElementDialog] Loaded library: [36m<ref *1>[39m YMap {
  _item: [1mnull[22m,
  _map: Map(1) {
    [32m'schemas'[39m => Item {
      id: [36m[ID][39m,
      length: [33m1[39m,
      origin: [1mnull[22m,
      left: [1mnull[22m,
      right: [1mnull[22m,
      rightOrigin: [1mnull[22m,
      parent: [36m[Circular *1][39m,
      parentSub: [32m'schemas'[39m,
      redone: [1mnull[22m,
      content: [36m[ContentType][39m,
      info: [33m2[39m
    }
  },
  _start: [1mnull[22m,
  doc: Doc {
    _observers: Map(2) { [32m'load'[39m => [36m[Set][39m, [32m'sync'[39m => [36m[Set][39m },
    gc: [33mtrue[39m,
    gcFilter: [36m[Function: gcFilter][39m,
    clientID: [33m92221573[39m,
    guid: [32m'11b7a660-ebf3-4f4b-9a51-891c474bbe05'[39m,
    collectionid: [1mnull[22m,
    share: Map(1) { [32m'library'[39m => [36m[Circular *1][39m },
    store: StructStore {
      clients: [36m[Map][39m,
      pendingStructs: [1mnull[22m,
      pendingDs: [1mnull[22m
    },
    _transaction: [1mnull[22m,
    _transactionCleanups: [],
    subdocs: Set(0) {},
    _item: [1mnull[22m,
    shouldLoad: [33mtrue[39m,
    autoLoad: [33mfalse[39m,
    meta: [1mnull[22m,
    isLoaded: [33mfalse[39m,
    isSynced: [33mfalse[39m,
    isDestroyed: [33mfalse[39m,
    whenLoaded: Promise { [36m<pending>[39m },
    whenSynced: Promise { [36m<pending>[39m }
  },
  _length: [33m0[39m,
  _eH: EventHandler { l: [] },
  _dEH: EventHandler { l: [] },
  _searchMarker: [1mnull[22m,
  _prelimContent: [1mnull[22m
}
[NewElementDialog] Schema library empty, auto-loading default templates

[90mstdout[2m | src/app/dialogs/new-element-dialog/new-element-dialog.component.spec.ts[2m > [22m[2mNewElementDialogComponent[2m > [22m[2mworldbuilding type loading[2m > [22m[2mshould auto-load default templates if library is empty
[22m[39m[NewElementDialog] Found schema: {
  type: [32m'CHARACTER'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Default character'[39m
}
[NewElementDialog] Built worldbuilding options: [
  {
    type: [32m'CHARACTER'[39m,
    label: [32m'Character'[39m,
    icon: [32m'person'[39m,
    description: [32m'Default character'[39m,
    category: [32m'worldbuilding'[39m
  }
]
[NewElementDialog] Loaded 1 worldbuilding types from schema library

[90mstdout[2m | src/app/components/document-element-editor/document-element-editor.component.spec.ts[2m > [22m[2mDocumentElementEditorComponent[2m > [22m[2misCursorInLintSuggestion[2m > [22m[2mshould return false when no lint suggestions exist
[22m[39m[DocumentEditor] ngOnInit - documentId: testuser:test-project:doc-1
[DocumentEditor] ngOnInit - creating editor for testuser:test-project:doc-1
[DocumentEditor] ngOnInit - editor created, doc size: [33m0[39m
[DocumentEditor] ngAfterViewChecked - calling setupCollaboration: testuser:test-project:doc-1
[DocumentEditor] ngOnInit - documentId: testuser:test-project:doc-1
[DocumentEditor] ngOnInit - creating editor for testuser:test-project:doc-1
[DocumentEditor] ngOnInit - editor created, doc size: [33m0[39m

[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mshould handle drag move with invalid container dimensions
[22m[39m[DEBUG][ProjectTree] Visible elements changed [
  {
    id: [32m'1'[39m,
    name: [32m'Test Element'[39m,
    type: [32m'FOLDER'[39m,
    order: [33m0[39m,
    level: [33m1[39m,
    expandable: [33mfalse[39m,
    version: [33m0[39m,
    metadata: {},
    visible: [33mtrue[39m,
    parentId: [1mnull[22m
  }
]

[90mstdout[2m | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts[2m > [22m[2mEditProjectDialogComponent[2m > [22m[2monSave functionality[2m > [22m[2mshould call updateProject on save
[22m[39mdialogData:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}
Project:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/dialogs/create-snapshot-dialog/create-snapshot-dialog.component.spec.ts [2m([22m[2m13 tests[22m[2m)[22m[33m 3388[2mms[22m[39m
     [33m[2mâœ“[22m[39m should create [33m 902[2mms[22m[39m
       [33m[2mâœ“[22m[39m should handle undefined word count [33m 371[2mms[22m[39m
[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mshould handle undefined error state
[22m[39m[DEBUG][ProjectTree] Visible elements changed [
  {
    id: [32m'1'[39m,
    name: [32m'Test Element'[39m,
    type: [32m'FOLDER'[39m,
    order: [33m0[39m,
    level: [33m1[39m,
    expandable: [33mfalse[39m,
    version: [33m0[39m,
    metadata: {},
    visible: [33mtrue[39m,
    parentId: [1mnull[22m
  }
]

stderr | src/app/components/document-element-editor/document-element-editor.component.spec.ts > DocumentElementEditorComponent > snapshot panel > should start with snapshot panel hidden
Error during cleanup of component {
  component: _DocumentElementEditorComponent {
    documentService: {
      setupCollaboration: [Function],
      disconnect: [Function],
      getSyncStatusSignal: [Function],
      getWordCountSignal: [Function]
    },
    projectState: { isLoading: [Function], project: [Function] },
    settingsService: { getSetting: [Function] },
    fileInput: undefined,
    _documentId: 'invalid',
    documentIdSignal: [Function: getter] {
      toString: [Function (anonymous)],
      set: [Function: set],
      update: [Function: update],
      asReadonly: [Function: bound signalAsReadonlyFn],
      Symbol(SIGNAL): [Object]
    },
    zenMode: false,
    tabsDisabled: false,
    showSnapshotPanel: [Function: getter] {
      toString: [Function (anonymous)],
      set: [Function: set],
      update: [Function: update],
      asReadonly: [Function: bound signalAsReadonlyFn],
      Symbol(SIGNAL): [Object]
    },
    editor: undefined,
    toolbar: [ [Array], [Array], [Array], [Array], [Array], [Array] ],
    floatToolbar: [ [Array] ],
    colorPresets: [
      '#000000', '#434343', '#666666',
      '#999999', '#b7b7b7', '#cccccc',
      '#d9d9d9', '#efefef', '#f3f3f3',
      '#ffffff', '#980000', '#ff0000',
      '#ff9900', '#ffff00', '#00ff00',
      '#00ffff', '#4a86e8', '#0000ff',
      '#9900ff', '#ff00ff'
    ],
    idFormatted: false,
    collaborationSetup: false,
    editorKey: 0,
    cdr: ViewRef {
      _lView: [Array],
      _cdRefInjectingView: [Array],
      _appRef: null,
      _attachedToViewContainer: false,
      exhaustive: undefined
    },
    syncState: [Function: computed] {
      toString: [Function (anonymous)],
      Symbol(SIGNAL): [Object]
    },
    wordCount: [Function: computed] {
      toString: [Function (anonymous)],
      Symbol(SIGNAL): [Object]
    },
    __ngContext__: 709
  },
  stacktrace: TypeError: Cannot read properties of undefined (reading 'destroy')
      at _DocumentElementEditorComponent.ngOnDestroy (D:/dev/inkweld/frontend/src/app/components/document-element-editor/document-element-editor.component.ts:254:17)
      at executeOnDestroys (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4558:20)
      at cleanUpView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4436:5)
      at destroyViewTree (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4403:9)
      at destroyLView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4425:3)
      at ViewRef.destroy (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5829:5)
      at ComponentRef.destroy (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:8366:19)
      at ComponentFixture.destroy (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/testing.mjs:284:25)
      at file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/testing.mjs:1502:17
      at Array.forEach (<anonymous>)
}

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mshould toggle expanded state of a node
[22m[39m[DEBUG][ProjectTree] Visible elements changed [
  {
    id: [32m'1'[39m,
    name: [32m'Test Element'[39m,
    type: [32m'FOLDER'[39m,
    order: [33m0[39m,
    level: [33m1[39m,
    expandable: [33mfalse[39m,
    version: [33m0[39m,
    metadata: {},
    visible: [33mtrue[39m,
    parentId: [1mnull[22m
  }
]

[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mpublish project[2m > [22m[2mshould open existing publish plan when one exists
[22m[39mProjectComponent init
Loading project testuser/test-project

[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mTouch and Click Toggle Handling[2m > [22m[2mshould handle touch toggle and prevent click event
[22m[39m[DEBUG][ProjectTree] Visible elements changed [
  {
    id: [32m'1'[39m,
    name: [32m'Test Element'[39m,
    type: [32m'FOLDER'[39m,
    order: [33m0[39m,
    level: [33m1[39m,
    expandable: [33mfalse[39m,
    version: [33m0[39m,
    metadata: {},
    visible: [33mtrue[39m,
    parentId: [1mnull[22m
  }
]

stderr | src/app/components/document-element-editor/document-element-editor.component.spec.ts > DocumentElementEditorComponent > snapshot panel > should be able to toggle snapshot panel
Error during cleanup of component {
  component: _DocumentElementEditorComponent {
    documentService: {
      setupCollaboration: [Function],
      disconnect: [Function],
      getSyncStatusSignal: [Function],
      getWordCountSignal: [Function]
    },
    projectState: { isLoading: [Function], project: [Function] },
    settingsService: { getSetting: [Function] },
    fileInput: undefined,
    _documentId: 'invalid',
    documentIdSignal: [Function: getter] {
      toString: [Function (anonymous)],
      set: [Function: set],
      update: [Function: update],
      asReadonly: [Function: bound signalAsReadonlyFn],
      Symbol(SIGNAL): [Object]
    },
    zenMode: false,
    tabsDisabled: false,
    showSnapshotPanel: [Function: getter] {
      toString: [Function (anonymous)],
      set: [Function: set],
      update: [Function: update],
      asReadonly: [Function: bound signalAsReadonlyFn],
      Symbol(SIGNAL): [Object]
    },
    editor: undefined,
    toolbar: [ [Array], [Array], [Array], [Array], [Array], [Array] ],
    floatToolbar: [ [Array] ],
    colorPresets: [
      '#000000', '#434343', '#666666',
      '#999999', '#b7b7b7', '#cccccc',
      '#d9d9d9', '#efefef', '#f3f3f3',
      '#ffffff', '#980000', '#ff0000',
      '#ff9900', '#ffff00', '#00ff00',
      '#00ffff', '#4a86e8', '#0000ff',
      '#9900ff', '#ff00ff'
    ],
    idFormatted: false,
    collaborationSetup: false,
    editorKey: 0,
    cdr: ViewRef {
      _lView: [Array],
      _cdRefInjectingView: [Array],
      _appRef: null,
      _attachedToViewContainer: false,
      exhaustive: undefined
    },
    syncState: [Function: computed] {
      toString: [Function (anonymous)],
      Symbol(SIGNAL): [Object]
    },
    wordCount: [Function: computed] {
      toString: [Function (anonymous)],
      Symbol(SIGNAL): [Object]
    },
    __ngContext__: 711
  },
  stacktrace: TypeError: Cannot read properties of undefined (reading 'destroy')
      at _DocumentElementEditorComponent.ngOnDestroy (D:/dev/inkweld/frontend/src/app/components/document-element-editor/document-element-editor.component.ts:254:17)
      at executeOnDestroys (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4558:20)
      at cleanUpView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4436:5)
      at destroyViewTree (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4403:9)
      at destroyLView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:4425:3)
      at ViewRef.destroy (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5829:5)
      at ComponentRef.destroy (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:8366:19)
      at ComponentFixture.destroy (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/testing.mjs:284:25)
      at file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/testing.mjs:1502:17
      at Array.forEach (<anonymous>)
}

[90mstdout[2m | src/app/components/document-element-editor/document-element-editor.component.spec.ts
[22m[39m[DocumentEditor] setupCollaboration complete, editor doc size: 0
[DocumentEditor] setupCollaboration complete, editor doc size: 0
[DocumentEditor] setupCollaboration complete, editor doc size: 0
[DocumentEditor] setupCollaboration complete, editor doc size: 0
[DocumentEditor] setupCollaboration complete, editor doc size: 0
[DocumentEditor] setupCollaboration complete, editor doc size: 0
[DocumentEditor] setupCollaboration complete, editor doc size: 0

[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mTouch and Click Toggle Handling[2m > [22m[2mshould handle click toggle when no recent touch event
[22m[39m[DEBUG][ProjectTree] Visible elements changed [
  {
    id: [32m'1'[39m,
    name: [32m'Test Element'[39m,
    type: [32m'FOLDER'[39m,
    order: [33m0[39m,
    level: [33m1[39m,
    expandable: [33mfalse[39m,
    version: [33m0[39m,
    metadata: {},
    visible: [33mtrue[39m,
    parentId: [1mnull[22m
  }
]

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/dialogs/user-settings-dialog/tabs/general-settings/general-settings.component.spec.ts [2m([22m[2m5 tests[22m[2m)[22m[33m 960[2mms[22m[39m
[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mTouch and Click Toggle Handling[2m > [22m[2mshould clear touch flag after timeout
[22m[39m[DEBUG][ProjectTree] Visible elements changed [
  {
    id: [32m'1'[39m,
    name: [32m'Test Element'[39m,
    type: [32m'FOLDER'[39m,
    order: [33m0[39m,
    level: [33m1[39m,
    expandable: [33mfalse[39m,
    version: [33m0[39m,
    metadata: {},
    visible: [33mtrue[39m,
    parentId: [1mnull[22m
  }
]

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/pages/user-profile/user-profile.component.spec.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 674[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/components/document-element-editor/document-element-editor.component.spec.ts [2m([22m[2m15 tests[22m[2m)[22m[33m 1798[2mms[22m[39m
[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mTouch and Click Toggle Handling[2m > [22m[2mshould clear existing timeout when new touch event occurs
[22m[39m[DEBUG][ProjectTree] Visible elements changed [
  {
    id: [32m'1'[39m,
    name: [32m'Test Element'[39m,
    type: [32m'FOLDER'[39m,
    order: [33m0[39m,
    level: [33m1[39m,
    expandable: [33mfalse[39m,
    version: [33m0[39m,
    metadata: {},
    visible: [33mtrue[39m,
    parentId: [1mnull[22m
  }
]

[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mTouch and Click Toggle Handling[2m > [22m[2mshould handle touch events for different nodes independently
[22m[39m[DEBUG][ProjectTree] Visible elements changed [
  {
    id: [32m'1'[39m,
    name: [32m'Test Element'[39m,
    type: [32m'FOLDER'[39m,
    order: [33m0[39m,
    level: [33m1[39m,
    expandable: [33mfalse[39m,
    version: [33m0[39m,
    metadata: {},
    visible: [33mtrue[39m,
    parentId: [1mnull[22m
  }
]

[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mshould edit project
[22m[39m[DEBUG][ProjectTree] Visible elements changed [
  {
    id: [32m'1'[39m,
    name: [32m'Test Element'[39m,
    type: [32m'FOLDER'[39m,
    order: [33m0[39m,
    level: [33m1[39m,
    expandable: [33mfalse[39m,
    version: [33m0[39m,
    metadata: {},
    visible: [33mtrue[39m,
    parentId: [1mnull[22m
  }
]

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mRename Handling[2m > [22m[2mshould handle successful rename
[22m[39m[DEBUG][ProjectTree] Visible elements changed [
  {
    id: [32m'1'[39m,
    name: [32m'Test Element'[39m,
    type: [32m'FOLDER'[39m,
    order: [33m0[39m,
    level: [33m1[39m,
    expandable: [33mfalse[39m,
    version: [33m0[39m,
    metadata: {},
    visible: [33mtrue[39m,
    parentId: [1mnull[22m
  }
]

[90mstdout[2m | src/app/dialogs/new-element-dialog/new-element-dialog.component.spec.ts[2m > [22m[2mNewElementDialogComponent[2m > [22m[2mworldbuilding type loading[2m > [22m[2mshould handle errors when loading schemas
[22m[39m[NewElementDialog] Loading worldbuilding types for testuser test-project

[90mstdout[2m | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts[2m > [22m[2mEditProjectDialogComponent[2m > [22m[2monSave functionality[2m > [22m[2mshould call uploadProjectCover if a new cover image was selected
[22m[39mdialogData:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}
Project:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}

[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mRename Handling[2m > [22m[2mshould handle cancelled rename
[22m[39m[DEBUG][ProjectTree] Visible elements changed [
  {
    id: [32m'1'[39m,
    name: [32m'Test Element'[39m,
    type: [32m'FOLDER'[39m,
    order: [33m0[39m,
    level: [33m1[39m,
    expandable: [33mfalse[39m,
    version: [33m0[39m,
    metadata: {},
    visible: [33mtrue[39m,
    parentId: [1mnull[22m
  }
]

[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2medit project dialog[2m > [22m[2mshould open edit project dialog
[22m[39mProjectComponent init
Loading project testuser/test-project

[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mRename Handling[2m > [22m[2mshould use correct title for folder nodes
[22m[39m[DEBUG][ProjectTree] Visible elements changed [
  {
    id: [32m'1'[39m,
    name: [32m'Test Element'[39m,
    type: [32m'FOLDER'[39m,
    order: [33m0[39m,
    level: [33m1[39m,
    expandable: [33mfalse[39m,
    version: [33m0[39m,
    metadata: {},
    visible: [33mtrue[39m,
    parentId: [1mnull[22m
  }
]

[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mContext Menu[2m > [22m[2mBasic Menu Operations[2m > [22m[2mshould open and close context menu
[22m[39m[DEBUG][ProjectTree] Visible elements changed [
  {
    id: [32m'1'[39m,
    name: [32m'Test Element'[39m,
    type: [32m'FOLDER'[39m,
    order: [33m0[39m,
    level: [33m1[39m,
    expandable: [33mfalse[39m,
    version: [33m0[39m,
    metadata: {},
    visible: [33mtrue[39m,
    parentId: [1mnull[22m
  }
]

[90mstdout[2m | src/app/components/project-tree/project-tree.component.spec.ts[2m > [22m[2mProjectTreeComponent[2m > [22m[2mContext Menu[2m > [22m[2mBasic Menu Operations[2m > [22m[2mshould open document through context menu
[22m[39m[DEBUG][ProjectTree] Visible elements changed [
  {
    id: [32m'1'[39m,
    name: [32m'Test Element'[39m,
    type: [32m'FOLDER'[39m,
    order: [33m0[39m,
    level: [33m1[39m,
    expandable: [33mfalse[39m,
    version: [33m0[39m,
    metadata: {},
    visible: [33mtrue[39m,
    parentId: [1mnull[22m
  }
]

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mzen mode[2m > [22m[2mshould start with zen mode disabled
[22m[39mProjectComponent init
Loading project testuser/test-project

[90mstdout[2m | src/app/dialogs/new-element-dialog/new-element-dialog.component.spec.ts[2m > [22m[2mNewElementDialogComponent[2m > [22m[2mworldbuilding type loading[2m > [22m[2mshould filter worldbuilding options by search
[22m[39m[NewElementDialog] Loading worldbuilding types for testuser test-project

[90mstdout[2m | src/app/dialogs/new-element-dialog/new-element-dialog.component.spec.ts[2m > [22m[2mNewElementDialogComponent[2m > [22m[2mworldbuilding type loading[2m > [22m[2mshould filter worldbuilding options by search
[22m[39m[NewElementDialog] Loaded library: [36m<ref *1>[39m YMap {
  _item: [1mnull[22m,
  _map: Map(1) {
    [32m'schemas'[39m => Item {
      id: [36m[ID][39m,
      length: [33m1[39m,
      origin: [1mnull[22m,
      left: [1mnull[22m,
      right: [1mnull[22m,
      rightOrigin: [1mnull[22m,
      parent: [36m[Circular *1][39m,
      parentSub: [32m'schemas'[39m,
      redone: [1mnull[22m,
      content: [36m[ContentType][39m,
      info: [33m2[39m
    }
  },
  _start: [1mnull[22m,
  doc: Doc {
    _observers: Map(2) { [32m'load'[39m => [36m[Set][39m, [32m'sync'[39m => [36m[Set][39m },
    gc: [33mtrue[39m,
    gcFilter: [36m[Function: gcFilter][39m,
    clientID: [33m3195656870[39m,
    guid: [32m'3ec1f3e3-b8fd-4f62-8492-cb84da1151cd'[39m,
    collectionid: [1mnull[22m,
    share: Map(1) { [32m'library'[39m => [36m[Circular *1][39m },
    store: StructStore {
      clients: [36m[Map][39m,
      pendingStructs: [1mnull[22m,
      pendingDs: [1mnull[22m
    },
    _transaction: [1mnull[22m,
    _transactionCleanups: [],
    subdocs: Set(0) {},
    _item: [1mnull[22m,
    shouldLoad: [33mtrue[39m,
    autoLoad: [33mfalse[39m,
    meta: [1mnull[22m,
    isLoaded: [33mfalse[39m,
    isSynced: [33mfalse[39m,
    isDestroyed: [33mfalse[39m,
    whenLoaded: Promise { [36m<pending>[39m },
    whenSynced: Promise { [36m<pending>[39m }
  },
  _length: [33m0[39m,
  _eH: EventHandler { l: [] },
  _dEH: EventHandler { l: [] },
  _searchMarker: [1mnull[22m,
  _prelimContent: [1mnull[22m
}
[NewElementDialog] Found schemas map
[NewElementDialog] Found schema: {
  type: [32m'CHARACTER'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'A character template'[39m
}
[NewElementDialog] Found schema: {
  type: [32m'LOCATION'[39m,
  name: [32m'Location'[39m,
  icon: [32m'place'[39m,
  description: [32m'A location template'[39m
}
[NewElementDialog] Built worldbuilding options: [
  {
    type: [32m'CHARACTER'[39m,
    label: [32m'Character'[39m,
    icon: [32m'person'[39m,
    description: [32m'A character template'[39m,
    category: [32m'worldbuilding'[39m
  },
  {
    type: [32m'LOCATION'[39m,
    label: [32m'Location'[39m,
    icon: [32m'place'[39m,
    description: [32m'A location template'[39m,
    category: [32m'worldbuilding'[39m
  }
]
[NewElementDialog] Loaded 2 worldbuilding types from schema library

[90mstdout[2m | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts[2m > [22m[2mEditProjectDialogComponent[2m > [22m[2monSave functionality[2m > [22m[2mshould NOT call uploadProjectCover if no new cover image was selected
[22m[39mdialogData:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}
Project:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/components/project-tree/project-tree.component.spec.ts [2m([22m[2m25 tests[22m[2m)[22m[33m 1370[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/pages/register/register.component.spec.ts [2m([22m[2m25 tests[22m[2m)[22m[33m 8422[2mms[22m[39m
     [33m[2mâœ“[22m[39m should create [33m 888[2mms[22m[39m
     [33m[2mâœ“[22m[39m should set isMobile based on window width [33m 377[2mms[22m[39m
       [33m[2mâœ“[22m[39m should validate form correctly [33m 319[2mms[22m[39m
       [33m[2mâœ“[22m[39m should detect password mismatch [33m 303[2mms[22m[39m
       [33m[2mâœ“[22m[39m should check username availability when username is valid [33m 365[2mms[22m[39m
       [33m[2mâœ“[22m[39m should not check availability for username shorter than 3 characters [33m 396[2mms[22m[39m
       [33m[2mâœ“[22m[39m should initialize password requirements as not met [33m 332[2mms[22m[39m
       [33m[2mâœ“[22m[39m should validate lowercase requirement [33m 399[2mms[22m[39m
       [33m[2mâœ“[22m[39m should handle password with multiple missing requirements [33m 356[2mms[22m[39m
       [33m[2mâœ“[22m[39m should show error for password mismatch [33m 445[2mms[22m[39m
       [33m[2mâœ“[22m[39m should successfully register user [33m 441[2mms[22m[39m
       [33m[2mâœ“[22m[39m should handle registration error [33m 463[2mms[22m[39m
       [33m[2mâœ“[22m[39m should reset isRegistering flag after registration attempt [33m 373[2mms[22m[39m
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/components/folder-element-editor/folder-element-editor.component.spec.ts [2m([22m[2m11 tests[22m[2m)[22m[33m 2172[2mms[22m[39m
     [33m[2mâœ“[22m[39m should create [33m 357[2mms[22m[39m
     [33m[2mâœ“[22m[39m should show empty state when there are no child elements [33m 354[2mms[22m[39m
stderr | src/app/components/user-menu/user-menu.component.spec.ts > UserMenuComponent > onLogout() > should handle logout error
Logout failed Error: Failed
    at D:/dev/inkweld/frontend/src/app/components/user-menu/user-menu.component.spec.ts:83:48
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:26
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1237:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1203:10)
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:37
    at Traces.$ (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/test.DqQZzsWf.js:234:21)
    at runTest (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:12)

[90mstdout[2m | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts[2m > [22m[2mEditProjectDialogComponent[2m > [22m[2monSave functionality[2m > [22m[2mshould handle error during cover upload but still close dialog
[22m[39mdialogData:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}
Project:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}

stderr | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts > EditProjectDialogComponent > onSave functionality > should handle error during cover upload but still close dialog
Failed to upload cover image: Upload failed

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/dialogs/file-upload/file-upload.component.spec.ts [2m([22m[2m13 tests[22m[2m)[22m[33m 895[2mms[22m[39m
[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mzen mode[2m > [22m[2mshould not enable zen mode when on home tab
[22m[39mProjectComponent init
Loading project testuser/test-project

stderr | src/app/dialogs/edit-avatar-dialog/edit-avatar-dialog.component.spec.ts > EditAvatarDialogComponent > submit > should show alert and not close dialog on error
Failed to upload avatar: Error: err
    at D:/dev/inkweld/frontend/src/app/dialogs/edit-avatar-dialog/edit-avatar-dialog.component.spec.ts:161:26
    at Observable.init [as _subscribe] (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\observable\throwError.js:8:64)
    at Observable._trySubscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:41:25)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:35:31
    at Object.errorContext (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\util\errorContext.js:22:9)
    at Observable.subscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:26:24)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\firstValueFrom.js:24:16
    at new Promise (<anonymous>)
    at firstValueFrom (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\firstValueFrom.js:8:12)
    at _EditAvatarDialogComponent.submit (D:/dev/inkweld/frontend/src/app/dialogs/edit-avatar-dialog/edit-avatar-dialog.component.ts:110:15)

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/dialogs/new-element-dialog/new-element-dialog.component.spec.ts [2m([22m[2m25 tests[22m[2m)[22m[33m 7665[2mms[22m[39m
     [33m[2mâœ“[22m[39m should create [33m 939[2mms[22m[39m
       [33m[2mâœ“[22m[39m should start at step 1 [33m 575[2mms[22m[39m
       [33m[2mâœ“[22m[39m should not advance to step 2 without selecting a type [33m 310[2mms[22m[39m
       [33m[2mâœ“[22m[39m should not go back from step 1 [33m 329[2mms[22m[39m
       [33m[2mâœ“[22m[39m should be case insensitive [33m 337[2mms[22m[39m
       [33m[2mâœ“[22m[39m should separate document options [33m 339[2mms[22m[39m
       [33m[2mâœ“[22m[39m should start with no worldbuilding options [33m 331[2mms[22m[39m
       [33m[2mâœ“[22m[39m should handle errors when loading schemas [33m 498[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/dialogs/edit-avatar-dialog/edit-avatar-dialog.component.spec.ts [2m([22m[2m11 tests[22m[2m)[22m[33m 802[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/dialogs/generate-cover-dialog/generate-cover-dialog.component.spec.ts [2m([22m[2m14 tests[22m[2m)[22m[33m 1186[2mms[22m[39m
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mzen mode[2m > [22m[2mshould return false for canEnableZenMode when on home tab
[22m[39mProjectComponent init
Loading project testuser/test-project

[90mstdout[2m | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts[2m > [22m[2mEditProjectDialogComponent[2m > [22m[2monSave functionality[2m > [22m[2mshould handle error during project update
[22m[39mdialogData:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}
Project:  {
  id: [32m'123'[39m,
  title: [32m'Test Project'[39m,
  description: [32m'Test Description'[39m,
  slug: [32m'test-project'[39m,
  createdDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  updatedDate: [32m'2025-02-12T15:30:00.000Z'[39m,
  username: [32m'testuser'[39m
}

stderr | src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts > EditProjectDialogComponent > onSave functionality > should handle error during project update
Failed to update project: Update failed

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/dialogs/restore-snapshot-dialog/restore-snapshot-dialog.component.spec.ts [2m([22m[2m9 tests[22m[2m)[22m[33m 1262[2mms[22m[39m
     [33m[2mâœ“[22m[39m should create [33m 352[2mms[22m[39m
       [33m[2mâœ“[22m[39m should handle undefined current word count [33m 312[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/components/lint/lint-overlay.component.spec.ts [2m([22m[2m15 tests[22m[2m)[22m[33m 815[2mms[22m[39m
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mzen mode[2m > [22m[2mshould return false for canEnableZenMode when no tabs are open
[22m[39mProjectComponent init
Loading project testuser/test-project

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/dialogs/edit-project-dialog/edit-project-dialog.component.spec.ts [2m([22m[2m27 tests[22m[2m)[22m[33m 8054[2mms[22m[39m
     [33m[2mâœ“[22m[39m should create [33m 1179[2mms[22m[39m
     [33m[2mâœ“[22m[39m should initialize form with project data [33m 396[2mms[22m[39m
       [33m[2mâœ“[22m[39m should close the dialog without returning data [33m 323[2mms[22m[39m
       [33m[2mâœ“[22m[39m should set coverImageUrl when loadCoverImage completes successfully [33m 582[2mms[22m[39m
       [33m[2mâœ“[22m[39m should handle "Cover image not found" error gracefully [33m 407[2mms[22m[39m
       [33m[2mâœ“[22m[39m should reset cropper state correctly [33m 310[2mms[22m[39m
       [33m[2mâœ“[22m[39m should not save if form is invalid [33m 398[2mms[22m[39m
       [33m[2mâœ“[22m[39m should call uploadProjectCover if a new cover image was selected [33m 366[2mms[22m[39m
stderr | src/app/pages/project/tabs/project-files/project-files-tab.component.spec.ts > ProjectFilesTabComponent > should handle error when loading files
Error loading files: Error: Network error
    at D:/dev/inkweld/frontend/src/app/pages/project/tabs/project-files/project-files-tab.component.spec.ts:124:24
    at Observable.init [as _subscribe] (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\observable\throwError.js:8:64)
    at Observable._trySubscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:41:25)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:35:31
    at Object.errorContext (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\util\errorContext.js:22:9)
    at Observable.subscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:26:24)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\firstValueFrom.js:24:16
    at new Promise (<anonymous>)
    at firstValueFrom (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\firstValueFrom.js:8:12)
    at _ProjectFilesTabComponent.loadFiles (D:/dev/inkweld/frontend/src/app/pages/project/tabs/project-files/project-files-tab.component.ts:81:27)

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/dialogs/file-upload/file-upload.spec.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 485[2mms[22m[39m
stderr | src/app/app.component.spec.ts > AppComponent > should create the app
Failed to initialize app: TypeError: Cannot read properties of undefined (reading 'startsWith')
    at _AppComponent.initializeApp (D:/dev/inkweld/frontend/src/app/app.component.ts:85:20)
    at _AppComponent.ngOnInit (D:/dev/inkweld/frontend/src/app/app.component.ts:45:15)
    at callHookInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:555:10)
    at callHook (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:570:7)
    at callHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:544:9)
    at executeInitAndCheckHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:513:5)
    at refreshView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5479:11)
    at detectChangesInView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5607:5)
    at detectChangesInViewWhileDirty (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5416:5)
    at detectChangesInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5405:5)

stderr | src/app/services/project/project.service.spec.ts > ProjectService > getProjectByUsernameAndSlug > handles network errors correctly
Project loading error: ProjectServiceError: Server unavailable
    at _ProjectService.formatError (D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:688:16)
    at D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:213:39
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\catchError.js:13:51
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\retry.js:60:36
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at Observable.init [as _subscribe] (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\observable\throwError.js:8:58)
    at Observable._trySubscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:41:25) {
  code: 'NETWORK_ERROR',
  canUseCache: true
}

stderr | src/app/services/project/project.service.spec.ts > ProjectService > getProjectByUsernameAndSlug > handles not found errors correctly
Project loading error: ProjectServiceError: Project not found
    at _ProjectService.formatError (D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:702:16)
    at D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:213:39
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\catchError.js:13:51
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\retry.js:60:36
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at Observable.init [as _subscribe] (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\observable\throwError.js:8:58)
    at Observable._trySubscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:41:25) {
  code: 'PROJECT_NOT_FOUND',
  canUseCache: false
}

stderr | src/app/app.component.spec.ts > AppComponent > should initialize theme on init
Failed to initialize app: TypeError: Cannot read properties of undefined (reading 'startsWith')
    at _AppComponent.initializeApp (D:/dev/inkweld/frontend/src/app/app.component.ts:85:20)
    at _AppComponent.ngOnInit (D:/dev/inkweld/frontend/src/app/app.component.ts:45:15)
    at callHookInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:555:10)
    at callHook (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:570:7)
    at callHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:544:9)
    at executeInitAndCheckHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:513:5)
    at refreshView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5479:11)
    at detectChangesInView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5607:5)
    at detectChangesInViewWhileDirty (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5416:5)
    at detectChangesInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5405:5)

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/components/user-menu/user-menu.component.spec.ts [2m([22m[2m6 tests[22m[2m)[22m[33m 926[2mms[22m[39m
     [33m[2mâœ“[22m[39m should create [33m 307[2mms[22m[39m
stderr | src/app/app.component.spec.ts > AppComponent > should initialize theme on init
Failed to initialize app: TypeError: Cannot read properties of undefined (reading 'startsWith')
    at _AppComponent.initializeApp (D:/dev/inkweld/frontend/src/app/app.component.ts:85:20)
    at _AppComponent.ngOnInit (D:/dev/inkweld/frontend/src/app/app.component.ts:45:15)
    at D:/dev/inkweld/frontend/src/app/app.component.spec.ts:112:15
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:26
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1237:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1203:10)
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:37
    at Traces.$ (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
stderr | src/app/services/project/project-import-export.service.spec.ts > ProjectImportExportService > exportProject > should handle error when createProjectArchive fails in exportProject
Export error: Error: Test createProjectArchive error
    at _ProjectImportExportService.<anonymous> (D:/dev/inkweld/frontend/src/app/services/project/project-import-export.service.spec.ts:100:15)
    at _ProjectImportExportService.Mock [as createProjectArchive] (file:///D:/dev/inkweld/frontend/node_modules/@vitest/spy/dist/index.js:280:34)
    at _ProjectImportExportService.exportProject (D:/dev/inkweld/frontend/src/app/services/project/project-import-export.service.ts:51:34)
    at D:/dev/inkweld/frontend/src/app/services/project/project-import-export.service.spec.ts:102:28
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:26
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1237:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1203:10)
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:37

stderr | src/app/app.component.spec.ts > AppComponent > should have a router outlet
Failed to initialize app: TypeError: Cannot read properties of undefined (reading 'startsWith')
    at _AppComponent.initializeApp (D:/dev/inkweld/frontend/src/app/app.component.ts:85:20)
    at _AppComponent.ngOnInit (D:/dev/inkweld/frontend/src/app/app.component.ts:45:15)
    at callHookInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:555:10)
    at callHook (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:570:7)
    at callHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:544:9)
    at executeInitAndCheckHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:513:5)
    at refreshView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5479:11)
    at detectChangesInView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5607:5)
    at detectChangesInViewWhileDirty (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5416:5)
    at detectChangesInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5405:5)

stderr | src/app/services/project/project-import-export.service.spec.ts > ProjectImportExportService > exportProject > should handle error if triggerDownload fails in exportProject
Export error: Error: Download error
    at _ProjectImportExportService.<anonymous> (D:/dev/inkweld/frontend/src/app/services/project/project-import-export.service.spec.ts:115:24)
    at _ProjectImportExportService.Mock [as triggerDownload] (file:///D:/dev/inkweld/frontend/node_modules/@vitest/spy/dist/index.js:280:34)
    at _ProjectImportExportService.exportProject (D:/dev/inkweld/frontend/src/app/services/project/project-import-export.service.ts:72:18)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:/dev/inkweld/frontend/src/app/services/project/project-import-export.service.spec.ts:117:7
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:20

stderr | src/app/app.component.spec.ts > AppComponent > Authentication Error Bar > should not show error bar when no session expired error
Failed to initialize app: TypeError: Cannot read properties of undefined (reading 'startsWith')
    at _AppComponent.initializeApp (D:/dev/inkweld/frontend/src/app/app.component.ts:85:20)
    at _AppComponent.ngOnInit (D:/dev/inkweld/frontend/src/app/app.component.ts:45:15)
    at callHookInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:555:10)
    at callHook (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:570:7)
    at callHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:544:9)
    at executeInitAndCheckHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:513:5)
    at refreshView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5479:11)
    at detectChangesInView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5607:5)
    at detectChangesInViewWhileDirty (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5416:5)
    at detectChangesInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5405:5)

stderr | src/app/services/project/project.service.spec.ts > ProjectService > loadAllProjects > handles network errors gracefully when cache is available
Network/server error, using cached projects: 0 Unknown Error

[90mstdout[2m | src/app/services/project/project.service.spec.ts[2m > [22m[2mProjectService[2m > [22m[2mloadAllProjects[2m > [22m[2mhandles network errors gracefully when cache is available
[22m[39mUsing cached projects due to network/server error

stderr | src/app/services/project/project.service.spec.ts > ProjectService > loadAllProjects > handles server unavailable errors gracefully when cache is available
Network/server error, using cached projects: 503 Unknown Error

[90mstdout[2m | src/app/services/project/project.service.spec.ts[2m > [22m[2mProjectService[2m > [22m[2mloadAllProjects[2m > [22m[2mhandles server unavailable errors gracefully when cache is available
[22m[39mUsing cached projects due to network/server error

stderr | src/app/app.component.spec.ts > AppComponent > Authentication Error Bar > should show error bar when session expired and not in offline mode
Failed to initialize app: TypeError: Cannot read properties of undefined (reading 'startsWith')
    at _AppComponent.initializeApp (D:/dev/inkweld/frontend/src/app/app.component.ts:85:20)
    at _AppComponent.ngOnInit (D:/dev/inkweld/frontend/src/app/app.component.ts:45:15)
    at callHookInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:555:10)
    at callHook (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:570:7)
    at callHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:544:9)
    at executeInitAndCheckHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:513:5)
    at refreshView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5479:11)
    at detectChangesInView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5607:5)
    at detectChangesInViewWhileDirty (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5416:5)
    at detectChangesInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5405:5)

stderr | src/app/services/project/project.service.spec.ts > ProjectService > loadAllProjects > does not use cache for non-recoverable errors like 500
Projects loading error: ProjectServiceError: An unexpected error occurred
    at _ProjectService.formatError (D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:721:12)
    at D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:142:41
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\catchError.js:13:51
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\retry.js:60:36
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at Observable.init [as _subscribe] (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\observable\throwError.js:8:58)
    at Observable._trySubscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:41:25) {
  code: 'SERVER_ERROR',
  canUseCache: false
}

[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mzen mode[2m > [22m[2mshould return true for canEnableZenMode with document tab selected
[22m[39mProjectComponent init
Loading project testuser/test-project

stderr | src/app/services/project/project.service.spec.ts > ProjectService > loadAllProjects > handles API errors when no cache is available
Projects loading error: ProjectServiceError: Server unavailable
    at _ProjectService.formatError (D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:688:16)
    at D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:142:41
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\catchError.js:13:51
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\retry.js:60:36
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at Observable.init [as _subscribe] (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\observable\throwError.js:8:58)
    at Observable._trySubscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:41:25) {
  code: 'NETWORK_ERROR',
  canUseCache: true
}

[90mstdout[2m | src/app/components/project-cover/project-cover.component.spec.ts[2m > [22m[2mProjectCoverComponent[2m > [22m[2mcover loading - cache miss (online mode)[2m > [22m[2mshould handle server 404 gracefully
[22m[39m[ProjectCover] Cover not found on server for testuser/test-project

stderr | src/app/services/project/project.service.spec.ts > ProjectService > createProject > handles API errors correctly
Project creation error: ProjectServiceError: An unexpected error occurred
    at _ProjectService.formatError (D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:721:12)
    at D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:299:39
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\catchError.js:13:51
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\retry.js:60:36
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at Observable.init [as _subscribe] (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\observable\throwError.js:8:58)
    at Observable._trySubscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:41:25) {
  code: 'SERVER_ERROR',
  canUseCache: false
}

stderr | src/app/services/project/project-import-export.service.spec.ts > ProjectImportExportService > exportProjectZip > should handle error when createProjectArchive fails in exportProjectZip
Export error: Error: Test createProjectArchive error
    at _ProjectImportExportService.<anonymous> (D:/dev/inkweld/frontend/src/app/services/project/project-import-export.service.spec.ts:147:15)
    at _ProjectImportExportService.Mock [as createProjectArchive] (file:///D:/dev/inkweld/frontend/node_modules/@vitest/spy/dist/index.js:280:34)
    at _ProjectImportExportService.exportProjectZip (D:/dev/inkweld/frontend/src/app/services/project/project-import-export.service.ts:101:34)
    at D:/dev/inkweld/frontend/src/app/services/project/project-import-export.service.spec.ts:149:28
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:26
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1237:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1203:10)
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:37

stderr | src/app/services/project/project.service.spec.ts > ProjectService > createProject > handles network errors correctly
Project creation error: ProjectServiceError: Server unavailable
    at _ProjectService.formatError (D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:688:16)
    at D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:299:39
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\catchError.js:13:51
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\retry.js:60:36
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at Observable.init [as _subscribe] (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\observable\throwError.js:8:58)
    at Observable._trySubscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:41:25) {
  code: 'NETWORK_ERROR',
  canUseCache: true
}

stderr | src/app/services/project/project.service.spec.ts > ProjectService > updateProject > handles API errors correctly
Project update error: ProjectServiceError: Project not found
    at _ProjectService.formatError (D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:702:16)
    at D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:341:39
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\catchError.js:13:51
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\retry.js:60:36
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at Observable.init [as _subscribe] (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\observable\throwError.js:8:58)
    at Observable._trySubscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:41:25) {
  code: 'PROJECT_NOT_FOUND',
  canUseCache: false
}

stderr | src/app/services/project/project.service.spec.ts > ProjectService > updateProject > handles network errors correctly
Project update error: ProjectServiceError: Server unavailable
    at _ProjectService.formatError (D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:688:16)
    at D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:341:39
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\catchError.js:13:51
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\retry.js:60:36
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at Observable.init [as _subscribe] (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\observable\throwError.js:8:58)
    at Observable._trySubscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:41:25) {
  code: 'NETWORK_ERROR',
  canUseCache: true
}

stderr | src/app/services/project/project.service.spec.ts > ProjectService > updateProject > handles unauthorized errors correctly
Project update error: ProjectServiceError: Session expired
    at _ProjectService.formatError (D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:695:16)
    at D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:341:39
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\catchError.js:13:51
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\retry.js:60:36
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at Observable.init [as _subscribe] (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\observable\throwError.js:8:58)
    at Observable._trySubscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:41:25) {
  code: 'SESSION_EXPIRED',
  canUseCache: false
}

stderr | src/app/app.component.spec.ts > AppComponent > Authentication Error Bar > should not show error bar when session expired but user was never initialized
Failed to initialize app: TypeError: Cannot read properties of undefined (reading 'startsWith')
    at _AppComponent.initializeApp (D:/dev/inkweld/frontend/src/app/app.component.ts:85:20)
    at _AppComponent.ngOnInit (D:/dev/inkweld/frontend/src/app/app.component.ts:45:15)
    at callHookInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:555:10)
    at callHook (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:570:7)
    at callHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:544:9)
    at executeInitAndCheckHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:513:5)
    at refreshView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5479:11)
    at detectChangesInView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5607:5)
    at detectChangesInViewWhileDirty (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5416:5)
    at detectChangesInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5405:5)

stderr | src/app/services/project/project.service.spec.ts > ProjectService > deleteProject > handles API errors correctly
Project deletion error: ProjectServiceError: Project not found
    at _ProjectService.formatError (D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:702:16)
    at D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:380:39
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\catchError.js:13:51
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\retry.js:60:36
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at Observable.init [as _subscribe] (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\observable\throwError.js:8:58)
    at Observable._trySubscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:41:25) {
  code: 'PROJECT_NOT_FOUND',
  canUseCache: false
}

stderr | src/app/services/project/project.service.spec.ts > ProjectService > deleteProject > handles network errors correctly
Project deletion error: ProjectServiceError: Server unavailable
    at _ProjectService.formatError (D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:688:16)
    at D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:380:39
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\catchError.js:13:51
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\retry.js:60:36
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at Observable.init [as _subscribe] (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\observable\throwError.js:8:58)
    at Observable._trySubscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:41:25) {
  code: 'NETWORK_ERROR',
  canUseCache: true
}

stderr | src/app/services/project/project.service.spec.ts > ProjectService > deleteProject > handles unauthorized errors correctly
Project deletion error: ProjectServiceError: Session expired
    at _ProjectService.formatError (D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:695:16)
    at D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:380:39
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\catchError.js:13:51
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\retry.js:60:36
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at Observable.init [as _subscribe] (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\observable\throwError.js:8:58)
    at Observable._trySubscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:41:25) {
  code: 'SESSION_EXPIRED',
  canUseCache: false
}

stderr | src/app/app.component.spec.ts > AppComponent > Authentication Error Bar > should show error bar when user had real session then got session expired
Failed to initialize app: TypeError: Cannot read properties of undefined (reading 'startsWith')
    at _AppComponent.initializeApp (D:/dev/inkweld/frontend/src/app/app.component.ts:85:20)
    at _AppComponent.ngOnInit (D:/dev/inkweld/frontend/src/app/app.component.ts:45:15)
    at callHookInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:555:10)
    at callHook (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:570:7)
    at callHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:544:9)
    at executeInitAndCheckHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:513:5)
    at refreshView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5479:11)
    at detectChangesInView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5607:5)
    at detectChangesInViewWhileDirty (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5416:5)
    at detectChangesInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5405:5)

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/pages/approval-pending/approval-pending.component.spec.ts [2m([22m[2m12 tests[22m[2m)[22m[33m 1266[2mms[22m[39m
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
stderr | src/app/services/project/project.service.spec.ts > ProjectService > getProjectCover > handles API errors correctly
Project cover image not found: ProjectServiceError: Cover image not found
    at _ProjectService.getProjectCover (D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:466:28)
    at processTicksAndRejections (node:internal/process/task_queues:105:5) {
  code: 'PROJECT_NOT_FOUND',
  canUseCache: false
}

stderr | src/app/services/project/project.service.spec.ts > ProjectService > getProjectCover > handles network errors correctly
Project cover image loading error: ProjectServiceError: Server unavailable
    at _ProjectService.formatError (D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:688:16)
    at D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:439:39
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\catchError.js:13:51
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\retry.js:60:36
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at Observable.init [as _subscribe] (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\observable\throwError.js:8:58)
    at Observable._trySubscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:41:25) {
  code: 'NETWORK_ERROR',
  canUseCache: true
}

stderr | src/app/services/project/project-import-export.service.spec.ts > ProjectImportExportService > exportProjectZip > should handle error if triggerDownload fails in exportProjectZip
Export error: Error: Download error
    at _ProjectImportExportService.<anonymous> (D:/dev/inkweld/frontend/src/app/services/project/project-import-export.service.spec.ts:162:24)
    at _ProjectImportExportService.Mock [as triggerDownload] (file:///D:/dev/inkweld/frontend/node_modules/@vitest/spy/dist/index.js:280:34)
    at _ProjectImportExportService.exportProjectZip (D:/dev/inkweld/frontend/src/app/services/project/project-import-export.service.ts:129:18)
    at D:/dev/inkweld/frontend/src/app/services/project/project-import-export.service.spec.ts:164:7
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:20

stderr | src/app/pages/project/tabs/project-files/project-files-tab.component.spec.ts > ProjectFilesTabComponent > should handle file upload error
Upload error: Error: Upload failed
    at D:/dev/inkweld/frontend/src/app/pages/project/tabs/project-files/project-files-tab.component.spec.ts:153:24
    at Observable.init [as _subscribe] (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\observable\throwError.js:8:64)
    at Observable._trySubscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:41:25)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:35:31
    at Object.errorContext (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\util\errorContext.js:22:9)
    at Observable.subscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:26:24)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\firstValueFrom.js:24:16
    at new Promise (<anonymous>)
    at firstValueFrom (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\firstValueFrom.js:8:12)
    at _ProjectFilesTabComponent.openUploadDialog (D:/dev/inkweld/frontend/src/app/pages/project/tabs/project-files/project-files-tab.component.ts:106:15)

stderr | src/app/services/project/project.service.spec.ts > ProjectService > deleteProjectCover > handles API errors correctly
Project cover deletion error: ProjectServiceError: Project not found
    at _ProjectService.formatError (D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:702:16)
    at D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:503:51
    at Observable.init [as _subscribe] (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\observable\throwError.js:8:64)
    at Observable._trySubscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:41:25)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:35:31
    at Object.errorContext (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\util\errorContext.js:22:9)
    at Observable.subscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:26:24)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\catchError.js:26:27
    at SafeSubscriber.<anonymous> (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\util\lift.js:14:28)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:30:30 {
  code: 'PROJECT_NOT_FOUND',
  canUseCache: false
}

stderr | src/app/services/project/project-import-export.service.spec.ts > ProjectImportExportService > importProject > should handle error when updateProjectState fails in importProject
Import error: Error: Test updateProjectState error
    at _ProjectImportExportService.<anonymous> (D:/dev/inkweld/frontend/src/app/services/project/project-import-export.service.spec.ts:211:15)
    at _ProjectImportExportService.Mock [as updateProjectState] (file:///D:/dev/inkweld/frontend/node_modules/@vitest/spy/dist/index.js:280:34)
    at _ProjectImportExportService.importProject (D:/dev/inkweld/frontend/src/app/services/project/project-import-export.service.ts:158:12)

stderr | src/app/services/project/project.service.spec.ts > ProjectService > deleteProjectCover > handles network errors correctly
Project cover deletion error: ProjectServiceError: Server unavailable
    at _ProjectService.formatError (D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:688:16)
    at D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:503:51
    at Observable.init [as _subscribe] (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\observable\throwError.js:8:64)
    at Observable._trySubscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:41:25)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:35:31
    at Object.errorContext (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\util\errorContext.js:22:9)
    at Observable.subscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:26:24)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\catchError.js:26:27
    at SafeSubscriber.<anonymous> (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\util\lift.js:14:28)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:30:30 {
  code: 'NETWORK_ERROR',
  canUseCache: true
}

stderr | src/app/services/project/project-import-export.service.spec.ts > ProjectImportExportService > importProject > should handle error for invalid JSON in importProject
Import error: ProjectArchiveError: Unexpected token 'i', "invalid json" is not valid JSON
    at _ProjectImportExportService.importProjectArchiveFromJson (D:/dev/inkweld/frontend/src/app/services/project/project-import-export.service.ts:279:13)
    at _ProjectImportExportService.importProject (D:/dev/inkweld/frontend/src/app/services/project/project-import-export.service.ts:154:28) {
  type: 'INVALID_FORMAT',
  details: undefined
}

stderr | src/app/services/project/project-import-export.service.spec.ts > ProjectImportExportService > importProject > should handle error for invalid archive structure in importProject
Import error: ProjectArchiveError: Missing or invalid version number
    at _ProjectImportExportService.importProjectArchiveFromJson (D:/dev/inkweld/frontend/src/app/services/project/project-import-export.service.ts:279:13)
    at _ProjectImportExportService.importProject (D:/dev/inkweld/frontend/src/app/services/project/project-import-export.service.ts:154:28) {
  type: 'INVALID_FORMAT',
  details: undefined
}

[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mgetCurrentDocumentId[2m > [22m[2mshould return null when URL does not contain /document/
[22m[39mProjectComponent init
Loading project testuser/test-project

stderr | src/app/services/project/project.service.spec.ts > ProjectService > deleteProjectCover > continues even if IndexedDB cache clear fails
Failed to clear cached cover image: Error: IndexedDB error
    at D:/dev/inkweld/frontend/src/app/services/project/project.service.spec.ts:876:9
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:26
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1237:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1203:10)
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:37
    at Traces.$ (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/test.DqQZzsWf.js:234:21)
    at runTest (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:12)

stderr | src/app/services/project/project-import-export.service.spec.ts > ProjectImportExportService > importProject > should throw error if ITEM content is not a string
Document content is not a string: item2 { text: 'not a string' }
Import error: Error: Document content is not a string
    at _ProjectImportExportService.updateProjectState (D:/dev/inkweld/frontend/src/app/services/project/project-import-export.service.ts:325:17)
    at _ProjectImportExportService.importProject (D:/dev/inkweld/frontend/src/app/services/project/project-import-export.service.ts:158:12)

stderr | src/app/app.component.spec.ts > AppComponent > Authentication Error Bar > should not show error bar when in offline mode
Failed to initialize app: TypeError: Cannot read properties of undefined (reading 'startsWith')
    at _AppComponent.initializeApp (D:/dev/inkweld/frontend/src/app/app.component.ts:85:20)
    at _AppComponent.ngOnInit (D:/dev/inkweld/frontend/src/app/app.component.ts:45:15)
    at callHookInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:555:10)
    at callHook (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:570:7)
    at callHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:544:9)
    at executeInitAndCheckHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:513:5)
    at refreshView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5479:11)
    at detectChangesInView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5607:5)
    at detectChangesInViewWhileDirty (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5416:5)
    at detectChangesInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5405:5)

stderr | src/app/app.component.spec.ts > AppComponent > Authentication Error Bar > should handle re-authentication and navigate to welcome
Failed to initialize app: TypeError: Cannot read properties of undefined (reading 'startsWith')
    at _AppComponent.initializeApp (D:/dev/inkweld/frontend/src/app/app.component.ts:85:20)
    at _AppComponent.ngOnInit (D:/dev/inkweld/frontend/src/app/app.component.ts:45:15)
    at callHookInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:555:10)
    at callHook (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:570:7)
    at callHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:544:9)
    at executeInitAndCheckHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:513:5)
    at refreshView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5479:11)
    at detectChangesInView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5607:5)
    at detectChangesInViewWhileDirty (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5416:5)
    at detectChangesInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5405:5)

stderr | src/app/app.component.spec.ts > AppComponent > Authentication Error Bar > should handle continue offline
Failed to initialize app: TypeError: Cannot read properties of undefined (reading 'startsWith')
    at _AppComponent.initializeApp (D:/dev/inkweld/frontend/src/app/app.component.ts:85:20)
    at _AppComponent.ngOnInit (D:/dev/inkweld/frontend/src/app/app.component.ts:45:15)
    at callHookInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:555:10)
    at callHook (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:570:7)
    at callHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:544:9)
    at executeInitAndCheckHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:513:5)
    at refreshView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5479:11)
    at detectChangesInView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5607:5)
    at detectChangesInViewWhileDirty (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5416:5)
    at detectChangesInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5405:5)

stderr | src/app/app.component.spec.ts > AppComponent > Authentication Error Bar > should show re-authenticate button when error bar is visible
Failed to initialize app: TypeError: Cannot read properties of undefined (reading 'startsWith')
    at _AppComponent.initializeApp (D:/dev/inkweld/frontend/src/app/app.component.ts:85:20)
    at _AppComponent.ngOnInit (D:/dev/inkweld/frontend/src/app/app.component.ts:45:15)
    at callHookInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:555:10)
    at callHook (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:570:7)
    at callHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:544:9)
    at executeInitAndCheckHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:513:5)
    at refreshView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5479:11)
    at detectChangesInView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5607:5)
    at detectChangesInViewWhileDirty (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5416:5)
    at detectChangesInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5405:5)

stderr | src/app/services/project/project.service.spec.ts > ProjectService > uploadProjectCover (offline mode) > does not save to offline storage in server mode
Background refresh failed for project alice/project-1: TypeError: Cannot read properties of undefined (reading 'pipe')
    at _ProjectService.refreshProjectInBackground (D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:250:50)
    at Timeout._onTimeout (D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:200:29)
    at listOnTimeout (node:internal/timers:608:17)
    at processTimers (node:internal/timers:543:7)

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/core/system-config.service.spec.ts [2m([22m[2m18 tests[22m[2m)[22m[33m 623[2mms[22m[39m
stderr | src/app/services/project/project.service.spec.ts > ProjectService > uploadProjectCover (offline mode) > does not save to offline storage in server mode
Background refresh failed for project alice/project-1: Error: Test error
    at D:/dev/inkweld/frontend/src/app/services/project/project.service.spec.ts:216:45
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:26
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1237:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1203:10)
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:37
    at Traces.$ (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/test.DqQZzsWf.js:234:21)
    at runTest (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:12)

stderr | src/app/services/project/project.service.spec.ts > ProjectService > uploadProjectCover (offline mode) > does not save to offline storage in server mode
Background refresh failed for project alice/project-1: Error: Test error
    at D:/dev/inkweld/frontend/src/app/services/project/project.service.spec.ts:216:45
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:26
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1237:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1203:10)
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:37
    at Traces.$ (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/test.DqQZzsWf.js:234:21)
    at runTest (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:12)

stderr | src/app/services/project/project.service.spec.ts > ProjectService > uploadProjectCover (offline mode) > does not save to offline storage in server mode
Background refresh failed for project alice/project-1: Error: Test error
    at D:/dev/inkweld/frontend/src/app/services/project/project.service.spec.ts:337:45
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:26
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1237:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1203:10)
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:37
    at Traces.$ (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/test.DqQZzsWf.js:234:21)
    at runTest (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:12)

stderr | src/app/services/project/project.service.spec.ts > ProjectService > uploadProjectCover (offline mode) > does not save to offline storage in server mode
Background refresh failed for project alice/project-1: Error: Test error
    at D:/dev/inkweld/frontend/src/app/services/project/project.service.spec.ts:337:45
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:26
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1237:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1203:10)
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:37
    at Traces.$ (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/test.DqQZzsWf.js:234:21)
    at runTest (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:12)

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/pages/reset/reset.component.spec.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 538[2mms[22m[39m
stderr | src/app/app.component.spec.ts > AppComponent > Authentication Error Bar > should show continue offline button when error bar is visible
Failed to initialize app: TypeError: Cannot read properties of undefined (reading 'startsWith')
    at _AppComponent.initializeApp (D:/dev/inkweld/frontend/src/app/app.component.ts:85:20)
    at _AppComponent.ngOnInit (D:/dev/inkweld/frontend/src/app/app.component.ts:45:15)
    at callHookInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:555:10)
    at callHook (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:570:7)
    at callHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:544:9)
    at executeInitAndCheckHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:513:5)
    at refreshView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5479:11)
    at detectChangesInView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5607:5)
    at detectChangesInViewWhileDirty (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5416:5)
    at detectChangesInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5405:5)

stderr | src/app/services/project/project.service.spec.ts > ProjectService > uploadProjectCover (offline mode) > does not save to offline storage in server mode
Project cover upload error: ProjectServiceError: Server unavailable
    at _ProjectService.formatError (D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:688:16)
    at D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:569:53
    at Observable.init [as _subscribe] (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\observable\throwError.js:8:64)
    at Observable._trySubscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:41:25)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:35:31
    at Object.errorContext (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\util\errorContext.js:22:9)
    at Observable.subscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:26:24)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\catchError.js:17:31
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18) {
  code: 'NETWORK_ERROR',
  canUseCache: true
}

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/pages/project/tabs/project-files/project-files-tab.component.spec.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 606[2mms[22m[39m
stderr | src/app/services/project/project.service.spec.ts > ProjectService > clearCache > handles errors when clearing cache
Failed to clear project cache: Error: Storage error
    at D:/dev/inkweld/frontend/src/app/services/project/project.service.spec.ts:1036:38
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:26
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1237:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1203:10)
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:37
    at Traces.$ (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/test.DqQZzsWf.js:234:21)
    at runTest (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:12)

[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mgetCurrentDocumentId[2m > [22m[2mshould return null when on home tab
[22m[39mProjectComponent init
Loading project testuser/test-project

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/components/project-cover/project-cover.component.spec.ts [2m([22m[2m20 tests[22m[2m)[22m[33m 581[2mms[22m[39m
stderr | src/app/app.component.spec.ts > AppComponent > App Initialization > should redirect to setup when app is not configured
Failed to initialize app: TypeError: Cannot read properties of undefined (reading 'startsWith')
    at _AppComponent.initializeApp (D:/dev/inkweld/frontend/src/app/app.component.ts:85:20)
    at _AppComponent.ngOnInit (D:/dev/inkweld/frontend/src/app/app.component.ts:45:15)
    at callHookInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:555:10)
    at callHook (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:570:7)
    at callHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:544:9)
    at executeInitAndCheckHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:513:5)
    at refreshView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5479:11)
    at detectChangesInView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5607:5)
    at detectChangesInViewWhileDirty (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5416:5)
    at detectChangesInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5405:5)

stderr | src/app/services/project/project.service.spec.ts > ProjectService > throws SERVER_ERROR when API & cache both fail
Projects loading error: ProjectServiceError: An unexpected error occurred
    at _ProjectService.formatError (D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:721:12)
    at D:/dev/inkweld/frontend/src/app/services/project/project.service.ts:142:41
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\catchError.js:13:51
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\retry.js:60:36
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at Observable.init [as _subscribe] (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\observable\throwError.js:8:58)
    at Observable._trySubscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:41:25) {
  code: 'SERVER_ERROR',
  canUseCache: false
}

stderr | src/app/app.component.spec.ts > AppComponent > App Initialization > should redirect to setup on initialization error
Failed to initialize app: TypeError: Cannot read properties of undefined (reading 'startsWith')
    at _AppComponent.initializeApp (D:/dev/inkweld/frontend/src/app/app.component.ts:85:20)
    at _AppComponent.ngOnInit (D:/dev/inkweld/frontend/src/app/app.component.ts:45:15)
    at callHookInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:555:10)
    at callHook (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:570:7)
    at callHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:544:9)
    at executeInitAndCheckHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:513:5)
    at refreshView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5479:11)
    at detectChangesInView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5607:5)
    at detectChangesInViewWhileDirty (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5416:5)
    at detectChangesInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5405:5)

stderr | src/app/app.component.spec.ts > AppComponent > App Initialization > should redirect to setup on initialization error
Failed to initialize app: TypeError: Cannot read properties of undefined (reading 'startsWith')
    at _AppComponent.initializeApp (D:/dev/inkweld/frontend/src/app/app.component.ts:85:20)
    at _AppComponent.ngOnInit (D:/dev/inkweld/frontend/src/app/app.component.ts:45:15)
    at D:/dev/inkweld/frontend/src/app/app.component.spec.ts:259:17
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:26
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1237:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1203:10)
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:37
    at Traces.$ (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)

stderr | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts > WorldbuildingTabComponent > ngOnInit > should subscribe to route params and set element ID
[WorldbuildingTab] Element not found yet: element-123, waiting for elements to load...

[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2mshould create
[22m[39m[WorldbuildingEditor] Loaded schema: {
  id: [32m'character'[39m,
  type: [32m'character'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Character schema'[39m,
  version: [33m1[39m,
  isBuiltIn: [33mtrue[39m,
  tabs: [
    {
      key: [32m'basic'[39m,
      label: [32m'Basic Info'[39m,
      icon: [32m'info'[39m,
      order: [33m1[39m,
      fields: [36m[Array][39m
    },
    {
      key: [32m'appearance'[39m,
      label: [32m'Appearance'[39m,
      icon: [32m'visibility'[39m,
      order: [33m2[39m,
      fields: [36m[Array][39m
    }
  ],
  defaultValues: { name: [32m''[39m, age: [33m0[39m }
}

stderr | src/app/app.component.spec.ts > AppComponent > App Initialization > should initialize in server mode by default
Failed to initialize app: TypeError: Cannot read properties of undefined (reading 'startsWith')
    at _AppComponent.initializeApp (D:/dev/inkweld/frontend/src/app/app.component.ts:85:20)
    at _AppComponent.ngOnInit (D:/dev/inkweld/frontend/src/app/app.component.ts:45:15)
    at callHookInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:555:10)
    at callHook (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:570:7)
    at callHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:544:9)
    at executeInitAndCheckHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:513:5)
    at refreshView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5479:11)
    at detectChangesInView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5607:5)
    at detectChangesInViewWhileDirty (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5416:5)
    at detectChangesInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5405:5)

[90mstdout[2m | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts[2m > [22m[2mWorldbuildingTabComponent[2m > [22m[2mngOnInit[2m > [22m[2mshould set element type when element is found in project state
[22m[39m[Worldbuilding] Setup check - mode: null, wsUrl: null, username: undefined, slug: undefined
[Worldbuilding] WebSocket NOT created - missing params
[Worldbuilding] Setup check - mode: null, wsUrl: null, username: undefined, slug: undefined
[Worldbuilding] WebSocket NOT created - missing params
[WorldbuildingEditor] Loaded schema: [1mnull[22m

stderr | src/app/app.component.spec.ts > AppComponent > App Initialization > should skip user loading on registration pages
Failed to initialize app: TypeError: Cannot read properties of undefined (reading 'startsWith')
    at _AppComponent.initializeApp (D:/dev/inkweld/frontend/src/app/app.component.ts:85:20)
    at _AppComponent.ngOnInit (D:/dev/inkweld/frontend/src/app/app.component.ts:45:15)
    at callHookInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:555:10)
    at callHook (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:570:7)
    at callHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:544:9)
    at executeInitAndCheckHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:513:5)
    at refreshView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5479:11)
    at detectChangesInView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5607:5)
    at detectChangesInViewWhileDirty (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5416:5)
    at detectChangesInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5405:5)

[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2mgetTabs[2m > [22m[2mshould return tabs from schema
[22m[39m[WorldbuildingEditor] Loaded schema: {
  id: [32m'character'[39m,
  type: [32m'character'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Character schema'[39m,
  version: [33m1[39m,
  isBuiltIn: [33mtrue[39m,
  tabs: [
    {
      key: [32m'basic'[39m,
      label: [32m'Basic Info'[39m,
      icon: [32m'info'[39m,
      order: [33m1[39m,
      fields: [36m[Array][39m
    },
    {
      key: [32m'appearance'[39m,
      label: [32m'Appearance'[39m,
      icon: [32m'visibility'[39m,
      order: [33m2[39m,
      fields: [36m[Array][39m
    }
  ],
  defaultValues: { name: [32m''[39m, age: [33m0[39m }
}

stderr | src/app/app.component.spec.ts > AppComponent > App Initialization > should skip user loading on welcome page
Failed to initialize app: TypeError: Cannot read properties of undefined (reading 'startsWith')
    at _AppComponent.initializeApp (D:/dev/inkweld/frontend/src/app/app.component.ts:85:20)
    at _AppComponent.ngOnInit (D:/dev/inkweld/frontend/src/app/app.component.ts:45:15)
    at callHookInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:555:10)
    at callHook (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:570:7)
    at callHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:544:9)
    at executeInitAndCheckHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:513:5)
    at refreshView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5479:11)
    at detectChangesInView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5607:5)
    at detectChangesInViewWhileDirty (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5416:5)
    at detectChangesInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5405:5)

stderr | src/app/services/project/project-import-export.service.spec.ts > ProjectImportExportService > importProjectZip > should handle error when updateProjectState fails in importProjectZip
Import error: Error: Test updateProjectState error
    at _ProjectImportExportService.<anonymous> (D:/dev/inkweld/frontend/src/app/services/project/project-import-export.service.spec.ts:371:15)
    at _ProjectImportExportService.Mock [as updateProjectState] (file:///D:/dev/inkweld/frontend/node_modules/@vitest/spy/dist/index.js:280:34)
    at _ProjectImportExportService.importProjectZip (D:/dev/inkweld/frontend/src/app/services/project/project-import-export.service.ts:206:12)
    at D:/dev/inkweld/frontend/src/app/services/project/project-import-export.service.spec.ts:373:7
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:20

[90mstdout[2m | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts[2m > [22m[2mWorldbuildingTabComponent[2m > [22m[2mngOnInit[2m > [22m[2mshould warn when element is not found in project state
[22m[39m[WorldbuildingTab] Element ID from route params: element-123

stderr | src/app/app.component.spec.ts > AppComponent > App Initialization > should skip user loading on approval-pending page
Failed to initialize app: TypeError: Cannot read properties of undefined (reading 'startsWith')
    at _AppComponent.initializeApp (D:/dev/inkweld/frontend/src/app/app.component.ts:85:20)
    at _AppComponent.ngOnInit (D:/dev/inkweld/frontend/src/app/app.component.ts:45:15)
    at callHookInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:555:10)
    at callHook (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:570:7)
    at callHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:544:9)
    at executeInitAndCheckHooks (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:513:5)
    at refreshView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5479:11)
    at detectChangesInView (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5607:5)
    at detectChangesInViewWhileDirty (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5416:5)
    at detectChangesInternal (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_debug_node-chunk.mjs:5405:5)

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/project/project.service.spec.ts [2m([22m[2m48 tests[22m[2m)[22m[33m 540[2mms[22m[39m
[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2mgetTabs[2m > [22m[2mshould return empty array when no schema
[22m[39m[WorldbuildingEditor] Loaded schema: {
  id: [32m'character'[39m,
  type: [32m'character'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Character schema'[39m,
  version: [33m1[39m,
  isBuiltIn: [33mtrue[39m,
  tabs: [
    {
      key: [32m'basic'[39m,
      label: [32m'Basic Info'[39m,
      icon: [32m'info'[39m,
      order: [33m1[39m,
      fields: [36m[Array][39m
    },
    {
      key: [32m'appearance'[39m,
      label: [32m'Appearance'[39m,
      icon: [32m'visibility'[39m,
      order: [33m2[39m,
      fields: [36m[Array][39m
    }
  ],
  defaultValues: { name: [32m''[39m, age: [33m0[39m }
}

stderr | src/app/services/project/project-import-export.service.spec.ts > ProjectImportExportService > importProjectZip > should throw error if ZIP file does not contain project.json
Import error: ProjectArchiveError: ZIP archive does not contain project.json
    at _ProjectImportExportService.importProjectZip (D:/dev/inkweld/frontend/src/app/services/project/project-import-export.service.ts:194:15)
    at D:/dev/inkweld/frontend/src/app/services/project/project-import-export.service.spec.ts:391:7
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:20 {
  type: 'INVALID_FORMAT',
  details: undefined
}

stderr | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts > WorldbuildingTabComponent > ngOnInit > should handle empty tabId param
[WorldbuildingTab] Element not found yet: , waiting for elements to load...

stderr | src/app/services/project/project-import-export.service.spec.ts > ProjectImportExportService > importProjectZip > updateProjectState > should warn when ITEM content is missing and not call documentService.importDocument
Document content is missing for item: itemMissing

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
stderr | src/app/services/project/project-import-export.service.spec.ts > ProjectImportExportService > importProjectZip > updateProjectState > should throw error when ITEM content is not a string
Document content is not a string: itemInvalid { text: 'not a string' }

stderr | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts > WorldbuildingTabComponent > ngOnInit > should update when route params change
[WorldbuildingTab] Element not found yet: element-123, waiting for elements to load...
[WorldbuildingTab] Element not found yet: element-456, waiting for elements to load...

[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2mgetFieldsForTab[2m > [22m[2mshould return fields for existing tab
[22m[39m[WorldbuildingEditor] Loaded schema: {
  id: [32m'character'[39m,
  type: [32m'character'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Character schema'[39m,
  version: [33m1[39m,
  isBuiltIn: [33mtrue[39m,
  tabs: [
    {
      key: [32m'basic'[39m,
      label: [32m'Basic Info'[39m,
      icon: [32m'info'[39m,
      order: [33m1[39m,
      fields: [36m[Array][39m
    },
    {
      key: [32m'appearance'[39m,
      label: [32m'Appearance'[39m,
      icon: [32m'visibility'[39m,
      order: [33m2[39m,
      fields: [36m[Array][39m
    }
  ],
  defaultValues: { name: [32m''[39m, age: [33m0[39m }
}

[90mstdout[2m | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts[2m > [22m[2mWorldbuildingTabComponent[2m > [22m[2mproject changes effect[2m > [22m[2mshould update username and slug when project is set
[22m[39m[WorldbuildingTab] Element ID from route params: element-123

stderr | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts > WorldbuildingTabComponent > project changes effect > should update username and slug when project is set
[WorldbuildingTab] Element not found yet: element-123, waiting for elements to load...

[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2mgetFieldsForTab[2m > [22m[2mshould return empty array for non-existent tab
[22m[39m[WorldbuildingEditor] Loaded schema: {
  id: [32m'character'[39m,
  type: [32m'character'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Character schema'[39m,
  version: [33m1[39m,
  isBuiltIn: [33mtrue[39m,
  tabs: [
    {
      key: [32m'basic'[39m,
      label: [32m'Basic Info'[39m,
      icon: [32m'info'[39m,
      order: [33m1[39m,
      fields: [36m[Array][39m
    },
    {
      key: [32m'appearance'[39m,
      label: [32m'Appearance'[39m,
      icon: [32m'visibility'[39m,
      order: [33m2[39m,
      fields: [36m[Array][39m
    }
  ],
  defaultValues: { name: [32m''[39m, age: [33m0[39m }
}

[90mstdout[2m | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts[2m > [22m[2mWorldbuildingTabComponent[2m > [22m[2mproject changes effect[2m > [22m[2mshould not update when project is null
[22m[39m[WorldbuildingTab] Element ID from route params: element-123

stderr | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts > WorldbuildingTabComponent > project changes effect > should not update when project is null
[WorldbuildingTab] Element not found yet: element-123, waiting for elements to load...

[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mgetCurrentDocumentId[2m > [22m[2mshould return document ID for document tab
[22m[39mProjectComponent init
Loading project testuser/test-project

[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2mgetFieldsForTab[2m > [22m[2mshould return empty array when no schema
[22m[39m[WorldbuildingEditor] Loaded schema: {
  id: [32m'character'[39m,
  type: [32m'character'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Character schema'[39m,
  version: [33m1[39m,
  isBuiltIn: [33mtrue[39m,
  tabs: [
    {
      key: [32m'basic'[39m,
      label: [32m'Basic Info'[39m,
      icon: [32m'info'[39m,
      order: [33m1[39m,
      fields: [36m[Array][39m
    },
    {
      key: [32m'appearance'[39m,
      label: [32m'Appearance'[39m,
      icon: [32m'visibility'[39m,
      order: [33m2[39m,
      fields: [36m[Array][39m
    }
  ],
  defaultValues: { name: [32m''[39m, age: [33m0[39m }
}

stderr | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts > WorldbuildingTabComponent > elements changes effect > should update element type when elements are loaded
[WorldbuildingTab] Element not found yet: element-123, waiting for elements to load...

[90mstdout[2m | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts[2m > [22m[2mWorldbuildingTabComponent[2m > [22m[2melements changes effect[2m > [22m[2mshould update element type when elements are loaded
[22m[39m[Worldbuilding] Setup check - mode: null, wsUrl: null, username: undefined, slug: undefined
[Worldbuilding] WebSocket NOT created - missing params
[Worldbuilding] Setup check - mode: null, wsUrl: null, username: undefined, slug: undefined
[Worldbuilding] WebSocket NOT created - missing params
[WorldbuildingEditor] Loaded schema: [1mnull[22m

[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2mFormArray operations[2m > [22m[2mshould get form array for field
[22m[39m[WorldbuildingEditor] Loaded schema: {
  id: [32m'character'[39m,
  type: [32m'character'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Character schema'[39m,
  version: [33m1[39m,
  isBuiltIn: [33mtrue[39m,
  tabs: [
    {
      key: [32m'basic'[39m,
      label: [32m'Basic Info'[39m,
      icon: [32m'info'[39m,
      order: [33m1[39m,
      fields: [36m[Array][39m
    },
    {
      key: [32m'appearance'[39m,
      label: [32m'Appearance'[39m,
      icon: [32m'visibility'[39m,
      order: [33m2[39m,
      fields: [36m[Array][39m
    }
  ],
  defaultValues: { name: [32m''[39m, age: [33m0[39m }
}

[90mstdout[2m | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts[2m > [22m[2mWorldbuildingTabComponent[2m > [22m[2melements changes effect[2m > [22m[2mshould not update element type if already set
[22m[39m[Worldbuilding] Setup check - mode: null, wsUrl: null, username: undefined, slug: undefined
[Worldbuilding] WebSocket NOT created - missing params
[Worldbuilding] Setup check - mode: null, wsUrl: null, username: undefined, slug: undefined
[Worldbuilding] WebSocket NOT created - missing params
[WorldbuildingEditor] Loaded schema: [1mnull[22m

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/dialogs/user-settings-dialog/tabs/project-settings/project-settings.component.spec.ts [2m([22m[2m9 tests[22m[2m)[22m[33m 932[2mms[22m[39m
[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2mFormArray operations[2m > [22m[2mshould add item to array field
[22m[39m[WorldbuildingEditor] Loaded schema: {
  id: [32m'character'[39m,
  type: [32m'character'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Character schema'[39m,
  version: [33m1[39m,
  isBuiltIn: [33mtrue[39m,
  tabs: [
    {
      key: [32m'basic'[39m,
      label: [32m'Basic Info'[39m,
      icon: [32m'info'[39m,
      order: [33m1[39m,
      fields: [36m[Array][39m
    },
    {
      key: [32m'appearance'[39m,
      label: [32m'Appearance'[39m,
      icon: [32m'visibility'[39m,
      order: [33m2[39m,
      fields: [36m[Array][39m
    }
  ],
  defaultValues: { name: [32m''[39m, age: [33m0[39m }
}

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/project/project-import-export.service.spec.ts [2m([22m[2m21 tests[22m[2m)[22m[33m 551[2mms[22m[39m
stderr | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts > WorldbuildingTabComponent > elements changes effect > should not update if element ID does not match
[WorldbuildingTab] Element not found yet: element-123, waiting for elements to load...

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/app.component.spec.ts [2m([22m[2m18 tests[22m[2m)[22m[33m 556[2mms[22m[39m
[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2mFormArray operations[2m > [22m[2mshould remove item from array field
[22m[39m[WorldbuildingEditor] Loaded schema: {
  id: [32m'character'[39m,
  type: [32m'character'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Character schema'[39m,
  version: [33m1[39m,
  isBuiltIn: [33mtrue[39m,
  tabs: [
    {
      key: [32m'basic'[39m,
      label: [32m'Basic Info'[39m,
      icon: [32m'info'[39m,
      order: [33m1[39m,
      fields: [36m[Array][39m
    },
    {
      key: [32m'appearance'[39m,
      label: [32m'Appearance'[39m,
      icon: [32m'visibility'[39m,
      order: [33m2[39m,
      fields: [36m[Array][39m
    }
  ],
  defaultValues: { name: [32m''[39m, age: [33m0[39m }
}

[90mstdout[2m | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts[2m > [22m[2mWorldbuildingTabComponent[2m > [22m[2melements changes effect[2m > [22m[2mshould handle empty elements array
[22m[39m[WorldbuildingTab] Element ID from route params: element-123

stderr | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts > WorldbuildingTabComponent > elements changes effect > should handle empty elements array
[WorldbuildingTab] Element not found yet: element-123, waiting for elements to load...

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/components/lint/lint-floating-menu.component.spec.ts [2m([22m[2m27 tests[22m[2m)[22m[33m 448[2mms[22m[39m
[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2mbuildFormFromSchema[2m > [22m[2mshould build form with all field types
[22m[39m[WorldbuildingEditor] Loaded schema: {
  id: [32m'character'[39m,
  type: [32m'character'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Character schema'[39m,
  version: [33m1[39m,
  isBuiltIn: [33mtrue[39m,
  tabs: [
    {
      key: [32m'basic'[39m,
      label: [32m'Basic Info'[39m,
      icon: [32m'info'[39m,
      order: [33m1[39m,
      fields: [36m[Array][39m
    },
    {
      key: [32m'appearance'[39m,
      label: [32m'Appearance'[39m,
      icon: [32m'visibility'[39m,
      order: [33m2[39m,
      fields: [36m[Array][39m
    }
  ],
  defaultValues: { name: [32m''[39m, age: [33m0[39m }
}

[90mstdout[2m | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts[2m > [22m[2mWorldbuildingTabComponent[2m > [22m[2mngOnDestroy[2m > [22m[2mshould unsubscribe from route params
[22m[39m[WorldbuildingTab] Element ID from route params: element-123

stderr | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts > WorldbuildingTabComponent > ngOnDestroy > should unsubscribe from route params
[WorldbuildingTab] Element not found yet: element-123, waiting for elements to load...

[90mstdout[2m | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts[2m > [22m[2mWorldbuildingTabComponent[2m > [22m[2mngOnDestroy[2m > [22m[2mshould handle null subscription gracefully
[22m[39m[WorldbuildingTab] Element ID from route params: element-123

[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2mbuildFormFromSchema[2m > [22m[2mshould handle nested fields with dot notation
[22m[39m[WorldbuildingEditor] Loaded schema: {
  id: [32m'character'[39m,
  type: [32m'character'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Character schema'[39m,
  version: [33m1[39m,
  isBuiltIn: [33mtrue[39m,
  tabs: [
    {
      key: [32m'basic'[39m,
      label: [32m'Basic Info'[39m,
      icon: [32m'info'[39m,
      order: [33m1[39m,
      fields: [36m[Array][39m
    },
    {
      key: [32m'appearance'[39m,
      label: [32m'Appearance'[39m,
      icon: [32m'visibility'[39m,
      order: [33m2[39m,
      fields: [36m[Array][39m
    }
  ],
  defaultValues: { name: [32m''[39m, age: [33m0[39m }
}

stderr | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts > WorldbuildingTabComponent > ngOnDestroy > should handle null subscription gracefully
[WorldbuildingTab] Element not found yet: element-123, waiting for elements to load...

[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2mbuildFormFromSchema[2m > [22m[2mshould handle schema with no tabs gracefully
[22m[39m[WorldbuildingEditor] Loaded schema: {
  id: [32m'character'[39m,
  type: [32m'character'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Character schema'[39m,
  version: [33m1[39m,
  isBuiltIn: [33mtrue[39m,
  tabs: [
    {
      key: [32m'basic'[39m,
      label: [32m'Basic Info'[39m,
      icon: [32m'info'[39m,
      order: [33m1[39m,
      fields: [36m[Array][39m
    },
    {
      key: [32m'appearance'[39m,
      label: [32m'Appearance'[39m,
      icon: [32m'visibility'[39m,
      order: [33m2[39m,
      fields: [36m[Array][39m
    }
  ],
  defaultValues: { name: [32m''[39m, age: [33m0[39m }
}

[90mstdout[2m | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts[2m > [22m[2mWorldbuildingTabComponent[2m > [22m[2mfindElement[2m > [22m[2mshould find element by ID
[22m[39m[WorldbuildingTab] Element ID from route params: element-123
[WorldbuildingTab] Element type: CHARACTER

stderr | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts > WorldbuildingEditorComponent > buildFormFromSchema > should handle schema with no tabs gracefully
[WorldbuildingEditor] No tabs in schema

[90mstdout[2m | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts[2m > [22m[2mWorldbuildingTabComponent[2m > [22m[2mfindElement[2m > [22m[2mshould find element by ID
[22m[39m[Worldbuilding] Setup check - mode: null, wsUrl: null, username: undefined, slug: undefined
[Worldbuilding] WebSocket NOT created - missing params
[Worldbuilding] Setup check - mode: null, wsUrl: null, username: undefined, slug: undefined
[Worldbuilding] WebSocket NOT created - missing params
[WorldbuildingEditor] Loaded schema: [1mnull[22m

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould create
[22m[39m[FolderTab] Folder ID from route params: folder1 (changed from )
Mock folder editor initialized
[FolderTab] Built full element ID: testuser:test-project:folder1

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould create
[22m[39mMock folder editor destroyed
[FolderTab] Destroying component for folder ID: folder1

[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2mupdateFormFromData[2m > [22m[2mshould update simple form values
[22m[39m[WorldbuildingEditor] Loaded schema: {
  id: [32m'character'[39m,
  type: [32m'character'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Character schema'[39m,
  version: [33m1[39m,
  isBuiltIn: [33mtrue[39m,
  tabs: [
    {
      key: [32m'basic'[39m,
      label: [32m'Basic Info'[39m,
      icon: [32m'info'[39m,
      order: [33m1[39m,
      fields: [36m[Array][39m
    },
    {
      key: [32m'appearance'[39m,
      label: [32m'Appearance'[39m,
      icon: [32m'visibility'[39m,
      order: [33m2[39m,
      fields: [36m[Array][39m
    }
  ],
  defaultValues: { name: [32m''[39m, age: [33m0[39m }
}

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
[90mstdout[2m | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts[2m > [22m[2mWorldbuildingTabComponent[2m > [22m[2mfindElement[2m > [22m[2mshould return null when element not found
[22m[39m[WorldbuildingTab] Element ID from route params: element-123
[WorldbuildingTab] Element type: CHARACTER

[90mstdout[2m | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts[2m > [22m[2mWorldbuildingTabComponent[2m > [22m[2mfindElement[2m > [22m[2mshould return null when element not found
[22m[39m[Worldbuilding] Setup check - mode: null, wsUrl: null, username: undefined, slug: undefined
[Worldbuilding] WebSocket NOT created - missing params
[Worldbuilding] Setup check - mode: null, wsUrl: null, username: undefined, slug: undefined
[Worldbuilding] WebSocket NOT created - missing params
[WorldbuildingEditor] Loaded schema: [1mnull[22m

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould initialize with folder ID from route params
[22m[39m[FolderTab] Folder ID from route params: folder1 (changed from )
Mock folder editor initialized
[FolderTab] Built full element ID: testuser:test-project:folder1

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould initialize with folder ID from route params
[22m[39mMock folder editor destroyed
[FolderTab] Destroying component for folder ID: folder1

[90mstdout[2m | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts[2m > [22m[2mWorldbuildingTabComponent[2m > [22m[2mfindElement[2m > [22m[2mshould return null for empty elements array
[22m[39m[WorldbuildingTab] Element ID from route params: element-123

stderr | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts > WorldbuildingTabComponent > findElement > should return null for empty elements array
[WorldbuildingTab] Element not found yet: element-123, waiting for elements to load...

[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2mupdateFormFromData[2m > [22m[2mshould update nested form values
[22m[39m[WorldbuildingEditor] Loaded schema: {
  id: [32m'character'[39m,
  type: [32m'character'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Character schema'[39m,
  version: [33m1[39m,
  isBuiltIn: [33mtrue[39m,
  tabs: [
    {
      key: [32m'basic'[39m,
      label: [32m'Basic Info'[39m,
      icon: [32m'info'[39m,
      order: [33m1[39m,
      fields: [36m[Array][39m
    },
    {
      key: [32m'appearance'[39m,
      label: [32m'Appearance'[39m,
      icon: [32m'visibility'[39m,
      order: [33m2[39m,
      fields: [36m[Array][39m
    }
  ],
  defaultValues: { name: [32m''[39m, age: [33m0[39m }
}

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould render the folder element editor with the correct ID
[22m[39m[FolderTab] Folder ID from route params: folder1 (changed from )
Mock folder editor initialized
[FolderTab] Built full element ID: testuser:test-project:folder1

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould render the folder element editor with the correct ID
[22m[39m[FolderTab] Folder ID from route params: folder1

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould render the folder element editor with the correct ID
[22m[39m[FolderTab] Built full element ID: testuser:test-project:folder1

[90mstdout[2m | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts[2m > [22m[2mWorldbuildingTabComponent[2m > [22m[2mfindElement[2m > [22m[2mshould find element in array with multiple elements
[22m[39m[WorldbuildingTab] Element ID from route params: element-123

stderr | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts > WorldbuildingTabComponent > findElement > should find element in array with multiple elements
[WorldbuildingTab] Element not found yet: element-123, waiting for elements to load...

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould render the folder element editor with the correct ID
[22m[39mMock folder editor destroyed
[FolderTab] Destroying component for folder ID: folder1

[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2mupdateFormFromData[2m > [22m[2mshould update array form values
[22m[39m[WorldbuildingEditor] Loaded schema: {
  id: [32m'character'[39m,
  type: [32m'character'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Character schema'[39m,
  version: [33m1[39m,
  isBuiltIn: [33mtrue[39m,
  tabs: [
    {
      key: [32m'basic'[39m,
      label: [32m'Basic Info'[39m,
      icon: [32m'info'[39m,
      order: [33m1[39m,
      fields: [36m[Array][39m
    },
    {
      key: [32m'appearance'[39m,
      label: [32m'Appearance'[39m,
      icon: [32m'visibility'[39m,
      order: [33m2[39m,
      fields: [36m[Array][39m
    }
  ],
  defaultValues: { name: [32m''[39m, age: [33m0[39m }
}

[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mgutter size[2m > [22m[2mshould return 0 for mobile
[22m[39mProjectComponent init
Loading project testuser/test-project

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/dialogs/image-viewer-dialog/image-viewer-dialog.component.spec.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 140[2mms[22m[39m
[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould update elementId when route params change
[22m[39m[FolderTab] Folder ID from route params: folder1 (changed from )
Mock folder editor initialized
[FolderTab] Built full element ID: testuser:test-project:folder1

[90mstdout[2m | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts[2m > [22m[2mWorldbuildingTabComponent[2m > [22m[2mtemplate rendering[2m > [22m[2mshould show worldbuilding editor when elementId and elementType are set
[22m[39m[WorldbuildingTab] Element ID from route params: element-123
[WorldbuildingTab] Element type: CHARACTER

[90mstdout[2m | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts[2m > [22m[2mWorldbuildingTabComponent[2m > [22m[2mtemplate rendering[2m > [22m[2mshould show worldbuilding editor when elementId and elementType are set
[22m[39m[Worldbuilding] Setup check - mode: null, wsUrl: null, username: testuser, slug: test-project
[Worldbuilding] WebSocket NOT created - missing params
[Worldbuilding] Setup check - mode: null, wsUrl: null, username: testuser, slug: test-project
[Worldbuilding] WebSocket NOT created - missing params
[WorldbuildingEditor] Loaded schema: [1mnull[22m

[90mstdout[2m | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts[2m > [22m[2mWorldbuildingTabComponent[2m > [22m[2mtemplate rendering[2m > [22m[2mshould show worldbuilding editor when elementId and elementType are set
[22m[39m[WorldbuildingService] Initializing new CHARACTER element element-123
[WorldbuildingService] Looking for schema: projectKey="testuser:test-project", elementType="CHARACTER"

stderr | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts > WorldbuildingTabComponent > template rendering > should show worldbuilding editor when elementId and elementType are set
[SchemaLibrary] No schemas found in library

[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2mupdateFormFromData[2m > [22m[2mshould set isUpdatingFromRemote flag during update
[22m[39m[WorldbuildingEditor] Loaded schema: {
  id: [32m'character'[39m,
  type: [32m'character'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Character schema'[39m,
  version: [33m1[39m,
  isBuiltIn: [33mtrue[39m,
  tabs: [
    {
      key: [32m'basic'[39m,
      label: [32m'Basic Info'[39m,
      icon: [32m'info'[39m,
      order: [33m1[39m,
      fields: [36m[Array][39m
    },
    {
      key: [32m'appearance'[39m,
      label: [32m'Appearance'[39m,
      icon: [32m'visibility'[39m,
      order: [33m2[39m,
      fields: [36m[Array][39m
    }
  ],
  defaultValues: { name: [32m''[39m, age: [33m0[39m }
}

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould update elementId when route params change
[22m[39m[FolderTab] Folder ID from route params: folder2 (changed from folder1)

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould update elementId when route params change
[22m[39m[FolderTab] Built full element ID: testuser:test-project:folder2

[90mstdout[2m | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts[2m > [22m[2mWorldbuildingTabComponent[2m > [22m[2mtemplate rendering[2m > [22m[2mshould show worldbuilding editor when elementId and elementType are set
[22m[39m[WorldbuildingService] Schema library is empty, auto-loading default templates
[WorldbuildingService] Auto-loading default templates for testuser:test-project

stderr | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts > WorldbuildingTabComponent > template rendering > should show worldbuilding editor when elementId and elementType are set
[DefaultTemplatesService] Failed to load default templates: RuntimeError: NG0205: Injector has already been destroyed.
    at assertNotDestroyed (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_untracked-chunk.mjs:1395:11)
    at R3Injector.get (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_untracked-chunk.mjs:1155:5)
    at HttpInterceptorHandler.handle (file:///D:/dev/inkweld/frontend/node_modules/@angular/common/fesm2022/_module-chunk.mjs:1370:74)
    at file:///D:/dev/inkweld/frontend/node_modules/@angular/common/fesm2022/_module-chunk.mjs:1518:64
    at doInnerSub (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\mergeInternals.js:22:31)
    at outerNext (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\mergeInternals.js:17:70)
    at OperatorSubscriber._this._next (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:33:21)
    at OperatorSubscriber.Subscriber.next (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:51:18)
    at Observable._subscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\observable\innerFrom.js:109:24)
    at Observable._trySubscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:41:25) {
  code: 205
}

stderr | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts > WorldbuildingTabComponent > template rendering > should show worldbuilding editor when elementId and elementType are set
[WorldbuildingService] Failed to auto-load default templates: RuntimeError: NG0205: Injector has already been destroyed.
    at assertNotDestroyed (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_untracked-chunk.mjs:1395:11)
    at R3Injector.get (file:///D:/dev/inkweld/frontend/node_modules/@angular/core/fesm2022/_untracked-chunk.mjs:1155:5)
    at HttpInterceptorHandler.handle (file:///D:/dev/inkweld/frontend/node_modules/@angular/common/fesm2022/_module-chunk.mjs:1370:74)
    at file:///D:/dev/inkweld/frontend/node_modules/@angular/common/fesm2022/_module-chunk.mjs:1518:64
    at doInnerSub (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\mergeInternals.js:22:31)
    at outerNext (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\mergeInternals.js:17:70)
    at OperatorSubscriber._this._next (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:33:21)
    at OperatorSubscriber.Subscriber.next (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:51:18)
    at Observable._subscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\observable\innerFrom.js:109:24)
    at Observable._trySubscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:41:25) {
  code: 205
}

stderr | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts > WorldbuildingTabComponent > template rendering > should show worldbuilding editor when elementId and elementType are set
[SchemaLibrary] No schemas found in library

[90mstdout[2m | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts[2m > [22m[2mWorldbuildingTabComponent[2m > [22m[2mtemplate rendering[2m > [22m[2mshould show worldbuilding editor when elementId and elementType are set
[22m[39m[WorldbuildingService] Schema lookup result: NOT FOUND
[WorldbuildingService] Initialized CHARACTER element element-123 with schema-based data

stderr | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts > WorldbuildingTabComponent > template rendering > should show worldbuilding editor when elementId and elementType are set
[WorldbuildingService] No schema found for CHARACTER, using fallback initialization

[90mstdout[2m | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts[2m > [22m[2mWorldbuildingTabComponent[2m > [22m[2mtemplate rendering[2m > [22m[2mshould show error message when elementId is not set
[22m[39m[WorldbuildingTab] Element ID from route params: 

stderr | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts > WorldbuildingTabComponent > template rendering > should show error message when elementId is not set
[WorldbuildingTab] Element not found yet: , waiting for elements to load...

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould update elementId when route params change
[22m[39mMock folder editor destroyed
[FolderTab] Destroying component for folder ID: folder2

[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2meditEmbeddedTemplate[2m > [22m[2mshould open template editor dialog
[22m[39m[WorldbuildingEditor] Loaded schema: {
  id: [32m'character'[39m,
  type: [32m'character'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Character schema'[39m,
  version: [33m1[39m,
  isBuiltIn: [33mtrue[39m,
  tabs: [
    {
      key: [32m'basic'[39m,
      label: [32m'Basic Info'[39m,
      icon: [32m'info'[39m,
      order: [33m1[39m,
      fields: [36m[Array][39m
    },
    {
      key: [32m'appearance'[39m,
      label: [32m'Appearance'[39m,
      icon: [32m'visibility'[39m,
      order: [33m2[39m,
      fields: [36m[Array][39m
    }
  ],
  defaultValues: { name: [32m''[39m, age: [33m0[39m }
}

[90mstdout[2m | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts[2m > [22m[2mWorldbuildingTabComponent[2m > [22m[2mtemplate rendering[2m > [22m[2mshould show error message when elementType is not set
[22m[39m[WorldbuildingTab] Element ID from route params: element-123

stderr | src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts > WorldbuildingTabComponent > template rendering > should show error message when elementType is not set
[WorldbuildingTab] Element not found yet: element-123, waiting for elements to load...

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould calculate fullElementId correctly when ID has colons
[22m[39m[FolderTab] Folder ID from route params: folder1 (changed from )
Mock folder editor initialized
[FolderTab] Built full element ID: testuser:test-project:folder1

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould calculate fullElementId correctly when ID has colons
[22m[39m[FolderTab] Folder ID from route params: otheruser:other-project:folder3 (changed from folder1)

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould calculate fullElementId correctly when ID has colons
[22m[39m[FolderTab] ID already fully formatted: otheruser:other-project:folder3

[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2meditEmbeddedTemplate[2m > [22m[2mshould not open dialog when no schema
[22m[39m[WorldbuildingEditor] Loaded schema: {
  id: [32m'character'[39m,
  type: [32m'character'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Character schema'[39m,
  version: [33m1[39m,
  isBuiltIn: [33mtrue[39m,
  tabs: [
    {
      key: [32m'basic'[39m,
      label: [32m'Basic Info'[39m,
      icon: [32m'info'[39m,
      order: [33m1[39m,
      fields: [36m[Array][39m
    },
    {
      key: [32m'appearance'[39m,
      label: [32m'Appearance'[39m,
      icon: [32m'visibility'[39m,
      order: [33m2[39m,
      fields: [36m[Array][39m
    }
  ],
  defaultValues: { name: [32m''[39m, age: [33m0[39m }
}

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould calculate fullElementId correctly when ID has colons
[22m[39mMock folder editor destroyed
[FolderTab] Destroying component for folder ID: otheruser:other-project:folder3

[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2meditEmbeddedTemplate[2m > [22m[2mshould update schema when dialog returns result
[22m[39m[WorldbuildingEditor] Loaded schema: {
  id: [32m'character'[39m,
  type: [32m'character'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Character schema'[39m,
  version: [33m1[39m,
  isBuiltIn: [33mtrue[39m,
  tabs: [
    {
      key: [32m'basic'[39m,
      label: [32m'Basic Info'[39m,
      icon: [32m'info'[39m,
      order: [33m1[39m,
      fields: [36m[Array][39m
    },
    {
      key: [32m'appearance'[39m,
      label: [32m'Appearance'[39m,
      icon: [32m'visibility'[39m,
      order: [33m2[39m,
      fields: [36m[Array][39m
    }
  ],
  defaultValues: { name: [32m''[39m, age: [33m0[39m }
}

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould calculate fullElementId using project info when ID has no colons
[22m[39m[FolderTab] Folder ID from route params: folder1 (changed from )
Mock folder editor initialized
[FolderTab] Built full element ID: testuser:test-project:folder1

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould calculate fullElementId using project info when ID has no colons
[22m[39m[FolderTab] Folder ID from route params: simple-folder-id (changed from folder1)

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould calculate fullElementId using project info when ID has no colons
[22m[39m[FolderTab] Built full element ID: testuser:test-project:simple-folder-id

[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2mlifecycle[2m > [22m[2mshould clean up observers on destroy
[22m[39m[WorldbuildingEditor] Loaded schema: {
  id: [32m'character'[39m,
  type: [32m'character'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Character schema'[39m,
  version: [33m1[39m,
  isBuiltIn: [33mtrue[39m,
  tabs: [
    {
      key: [32m'basic'[39m,
      label: [32m'Basic Info'[39m,
      icon: [32m'info'[39m,
      order: [33m1[39m,
      fields: [36m[Array][39m
    },
    {
      key: [32m'appearance'[39m,
      label: [32m'Appearance'[39m,
      icon: [32m'visibility'[39m,
      order: [33m2[39m,
      fields: [36m[Array][39m
    }
  ],
  defaultValues: { name: [32m''[39m, age: [33m0[39m }
}

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2mlifecycle[2m > [22m[2mshould handle destroy when no observers exist
[22m[39m[WorldbuildingEditor] Loaded schema: {
  id: [32m'character'[39m,
  type: [32m'character'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Character schema'[39m,
  version: [33m1[39m,
  isBuiltIn: [33mtrue[39m,
  tabs: [
    {
      key: [32m'basic'[39m,
      label: [32m'Basic Info'[39m,
      icon: [32m'info'[39m,
      order: [33m1[39m,
      fields: [36m[Array][39m
    },
    {
      key: [32m'appearance'[39m,
      label: [32m'Appearance'[39m,
      icon: [32m'visibility'[39m,
      order: [33m2[39m,
      fields: [36m[Array][39m
    }
  ],
  defaultValues: { name: [32m''[39m, age: [33m0[39m }
}

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould calculate fullElementId using project info when ID has no colons
[22m[39mMock folder editor destroyed
[FolderTab] Destroying component for folder ID: simple-folder-id

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould handle missing element ID gracefully
[22m[39m[FolderTab] Folder ID from route params: folder1 (changed from )
Mock folder editor initialized
[FolderTab] Built full element ID: testuser:test-project:folder1

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould handle missing element ID gracefully
[22m[39m[FolderTab] Folder ID from route params:  (changed from folder1)

stderr | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts > FolderTabComponent > should handle missing element ID gracefully
[FolderTab] No element ID available

[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2mloadElementData[2m > [22m[2mshould load schema and data on element load
[22m[39m[WorldbuildingEditor] Loaded schema: {
  id: [32m'character'[39m,
  type: [32m'character'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Character schema'[39m,
  version: [33m1[39m,
  isBuiltIn: [33mtrue[39m,
  tabs: [
    {
      key: [32m'basic'[39m,
      label: [32m'Basic Info'[39m,
      icon: [32m'info'[39m,
      order: [33m1[39m,
      fields: [36m[Array][39m
    },
    {
      key: [32m'appearance'[39m,
      label: [32m'Appearance'[39m,
      icon: [32m'visibility'[39m,
      order: [33m2[39m,
      fields: [36m[Array][39m
    }
  ],
  defaultValues: { name: [32m''[39m, age: [33m0[39m }
}

[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2mloadElementData[2m > [22m[2mshould load schema and data on element load
[22m[39m[WorldbuildingEditor] Loaded schema: {
  id: [32m'character'[39m,
  type: [32m'character'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Character schema'[39m,
  version: [33m1[39m,
  isBuiltIn: [33mtrue[39m,
  tabs: [
    {
      key: [32m'basic'[39m,
      label: [32m'Basic Info'[39m,
      icon: [32m'info'[39m,
      order: [33m1[39m,
      fields: [36m[Array][39m
    },
    {
      key: [32m'appearance'[39m,
      label: [32m'Appearance'[39m,
      icon: [32m'visibility'[39m,
      order: [33m2[39m,
      fields: [36m[Array][39m
    }
  ],
  defaultValues: { name: [32m''[39m, age: [33m0[39m }
}

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/pages/project/tabs/worldbuilding/worldbuilding-tab.component.spec.ts [2m([22m[2m21 tests[22m[2m)[22m[33m 446[2mms[22m[39m
[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould handle missing element ID gracefully
[22m[39mMock folder editor destroyed

[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mgutter size[2m > [22m[2mshould return 8 for desktop
[22m[39mProjectComponent init
Loading project testuser/test-project

[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2mloadElementData[2m > [22m[2mshould handle missing schema by initializing element
[22m[39m[WorldbuildingEditor] Loaded schema: {
  id: [32m'character'[39m,
  type: [32m'character'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Character schema'[39m,
  version: [33m1[39m,
  isBuiltIn: [33mtrue[39m,
  tabs: [
    {
      key: [32m'basic'[39m,
      label: [32m'Basic Info'[39m,
      icon: [32m'info'[39m,
      order: [33m1[39m,
      fields: [36m[Array][39m
    },
    {
      key: [32m'appearance'[39m,
      label: [32m'Appearance'[39m,
      icon: [32m'visibility'[39m,
      order: [33m2[39m,
      fields: [36m[Array][39m
    }
  ],
  defaultValues: { name: [32m''[39m, age: [33m0[39m }
}

[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2mloadElementData[2m > [22m[2mshould handle missing schema by initializing element
[22m[39m[WorldbuildingEditor] Loaded schema: [1mnull[22m

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/publish/pdf-generator.service.spec.ts [2m([22m[2m52 tests[22m[2m)[22m[33m 431[2mms[22m[39m
[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2mloadElementData[2m > [22m[2mshould handle errors gracefully
[22m[39m[WorldbuildingEditor] Loaded schema: {
  id: [32m'character'[39m,
  type: [32m'character'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Character schema'[39m,
  version: [33m1[39m,
  isBuiltIn: [33mtrue[39m,
  tabs: [
    {
      key: [32m'basic'[39m,
      label: [32m'Basic Info'[39m,
      icon: [32m'info'[39m,
      order: [33m1[39m,
      fields: [36m[Array][39m
    },
    {
      key: [32m'appearance'[39m,
      label: [32m'Appearance'[39m,
      icon: [32m'visibility'[39m,
      order: [33m2[39m,
      fields: [36m[Array][39m
    }
  ],
  defaultValues: { name: [32m''[39m, age: [33m0[39m }
}

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould handle missing project gracefully
[22m[39m[FolderTab] Folder ID from route params: folder1 (changed from )
Mock folder editor initialized
[FolderTab] Built full element ID: testuser:test-project:folder1

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould handle missing project gracefully
[22m[39m[FolderTab] Folder ID from route params: folder1

stderr | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts > FolderTabComponent > should handle missing project gracefully
[FolderTab] Project not available when building element ID

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/publish/markdown-generator.service.spec.ts [2m([22m[2m47 tests[22m[2m)[22m[33m 397[2mms[22m[39m
[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2msetupRealtimeSync[2m > [22m[2mshould set up observer for realtime changes
[22m[39m[WorldbuildingEditor] Loaded schema: {
  id: [32m'character'[39m,
  type: [32m'character'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Character schema'[39m,
  version: [33m1[39m,
  isBuiltIn: [33mtrue[39m,
  tabs: [
    {
      key: [32m'basic'[39m,
      label: [32m'Basic Info'[39m,
      icon: [32m'info'[39m,
      order: [33m1[39m,
      fields: [36m[Array][39m
    },
    {
      key: [32m'appearance'[39m,
      label: [32m'Appearance'[39m,
      icon: [32m'visibility'[39m,
      order: [33m2[39m,
      fields: [36m[Array][39m
    }
  ],
  defaultValues: { name: [32m''[39m, age: [33m0[39m }
}

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould handle missing project gracefully
[22m[39mMock folder editor destroyed
[FolderTab] Destroying component for folder ID: folder1

[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2msetupRealtimeSync[2m > [22m[2mshould unsubscribe previous observer when setting up new one
[22m[39m[WorldbuildingEditor] Loaded schema: {
  id: [32m'character'[39m,
  type: [32m'character'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Character schema'[39m,
  version: [33m1[39m,
  isBuiltIn: [33mtrue[39m,
  tabs: [
    {
      key: [32m'basic'[39m,
      label: [32m'Basic Info'[39m,
      icon: [32m'info'[39m,
      order: [33m1[39m,
      fields: [36m[Array][39m
    },
    {
      key: [32m'appearance'[39m,
      label: [32m'Appearance'[39m,
      icon: [32m'visibility'[39m,
      order: [33m2[39m,
      fields: [36m[Array][39m
    }
  ],
  defaultValues: { name: [32m''[39m, age: [33m0[39m }
}

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould provide the element ID via getElementId method
[22m[39m[FolderTab] Folder ID from route params: folder1 (changed from )
Mock folder editor initialized
[FolderTab] Built full element ID: testuser:test-project:folder1

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould provide the element ID via getElementId method
[22m[39mMock folder editor destroyed
[FolderTab] Destroying component for folder ID: folder1

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/dialogs/confirmation-dialog/confirmation-dialog.component.spec.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 255[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/publish/html-generator.service.spec.ts [2m([22m[2m55 tests[22m[2m)[22m[33m 475[2mms[22m[39m
[90mstdout[2m | src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts[2m > [22m[2mWorldbuildingEditorComponent[2m > [22m[2msaveData[2m > [22m[2mshould save form data through worldbuilding service
[22m[39m[WorldbuildingEditor] Loaded schema: {
  id: [32m'character'[39m,
  type: [32m'character'[39m,
  name: [32m'Character'[39m,
  icon: [32m'person'[39m,
  description: [32m'Character schema'[39m,
  version: [33m1[39m,
  isBuiltIn: [33mtrue[39m,
  tabs: [
    {
      key: [32m'basic'[39m,
      label: [32m'Basic Info'[39m,
      icon: [32m'info'[39m,
      order: [33m1[39m,
      fields: [36m[Array][39m
    },
    {
      key: [32m'appearance'[39m,
      label: [32m'Appearance'[39m,
      icon: [32m'visibility'[39m,
      order: [33m2[39m,
      fields: [36m[Array][39m
    }
  ],
  defaultValues: { name: [32m''[39m, age: [33m0[39m }
}

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/dialogs/user-settings-dialog/tabs/project-tree-settings/project-tree-settings.component.spec.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 240[2mms[22m[39m
[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould clean up subscription on destroy
[22m[39m[FolderTab] Folder ID from route params: folder1 (changed from )
Mock folder editor initialized
[FolderTab] Built full element ID: testuser:test-project:folder1

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould clean up subscription on destroy
[22m[39m[FolderTab] Destroying component for folder ID: folder1

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/components/worldbuilding/worldbuilding-editor.component.spec.ts [2m([22m[2m27 tests[22m[2m)[22m[33m 666[2mms[22m[39m
[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould clean up subscription on destroy
[22m[39mMock folder editor destroyed
[FolderTab] Destroying component for folder ID: folder1

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould handle destroy when no subscription exists
[22m[39m[FolderTab] Folder ID from route params: folder1 (changed from )
Mock folder editor initialized
[FolderTab] Built full element ID: testuser:test-project:folder1

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould handle destroy when no subscription exists
[22m[39m[FolderTab] Destroying component for folder ID: folder1

[90mstdout[2m | src/app/pages/project/tabs/folder/folder-tab.component.spec.ts[2m > [22m[2mFolderTabComponent[2m > [22m[2mshould handle destroy when no subscription exists
[22m[39mMock folder editor destroyed
[FolderTab] Destroying component for folder ID: folder1

stderr | src/app/services/offline/project-sync.service.spec.ts > ProjectSyncService > hasPendingChanges > should return true when there are pending uploads
Failed to load sync state for alice/my-novel: InvalidStateError [DOMException] { code: 11 }

stderr | src/app/services/offline/project-sync.service.spec.ts > ProjectSyncService > hasPendingChanges > should return true when there are pending uploads
Failed to load sync state for alice/my-novel: InvalidStateError [DOMException] { code: 11 }

stderr | src/app/services/offline/project-sync.service.spec.ts > ProjectSyncService > hasPendingChanges > should return true when there are pending uploads
Failed to load sync state for alice/project-1: InvalidStateError [DOMException] { code: 11 }
Failed to load sync state for alice/project-2: InvalidStateError [DOMException] { code: 11 }

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/pages/project/tabs/folder/folder-tab.component.spec.ts [2m([22m[2m11 tests[22m[2m)[22m[33m 383[2mms[22m[39m
[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2msplit drag end[2m > [22m[2mshould update split size on drag end
[22m[39mProjectComponent init
Loading project testuser/test-project

stderr | src/app/services/offline/project-sync.service.spec.ts > ProjectSyncService > getProjectsWithPendingChanges > should return empty array when no pending changes
Failed to load sync state for alice/my-novel: InvalidStateError [DOMException] { code: 11 }

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/components/file-list/file-list.component.spec.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 298[2mms[22m[39m
[90mstdout[2m | src/app/services/user/user.service.spec.ts[2m > [22m[2mUserService[2m > [22m[2minitialization[2m > [22m[2mshould set initialized after load
[22m[39m[DEBUG][UserService] User result {
  id: [32m'test-id'[39m,
  username: [32m'testuser'[39m,
  name: [32m'Test User'[39m,
  enabled: [33mtrue[39m
}
[DEBUG][UserService] Saving user {
  id: [32m'test-id'[39m,
  username: [32m'testuser'[39m,
  name: [32m'Test User'[39m,
  enabled: [33mtrue[39m
}

[90mstdout[2m | src/app/services/user/user.service.spec.ts[2m > [22m[2mUserService[2m > [22m[2mloadCurrentUser[2m > [22m[2mshould load user from API when cache is empty
[22m[39m[DEBUG][UserService] User result {
  id: [32m'test-id'[39m,
  username: [32m'testuser'[39m,
  name: [32m'Test User'[39m,
  enabled: [33mtrue[39m
}
[DEBUG][UserService] Saving user {
  id: [32m'test-id'[39m,
  username: [32m'testuser'[39m,
  name: [32m'Test User'[39m,
  enabled: [33mtrue[39m
}

[90mstdout[2m | src/app/services/user/user.service.spec.ts[2m > [22m[2mUserService[2m > [22m[2mloadCurrentUser[2m > [22m[2mshould use cached user when available
[22m[39m[DEBUG][UserService] User result {
  id: [32m'test-id'[39m,
  username: [32m'testuser'[39m,
  name: [32m'Test User'[39m,
  enabled: [33mtrue[39m
}
[DEBUG][UserService] Saving user {
  id: [32m'test-id'[39m,
  username: [32m'testuser'[39m,
  name: [32m'Test User'[39m,
  enabled: [33mtrue[39m
}

stderr | src/app/services/user/user.service.spec.ts > UserService > loadCurrentUser > should handle network errors
[ERROR][UserService] User loading error UserServiceError: Server unavailable
    at _UserService.formatError (D:/dev/inkweld/frontend/src/app/services/user/user.service.ts:279:16)
    at D:/dev/inkweld/frontend/src/app/services/user/user.service.ts:142:36
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\catchError.js:13:51
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\retry.js:60:36
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at Observable.init [as _subscribe] (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\observable\throwError.js:8:58)
    at Observable._trySubscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:41:25) {
  code: 'NETWORK_ERROR'
}

stderr | src/app/services/user/user.service.spec.ts > UserService > loadCurrentUser > should handle session expiration
[ERROR][UserService] User loading error UserServiceError: Session expired
    at _UserService.formatError (D:/dev/inkweld/frontend/src/app/services/user/user.service.ts:302:16)
    at D:/dev/inkweld/frontend/src/app/services/user/user.service.ts:142:36
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\catchError.js:13:51
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\retry.js:60:36
    at OperatorSubscriber._this._error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:43:21)
    at OperatorSubscriber.Subscriber.error (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Subscriber.js:60:18)
    at Observable.init [as _subscribe] (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\observable\throwError.js:8:58)
    at Observable._trySubscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:41:25) {
  code: 'SESSION_EXPIRED'
}

[90mstdout[2m | src/app/components/oauth-provider-list/oauth-provider-list.component.spec.ts[2m > [22m[2mOAuthProviderListComponent[2m > [22m[2mOAuth sign-in[2m > [22m[2mshould redirect to OAuth provider
[22m[39mSign in with github clicked

[90mstdout[2m | src/app/services/worldbuilding/worldbuilding.service.spec.ts[2m > [22m[2mWorldbuildingService[2m > [22m[2msetupCollaboration[2m > [22m[2mshould setup collaboration for a worldbuilding element
[22m[39m[Worldbuilding] Setup check - mode: server, wsUrl: ws://localhost:8333, username: testuser, slug: test-project
[Worldbuilding] Connecting WebSocket for testuser:test-project:test-element-123

[90mstdout[2m | src/app/services/worldbuilding/worldbuilding.service.spec.ts[2m > [22m[2mWorldbuildingService[2m > [22m[2msetupCollaboration[2m > [22m[2mshould reuse existing connection if already setup
[22m[39m[Worldbuilding] Setup check - mode: server, wsUrl: ws://localhost:8333, username: testuser, slug: test-project
[Worldbuilding] Connecting WebSocket for testuser:test-project:test-element-123

[90mstdout[2m | src/app/services/worldbuilding/worldbuilding.service.spec.ts[2m > [22m[2mWorldbuildingService[2m > [22m[2msetupCollaboration[2m > [22m[2mshould work in offline mode without WebSocket
[22m[39m[Worldbuilding] Setup check - mode: offline, wsUrl: ws://localhost:8333, username: undefined, slug: undefined
[Worldbuilding] WebSocket NOT created - missing params

[90mstdout[2m | src/app/components/oauth-provider-list/oauth-provider-list.component.spec.ts[2m > [22m[2mOAuthProviderListComponent[2m > [22m[2mOAuth sign-in[2m > [22m[2mshould handle different OAuth providers
[22m[39mSign in with github clicked
Sign in with google clicked
Sign in with facebook clicked
Sign in with discord clicked
Sign in with apple clicked

[90mstdout[2m | src/app/services/worldbuilding/worldbuilding.service.spec.ts[2m > [22m[2mWorldbuildingService[2m > [22m[2mloadSchemaLibrary[2m > [22m[2mshould load schema library for a project
[22m[39m[SchemaLibrary] Connecting to testuser:test-project:__schemas__

stderr | src/app/services/user/user.service.spec.ts > UserService > user management > should handle storage errors gracefully
[WARN][UserService] Failed to cache user Error: Storage error
    at D:/dev/inkweld/frontend/src/app/services/user/user.service.spec.ts:207:9
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:26
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1237:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1203:10)
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:37
    at Traces.$ (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/test.DqQZzsWf.js:234:21)
    at runTest (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:12)

[90mstdout[2m | src/app/services/worldbuilding/worldbuilding.service.spec.ts[2m > [22m[2mWorldbuildingService[2m > [22m[2membedSchemaInElement[2m > [22m[2mshould embed schema snapshot in element Y.Doc
[22m[39m[WorldbuildingService] Embedded schema v1 for character

[90mstdout[2m | src/app/services/worldbuilding/worldbuilding.service.spec.ts[2m > [22m[2mWorldbuildingService[2m > [22m[2mloadSchemaFromElement[2m > [22m[2mshould load schema from element Y.Doc
[22m[39m[WorldbuildingService] Embedded schema v1 for character

[90mstdout[2m | src/app/services/worldbuilding/worldbuilding.service.spec.ts[2m > [22m[2mWorldbuildingService[2m > [22m[2mgetWorldbuildingData[2m > [22m[2mshould retrieve worldbuilding data from element
[22m[39m[Worldbuilding] Setup check - mode: server, wsUrl: ws://localhost:8333, username: testuser, slug: test-project
[Worldbuilding] Connecting WebSocket for testuser:test-project:test-element-123

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
stderr | src/app/services/user/user.service.spec.ts > UserService > hasCachedUser > should return false when storage.get throws error
[WARN][UserService] Failed to get cached user Error: Storage read error
    at D:/dev/inkweld/frontend/src/app/services/user/user.service.spec.ts:294:9
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:26
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1237:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1203:10)
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:37
    at Traces.$ (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/test.DqQZzsWf.js:234:21)
    at runTest (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:12)

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/dialogs/user-settings-dialog/user-settings-dialog.component.spec.ts [2m([22m[2m11 tests[22m[2m | [22m[33m1 skipped[39m[2m)[22m[33m 327[2mms[22m[39m
[90mstdout[2m | src/app/services/worldbuilding/worldbuilding.service.spec.ts[2m > [22m[2mWorldbuildingService[2m > [22m[2mgetWorldbuildingData[2m > [22m[2mshould return empty object if connection not found
[22m[39m[Worldbuilding] Setup check - mode: server, wsUrl: ws://localhost:8333, username: undefined, slug: undefined
[Worldbuilding] WebSocket NOT created - missing params

[90mstdout[2m | src/app/services/worldbuilding/worldbuilding.service.spec.ts[2m > [22m[2mWorldbuildingService[2m > [22m[2msaveWorldbuildingData[2m > [22m[2mshould save worldbuilding data to element
[22m[39m[Worldbuilding] Setup check - mode: server, wsUrl: ws://localhost:8333, username: testuser, slug: test-project
[Worldbuilding] Connecting WebSocket for testuser:test-project:test-element-123

[90mstdout[2m | src/app/services/worldbuilding/worldbuilding.service.spec.ts[2m > [22m[2mWorldbuildingService[2m > [22m[2msaveWorldbuildingData[2m > [22m[2mshould save worldbuilding data to element
[22m[39m[WorldbuildingService] saveWorldbuildingData called: {
  elementId: [32m'test-element-123'[39m,
  data: { name: [32m'Updated Character'[39m },
  username: [32m'testuser'[39m,
  slug: [32m'test-project'[39m
}

[90mstdout[2m | src/app/services/worldbuilding/worldbuilding.service.spec.ts[2m > [22m[2mWorldbuildingService[2m > [22m[2msaveWorldbuildingData[2m > [22m[2mshould save worldbuilding data to element
[22m[39m[WorldbuildingService] Setting key="name", value= Updated Character type=string
[WorldbuildingService] Set primitive key="name" Updated Character
[WorldbuildingService] Transaction complete, data: { name: [32m'Updated Character'[39m, lastModified: [32m'2025-12-03T01:16:32.074Z'[39m }
[WorldbuildingService] Data saved to Y.Doc, will sync automatically

[90mstdout[2m | src/app/services/worldbuilding/worldbuilding.service.spec.ts[2m > [22m[2mWorldbuildingService[2m > [22m[2mgetSchemaFromLibrary[2m > [22m[2mshould retrieve schema from library
[22m[39m[SchemaLibrary] Looking for "character" in available types: [ [32m'character'[39m ]

[90mstdout[2m | src/app/services/worldbuilding/worldbuilding.service.spec.ts[2m > [22m[2mWorldbuildingService[2m > [22m[2mgetSchemaFromLibrary[2m > [22m[2mshould return null if schema type not found
[22m[39m[SchemaLibrary] Looking for "nonexistent" in available types: []

stderr | src/app/services/worldbuilding/worldbuilding.service.spec.ts > WorldbuildingService > getSchemaFromLibrary > should return null if schema type not found
Invalid access: Add Yjs type to a document before reading data.
Invalid access: Add Yjs type to a document before reading data.
[SchemaLibrary] No schema found for type "nonexistent". Available: 

[90mstdout[2m | src/app/services/worldbuilding/worldbuilding.service.spec.ts[2m > [22m[2mWorldbuildingService[2m > [22m[2mcloneTemplate[2m > [22m[2mshould clone an existing template with new ID
[22m[39m[WorldbuildingService] Cloned template character to CUSTOM_1764724592089: "Hero"

stderr | src/app/services/user/user.service.spec.ts > UserService > openSettingsDialog > should handle errors when opening settings dialog
[ERROR][UserService] Settings dialog error Error: Dialog error
    at D:/dev/inkweld/frontend/src/app/services/user/user.service.spec.ts:319:45
    at Observable.init [as _subscribe] (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\observable\throwError.js:8:64)
    at Observable._trySubscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:41:25)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:35:31
    at Object.errorContext (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\util\errorContext.js:22:9)
    at Observable.subscribe (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\Observable.js:26:24)
    at D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\firstValueFrom.js:24:16
    at new Promise (<anonymous>)
    at firstValueFrom (D:\dev\inkweld\frontend\node_modules\rxjs\dist\cjs\internal\firstValueFrom.js:8:12)
    at _UserService.openSettingsDialog (D:/dev/inkweld/frontend/src/app/services/user/user.service.ts:92:13)

[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2msplit drag end[2m > [22m[2mshould not update split size on mobile
[22m[39mProjectComponent init
Loading project testuser/test-project

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/components/oauth-provider-list/oauth-provider-list.component.spec.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 251[2mms[22m[39m
[90mstdout[2m | src/app/services/worldbuilding/worldbuilding.service.spec.ts[2m > [22m[2mWorldbuildingService[2m > [22m[2mdeleteTemplate[2m > [22m[2mshould delete a custom template from the library
[22m[39m[WorldbuildingService] Deleted custom template: CUSTOM_hero

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/offline/project-sync.service.spec.ts [2m([22m[2m23 tests[22m[2m)[22m[32m 203[2mms[22m[39m
[90mstdout[2m | src/app/services/worldbuilding/worldbuilding.service.spec.ts[2m > [22m[2mWorldbuildingService[2m > [22m[2mupdateTemplate[2m > [22m[2mshould update an existing template in the library
[22m[39m[WorldbuildingService] Updated template CUSTOM_hero to v2

[90mstdout[2m | src/app/services/worldbuilding/worldbuilding.service.spec.ts[2m > [22m[2mWorldbuildingService[2m > [22m[2minitializeWorldbuildingElement[2m > [22m[2mshould initialize element with schema and default values
[22m[39m[WorldbuildingService] Initializing new CHARACTER element test-element-123
[WorldbuildingService] Looking for schema: projectKey="testuser:test-project", elementType="CHARACTER"

[90mstdout[2m | src/app/services/worldbuilding/worldbuilding.service.spec.ts[2m > [22m[2mWorldbuildingService[2m > [22m[2minitializeWorldbuildingElement[2m > [22m[2mshould initialize element with schema and default values
[22m[39m[WorldbuildingService] Schema lookup result: Found Character (v1)
[WorldbuildingService] Embedded schema v1 for character
[WorldbuildingService] Initialized CHARACTER element test-element-123 with schema-based data

[90mstdout[2m | src/app/services/worldbuilding/worldbuilding.service.spec.ts[2m > [22m[2mWorldbuildingService[2m > [22m[2minitializeWorldbuildingElement[2m > [22m[2mshould skip initialization if already initialized
[22m[39m[WorldbuildingService] Element test-element-123 already initialized, skipping

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/components/user-avatar/user-avatar.component.spec.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 207[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/offline/offline-storage.service.spec.ts [2m([22m[2m27 tests[22m[2m)[22m[32m 150[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/components/project-tree/components/tree-node-icon/tree-node-icon.component.spec.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 209[2mms[22m[39m
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/worldbuilding/worldbuilding.service.spec.ts [2m([22m[2m25 tests[22m[2m)[22m[32m 147[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/user/user.service.spec.ts [2m([22m[2m26 tests[22m[2m | [22m[33m2 skipped[39m[2m)[22m[32m 240[2mms[22m[39m
[90mstdout[2m | src/app/services/project/document.service.spec.ts[2m > [22m[2mDocumentService[2m > [22m[2mDocument Connection Management[2m > [22m[2mshould create new document connection
[22m[39m[DocumentService] setupCollaboration called for: testuser:test-project:test-doc
[DocumentService] editor doc size BEFORE: [33m0[39m
[DEBUG][DocumentService] Explicitly initializing sync status for testuser:test-project:test-doc
[DEBUG][DocumentService] Waiting for IndexedDB sync...

[90mstdout[2m | src/app/services/project/document.service.spec.ts[2m > [22m[2mDocumentService[2m > [22m[2mDocument Connection Management[2m > [22m[2mshould create new document connection
[22m[39m[DEBUG][DocumentService] IndexedDB sync complete
[DocumentService] IndexedDB synced, ydoc XML fragment: 
[DocumentService] Editor doc size AFTER sync: [33m0[39m
[DEBUG][DocumentService] Setting up WebSocket connection for document: testuser:test-project:test-doc
[DocumentService] Plugins added, editor doc size: [33m0[39m
[DEBUG][DocumentService] initial word count: 0 for testuser:test-project:test-doc

[90mstdout[2m | src/app/services/project/document.service.spec.ts[2m > [22m[2mDocumentService[2m > [22m[2mDocument Connection Management[2m > [22m[2mshould create new document connection
[22m[39m[INFO][DocumentService] Disconnecting from all documents

[90mstdout[2m | src/app/services/project/document.service.spec.ts[2m > [22m[2mDocumentService[2m > [22m[2mDocument Connection Management[2m > [22m[2mshould reuse existing document connection
[22m[39m[DocumentService] setupCollaboration called for: testuser:test-project:test-doc
[DocumentService] editor doc size BEFORE: [33m0[39m
[DEBUG][DocumentService] Explicitly initializing sync status for testuser:test-project:test-doc
[DEBUG][DocumentService] Waiting for IndexedDB sync...

[90mstdout[2m | src/app/services/project/document.service.spec.ts[2m > [22m[2mDocumentService[2m > [22m[2mDocument Connection Management[2m > [22m[2mshould reuse existing document connection
[22m[39m[DEBUG][DocumentService] IndexedDB sync complete
[DocumentService] IndexedDB synced, ydoc XML fragment: 
[DocumentService] Editor doc size AFTER sync: [33m0[39m
[DEBUG][DocumentService] Setting up WebSocket connection for document: testuser:test-project:test-doc
[DocumentService] Plugins added, editor doc size: [33m0[39m
[DEBUG][DocumentService] initial word count: 0 for testuser:test-project:test-doc

[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2msettings[2m > [22m[2mshould return useTabsDesktop setting
[22m[39mProjectComponent init
Loading project testuser/test-project

[90mstdout[2m | src/app/services/project/document.service.spec.ts[2m > [22m[2mDocumentService[2m > [22m[2mDocument Connection Management[2m > [22m[2mshould reuse existing document connection
[22m[39m[DocumentService] setupCollaboration called for: testuser:test-project:test-doc
[DocumentService] editor doc size BEFORE: [33m0[39m
[DocumentService] Plugins added, editor doc size: [33m0[39m
[DEBUG][DocumentService] initial word count: 0 for testuser:test-project:test-doc

[90mstdout[2m | src/app/services/project/document.service.spec.ts[2m > [22m[2mDocumentService[2m > [22m[2mDocument Connection Management[2m > [22m[2mshould reuse existing document connection
[22m[39m[INFO][DocumentService] Disconnecting from all documents

[90mstdout[2m | src/app/services/project/document.service.spec.ts[2m > [22m[2mDocumentService[2m > [22m[2mDocument Connection Management[2m > [22m[2mshould disconnect specific document
[22m[39m[DocumentService] setupCollaboration called for: testuser:test-project:test-doc
[DocumentService] editor doc size BEFORE: [33m0[39m
[DEBUG][DocumentService] Explicitly initializing sync status for testuser:test-project:test-doc
[DEBUG][DocumentService] Waiting for IndexedDB sync...

[90mstdout[2m | src/app/services/project/document.service.spec.ts[2m > [22m[2mDocumentService[2m > [22m[2mDocument Connection Management[2m > [22m[2mshould disconnect specific document
[22m[39m[DEBUG][DocumentService] IndexedDB sync complete
[DocumentService] IndexedDB synced, ydoc XML fragment: 
[DocumentService] Editor doc size AFTER sync: [33m0[39m
[DEBUG][DocumentService] Setting up WebSocket connection for document: testuser:test-project:test-doc
[DocumentService] Plugins added, editor doc size: [33m0[39m
[DEBUG][DocumentService] initial word count: 0 for testuser:test-project:test-doc

stderr | src/app/services/project/document.service.spec.ts > DocumentService > Document Connection Management > should disconnect specific document
[WARN][DocumentService] Error cleaning up WebSocket provider for testuser:test-project:test-doc TypeError: connection.provider.disconnect is not a function
    at _DocumentService.disconnect (D:/dev/inkweld/frontend/src/app/services/project/document.service.ts:769:33)
    at D:/dev/inkweld/frontend/src/app/services/project/document.service.spec.ts:196:15
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:20

[90mstdout[2m | src/app/services/project/document.service.spec.ts[2m > [22m[2mDocumentService[2m > [22m[2mDocument Connection Management[2m > [22m[2mshould disconnect specific document
[22m[39m[INFO][DocumentService] Disconnecting from testuser:test-project:test-doc
[DEBUG][DocumentService] Clearing awareness for clientID undefined on disconnect

[90mstdout[2m | src/app/services/project/document.service.spec.ts[2m > [22m[2mDocumentService[2m > [22m[2mDocument Connection Management[2m > [22m[2mshould disconnect specific document
[22m[39m[INFO][DocumentService] Disconnecting from all documents

stderr | src/app/services/user/unified-user.service.spec.ts > UnifiedUserService > server mode > should handle initialization error gracefully
Failed to load user from server: Error: Network error
    at D:/dev/inkweld/frontend/src/app/services/user/unified-user.service.spec.ts:129:53
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:26
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1237:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1203:10)
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:37
    at Traces.$ (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/test.DqQZzsWf.js:234:21)
    at runTest (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:12)

[90mstdout[2m | src/app/services/project/document.service.spec.ts[2m > [22m[2mDocumentService[2m > [22m[2mDocument Connection Management[2m > [22m[2mshould disconnect all documents
[22m[39m[DocumentService] setupCollaboration called for: testuser:test-project:test-doc
[DocumentService] editor doc size BEFORE: [33m0[39m
[DEBUG][DocumentService] Explicitly initializing sync status for testuser:test-project:test-doc
[DEBUG][DocumentService] Waiting for IndexedDB sync...

[90mstdout[2m | src/app/services/project/document.service.spec.ts[2m > [22m[2mDocumentService[2m > [22m[2mDocument Connection Management[2m > [22m[2mshould disconnect all documents
[22m[39m[DEBUG][DocumentService] IndexedDB sync complete
[DocumentService] IndexedDB synced, ydoc XML fragment: 
[DocumentService] Editor doc size AFTER sync: [33m0[39m
[DEBUG][DocumentService] Setting up WebSocket connection for document: testuser:test-project:test-doc
[DocumentService] Plugins added, editor doc size: [33m0[39m
[DEBUG][DocumentService] initial word count: 0 for testuser:test-project:test-doc

[90mstdout[2m | src/app/services/project/document.service.spec.ts[2m > [22m[2mDocumentService[2m > [22m[2mDocument Connection Management[2m > [22m[2mshould disconnect all documents
[22m[39m[INFO][DocumentService] Disconnecting from all documents

[90mstdout[2m | src/app/services/project/document.service.spec.ts[2m > [22m[2mDocumentService[2m > [22m[2mDocument Connection Management[2m > [22m[2mshould disconnect all documents
[22m[39m[INFO][DocumentService] Disconnecting from all documents

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/core/setup.service.spec.ts [2m([22m[2m32 tests[22m[2m)[22m[32m 204[2mms[22m[39m
[90mstdout[2m | src/app/services/project/document.service.spec.ts[2m > [22m[2mDocumentService[2m > [22m[2mSync Status Management[2m > [22m[2mshould initialize with Offline status
[22m[39m[DEBUG][DocumentService] Explicitly initializing sync status for testuser:test-project:test-doc

[90mstdout[2m | src/app/services/project/document.service.spec.ts[2m > [22m[2mDocumentService[2m > [22m[2mSync Status Management[2m > [22m[2mshould initialize with Offline status
[22m[39m[INFO][DocumentService] Disconnecting from all documents

[90mstdout[2m | src/app/services/project/document.service.spec.ts[2m > [22m[2mDocumentService[2m > [22m[2mDocument Import/Export[2m > [22m[2mshould throw error when exporting non-existent document
[22m[39m[INFO][DocumentService] Disconnecting from all documents

[90mstdout[2m | src/app/pages/project/tabs/document/document-tab.component.spec.ts[2m > [22m[2mDocumentTabComponent[2m > [22m[2mshould create
[22m[39mMock document editor initialized

[90mstdout[2m | src/app/services/project/document.service.spec.ts[2m > [22m[2mDocumentService[2m > [22m[2mDocument Import/Export[2m > [22m[2mshould throw error when importing to non-existent document
[22m[39m[INFO][DocumentService] Disconnecting from all documents

[90mstdout[2m | src/app/pages/project/tabs/document/document-tab.component.spec.ts[2m > [22m[2mDocumentTabComponent[2m > [22m[2mshould create
[22m[39mMock document editor destroyed

[90mstdout[2m | src/app/services/project/document.service.spec.ts[2m > [22m[2mDocumentService[2m > [22m[2mCollaboration Setup[2m > [22m[2mshould handle editor initialization errors
[22m[39m[DocumentService] setupCollaboration called for: testuser:test-project:test-doc
[DocumentService] editor doc size BEFORE: [90mundefined[39m

[90mstdout[2m | src/app/services/project/document.service.spec.ts[2m > [22m[2mDocumentService[2m > [22m[2mCollaboration Setup[2m > [22m[2mshould handle editor initialization errors
[22m[39m[INFO][DocumentService] Disconnecting from all documents

[90mstdout[2m | src/app/pages/project/tabs/document/document-tab.component.spec.ts[2m > [22m[2mDocumentTabComponent[2m > [22m[2mfullDocumentId computed signal[2m > [22m[2mshould return empty string when no tabs are open
[22m[39mMock document editor initialized

[90mstdout[2m | src/app/pages/project/tabs/document/document-tab.component.spec.ts[2m > [22m[2mDocumentTabComponent[2m > [22m[2mfullDocumentId computed signal[2m > [22m[2mshould return empty string when no tabs are open
[22m[39mMock document editor destroyed

[90mstdout[2m | src/app/services/project/document.service.spec.ts[2m > [22m[2mDocumentService[2m > [22m[2mCollaboration Setup[2m > [22m[2mshould throw error when connection is not properly initialized
[22m[39m[DocumentService] setupCollaboration called for: testuser:test-project:test-doc
[DocumentService] editor doc size BEFORE: [33m0[39m
[DEBUG][DocumentService] Explicitly initializing sync status for testuser:test-project:test-doc
[DEBUG][DocumentService] Waiting for IndexedDB sync...

[90mstdout[2m | src/app/services/project/document.service.spec.ts[2m > [22m[2mDocumentService[2m > [22m[2mCollaboration Setup[2m > [22m[2mshould throw error when connection is not properly initialized
[22m[39m[DEBUG][DocumentService] IndexedDB sync complete
[DocumentService] IndexedDB synced, ydoc XML fragment: 
[DocumentService] Editor doc size AFTER sync: [33m0[39m
[DEBUG][DocumentService] Setting up WebSocket connection for document: testuser:test-project:test-doc
[DocumentService] Plugins added, editor doc size: [33m0[39m
[DEBUG][DocumentService] initial word count: 0 for testuser:test-project:test-doc

[90mstdout[2m | src/app/services/project/document.service.spec.ts[2m > [22m[2mDocumentService[2m > [22m[2mCollaboration Setup[2m > [22m[2mshould throw error when connection is not properly initialized
[22m[39m[DocumentService] setupCollaboration called for: testuser:test-project:test-doc
[DocumentService] editor doc size BEFORE: [33m0[39m

[90mstdout[2m | src/app/services/project/document.service.spec.ts[2m > [22m[2mDocumentService[2m > [22m[2mCollaboration Setup[2m > [22m[2mshould throw error when connection is not properly initialized
[22m[39m[INFO][DocumentService] Disconnecting from all documents

[90mstdout[2m | src/app/pages/project/tabs/document/document-tab.component.spec.ts[2m > [22m[2mDocumentTabComponent[2m > [22m[2mfullDocumentId computed signal[2m > [22m[2mshould return empty string when selectedTabIndex is 0 (home)
[22m[39mMock document editor initialized

[90mstdout[2m | src/app/services/project/document.service.spec.ts[2m > [22m[2mDocumentService[2m > [22m[2mUnsynced Changes Tracking[2m > [22m[2mshould return false for hasUnsyncedChanges on non-existent document
[22m[39m[INFO][DocumentService] Disconnecting from all documents

[90mstdout[2m | src/app/pages/project/tabs/document/document-tab.component.spec.ts[2m > [22m[2mDocumentTabComponent[2m > [22m[2mfullDocumentId computed signal[2m > [22m[2mshould return empty string when selectedTabIndex is 0 (home)
[22m[39mMock document editor destroyed

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/project/element-tree.service.spec.ts [2m([22m[2m53 tests[22m[2m)[22m[32m 167[2mms[22m[39m
stderr | src/app/services/offline/offline-project.service.spec.ts > OfflineProjectService > createProject > should handle localStorage errors
Failed to save offline projects: Error: Storage quota exceeded
    at Object.<anonymous> (D:/dev/inkweld/frontend/src/app/services/offline/offline-project.service.spec.ts:239:15)
    at Object.Mock [as setItem] (file:///D:/dev/inkweld/frontend/node_modules/@vitest/spy/dist/index.js:280:34)
    at _OfflineProjectService.saveProjects (D:/dev/inkweld/frontend/src/app/services/offline/offline-project.service.ts:229:20)
    at _OfflineProjectService.createProject (D:/dev/inkweld/frontend/src/app/services/offline/offline-project.service.ts:92:12)
    at D:/dev/inkweld/frontend/src/app/services/offline/offline-project.service.spec.ts:246:28
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:26
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1237:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1203:10)

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/publish/publish-plan.service.spec.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 87[2mms[22m[39m
[90mstdout[2m | src/app/pages/project/tabs/document/document-tab.component.spec.ts[2m > [22m[2mDocumentTabComponent[2m > [22m[2mfullDocumentId computed signal[2m > [22m[2mshould return empty string when tab has no element
[22m[39mMock document editor initialized

[90mstdout[2m | src/app/pages/project/tabs/document/document-tab.component.spec.ts[2m > [22m[2mDocumentTabComponent[2m > [22m[2mfullDocumentId computed signal[2m > [22m[2mshould return empty string when tab has no element
[22m[39mMock document editor destroyed

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/project/document.service.spec.ts [2m([22m[2m21 tests[22m[2m | [22m[33m11 skipped[39m[2m)[22m[32m 152[2mms[22m[39m
[90mstdout[2m | src/app/pages/project/tabs/document/document-tab.component.spec.ts[2m > [22m[2mDocumentTabComponent[2m > [22m[2mfullDocumentId computed signal[2m > [22m[2mshould return empty string when project is undefined
[22m[39mMock document editor initialized

[90mstdout[2m | src/app/pages/project/tabs/document/document-tab.component.spec.ts[2m > [22m[2mDocumentTabComponent[2m > [22m[2mfullDocumentId computed signal[2m > [22m[2mshould return empty string when project is undefined
[22m[39mMock document editor destroyed

[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mfile import[2m > [22m[2mshould trigger file input click on import
[22m[39mProjectComponent init
Loading project testuser/test-project

[90mstdout[2m | src/app/pages/project/tabs/document/document-tab.component.spec.ts[2m > [22m[2mDocumentTabComponent[2m > [22m[2mfullDocumentId computed signal[2m > [22m[2mshould return properly formatted document ID when all data is available
[22m[39mMock document editor initialized

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/user/unified-user.service.spec.ts [2m([22m[2m24 tests[22m[2m)[22m[32m 129[2mms[22m[39m
[90mstdout[2m | src/app/pages/project/tabs/document/document-tab.component.spec.ts[2m > [22m[2mDocumentTabComponent[2m > [22m[2mfullDocumentId computed signal[2m > [22m[2mshould return properly formatted document ID when all data is available
[22m[39mMock document editor destroyed

[90mstdout[2m | src/app/pages/project/tabs/document/document-tab.component.spec.ts[2m > [22m[2mDocumentTabComponent[2m > [22m[2mfullDocumentId computed signal[2m > [22m[2mshould return correct document ID for second tab
[22m[39mMock document editor initialized

[90mstdout[2m | src/app/pages/project/tabs/document/document-tab.component.spec.ts[2m > [22m[2mDocumentTabComponent[2m > [22m[2mfullDocumentId computed signal[2m > [22m[2mshould return correct document ID for second tab
[22m[39mMock document editor destroyed

[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2mloadElements[2m > [22m[2mshould load elements from localStorage
[22m[39m[INFO][OfflineProjectElements] Migrating 1 elements from localStorage to Yjs for testuser:test-project
[INFO][OfflineProjectElements] Successfully migrated elements for testuser:test-project
[DEBUG][OfflineProjectElements] Created Yjs connection for testuser:test-project:elements

[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2mloadElements[2m > [22m[2mshould load elements from localStorage
[22m[39m[DEBUG][OfflineProjectElements] Loaded 1 elements for testuser/test-project

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/project/tab-manager.service.spec.ts [2m([22m[2m38 tests[22m[2m)[22m[32m 200[2mms[22m[39m
[90mstdout[2m | src/app/pages/project/tabs/document/document-tab.component.spec.ts[2m > [22m[2mDocumentTabComponent[2m > [22m[2museTabsDesktop[2m > [22m[2mshould return settings value for useTabsDesktop
[22m[39mMock document editor initialized

[90mstdout[2m | src/app/pages/project/tabs/document/document-tab.component.spec.ts[2m > [22m[2mDocumentTabComponent[2m > [22m[2museTabsDesktop[2m > [22m[2mshould return settings value for useTabsDesktop
[22m[39mMock document editor destroyed

[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2mloadElements[2m > [22m[2mshould handle empty IndexedDB
[22m[39m[DEBUG][OfflineProjectElements] Created Yjs connection for testuser:test-project:elements

[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2mloadElements[2m > [22m[2mshould handle empty IndexedDB
[22m[39m[DEBUG][OfflineProjectElements] Loaded 0 elements for testuser/test-project

[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2mloadElements[2m > [22m[2mshould handle localStorage parse errors
[22m[39m[DEBUG][OfflineProjectElements] Created Yjs connection for testuser:test-project:elements

[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2mloadElements[2m > [22m[2mshould handle localStorage parse errors
[22m[39m[DEBUG][OfflineProjectElements] Loaded 0 elements for testuser/test-project

[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2msaveElements[2m > [22m[2mshould save elements using Yjs
[22m[39m[DEBUG][OfflineProjectElements] Created Yjs connection for testuser:test-project:elements

[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2msaveElements[2m > [22m[2mshould save elements using Yjs
[22m[39m[DEBUG][OfflineProjectElements] Saved 1 elements for testuser/test-project

[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2msaveElements[2m > [22m[2mshould handle save errors
[22m[39m[DEBUG][OfflineProjectElements] Created Yjs connection for testuser:test-project:elements

[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2msaveElements[2m > [22m[2mshould handle save errors
[22m[39m[DEBUG][OfflineProjectElements] Saved 0 elements for testuser/test-project

[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2mcreateDefaultStructure[2m > [22m[2mshould create default project structure
[22m[39m[DEBUG][OfflineProjectElements] Created Yjs connection for testuser:test-project:elements

[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2mcreateDefaultStructure[2m > [22m[2mshould create default project structure
[22m[39m[DEBUG][OfflineProjectElements] Saved 4 elements for testuser/test-project

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/offline/offline-project.service.spec.ts [2m([22m[2m23 tests[22m[2m)[22m[32m 131[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/pages/project/tabs/document/document-tab.component.spec.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 150[2mms[22m[39m
[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2maddElement[2m > [22m[2mshould add element at root level
[22m[39m[INFO][OfflineProjectElements] Migrating 1 elements from localStorage to Yjs for testuser:test-project
[INFO][OfflineProjectElements] Successfully migrated elements for testuser:test-project
[DEBUG][OfflineProjectElements] Created Yjs connection for testuser:test-project:elements

[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2maddElement[2m > [22m[2mshould add element at root level
[22m[39m[DEBUG][OfflineProjectElements] Saved 2 elements for testuser/test-project

[90mstdout[2m | src/app/services/auth/xsrf.service.spec.ts[2m > [22m[2mXsrfService[2m > [22m[2mrefreshToken()[2m > [22m[2mshould fetch token using SecurityService
[22m[39m[DEBUG][XsrfService] Refreshing CSRF token from server

[90mstdout[2m | src/app/services/auth/xsrf.service.spec.ts[2m > [22m[2mXsrfService[2m > [22m[2mrefreshToken()[2m > [22m[2mshould fetch token using SecurityService
[22m[39m[DEBUG][XsrfService] Successfully refreshed CSRF token

[90mstdout[2m | src/app/services/auth/xsrf.service.spec.ts[2m > [22m[2mXsrfService[2m > [22m[2mrefreshToken()[2m > [22m[2mshould return empty string when API fails and no cookie exists
[22m[39m[DEBUG][XsrfService] Refreshing CSRF token from server

[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2maddElement[2m > [22m[2mshould add element as child of folder
[22m[39m[INFO][OfflineProjectElements] Migrating 1 elements from localStorage to Yjs for testuser:test-project
[INFO][OfflineProjectElements] Successfully migrated elements for testuser:test-project
[DEBUG][OfflineProjectElements] Created Yjs connection for testuser:test-project:elements

stderr | src/app/services/auth/xsrf.service.spec.ts > XsrfService > refreshToken() > should return empty string when API fails and no cookie exists
[ERROR][XsrfService] Failed to fetch CSRF token Error: API error
    at Object.<anonymous> (D:/dev/inkweld/frontend/src/app/services/auth/xsrf.service.spec.ts:50:15)
    at Object.Mock [as getCSRFToken] (file:///D:/dev/inkweld/frontend/node_modules/@vitest/spy/dist/index.js:280:34)
    at _XsrfService.refreshToken (D:/dev/inkweld/frontend/src/app/services/auth/xsrf.service.ts:40:30)
    at D:/dev/inkweld/frontend/src/app/services/auth/xsrf.service.spec.ts:53:35
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:26
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1237:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1203:10)
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:37

[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2maddElement[2m > [22m[2mshould add element as child of folder
[22m[39m[DEBUG][OfflineProjectElements] Saved 2 elements for testuser/test-project

[90mstdout[2m | src/app/services/auth/xsrf.service.spec.ts[2m > [22m[2mXsrfService[2m > [22m[2mgetToken()[2m > [22m[2mshould return cached token if not expired
[22m[39m[DEBUG][XsrfService] Refreshing CSRF token from server

[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2mdeleteElement[2m > [22m[2mshould delete single element
[22m[39m[INFO][OfflineProjectElements] Migrating 4 elements from localStorage to Yjs for testuser:test-project
[INFO][OfflineProjectElements] Successfully migrated elements for testuser:test-project
[DEBUG][OfflineProjectElements] Created Yjs connection for testuser:test-project:elements

[90mstdout[2m | src/app/services/auth/xsrf.service.spec.ts[2m > [22m[2mXsrfService[2m > [22m[2mgetToken()[2m > [22m[2mshould return cached token if not expired
[22m[39m[DEBUG][XsrfService] Successfully refreshed CSRF token

[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2mdeleteElement[2m > [22m[2mshould delete single element
[22m[39m[DEBUG][OfflineProjectElements] Saved 3 elements for testuser/test-project

[90mstdout[2m | src/app/services/auth/xsrf.service.spec.ts[2m > [22m[2mXsrfService[2m > [22m[2mgetToken()[2m > [22m[2mshould refresh token if expired
[22m[39m[DEBUG][XsrfService] Refreshing CSRF token from server

[90mstdout[2m | src/app/services/auth/xsrf.service.spec.ts[2m > [22m[2mXsrfService[2m > [22m[2mgetToken()[2m > [22m[2mshould refresh token if expired
[22m[39m[DEBUG][XsrfService] Successfully refreshed CSRF token

[90mstdout[2m | src/app/services/auth/xsrf.service.spec.ts[2m > [22m[2mXsrfService[2m > [22m[2mgetToken()[2m > [22m[2mshould refresh token if expired
[22m[39m[DEBUG][XsrfService] Refreshing CSRF token from server

[90mstdout[2m | src/app/services/auth/xsrf.service.spec.ts[2m > [22m[2mXsrfService[2m > [22m[2mgetToken()[2m > [22m[2mshould refresh token if expired
[22m[39m[DEBUG][XsrfService] Successfully refreshed CSRF token

[90mstdout[2m | src/app/services/auth/xsrf.service.spec.ts[2m > [22m[2mXsrfService[2m > [22m[2mgetXsrfToken()[2m > [22m[2mshould return token from cookie if available
[22m[39m[DEBUG][XsrfService] Updating stored token from cookie

[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2mdeleteElement[2m > [22m[2mshould delete element with subtree
[22m[39m[INFO][OfflineProjectElements] Migrating 4 elements from localStorage to Yjs for testuser:test-project
[INFO][OfflineProjectElements] Successfully migrated elements for testuser:test-project
[DEBUG][OfflineProjectElements] Created Yjs connection for testuser:test-project:elements

[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2mdeleteElement[2m > [22m[2mshould delete element with subtree
[22m[39m[DEBUG][OfflineProjectElements] Saved 1 elements for testuser/test-project

[90mstdout[2m | src/app/services/offline/migration.service.spec.ts[2m > [22m[2mMigrationService[2m > [22m[2mcleanupOfflineData[2m > [22m[2mshould delete all offline projects
[22m[39m[Migration] Before cleanup - app-config: [1mnull[22m
[Migration] Before cleanup - auth_token: MISSING
[Migration] Before cleanup - offline-user: [1mnull[22m
[Migration] After cleanup - app-config: [1mnull[22m
[Migration] After cleanup - auth_token: MISSING
[Migration] After cleanup - offline-user: [1mnull[22m

[90mstdout[2m | src/app/services/auth/xsrf.service.spec.ts[2m > [22m[2mXsrfService[2m > [22m[2mgetXsrfToken()[2m > [22m[2mshould return stored token if no cookie
[22m[39m[DEBUG][XsrfService] Refreshing CSRF token from server

[90mstdout[2m | src/app/services/auth/xsrf.service.spec.ts[2m > [22m[2mXsrfService[2m > [22m[2mgetXsrfToken()[2m > [22m[2mshould return stored token if no cookie
[22m[39m[DEBUG][XsrfService] Successfully refreshed CSRF token

[90mstdout[2m | src/app/services/offline/migration.service.spec.ts[2m > [22m[2mMigrationService[2m > [22m[2mcleanupOfflineData[2m > [22m[2mshould clear offline localStorage items
[22m[39m[Migration] Before cleanup - app-config: [1mnull[22m
[Migration] Before cleanup - auth_token: EXISTS
[Migration] Before cleanup - offline-user: test-user
[Migration] After cleanup - app-config: [1mnull[22m
[Migration] After cleanup - auth_token: EXISTS
[Migration] After cleanup - offline-user: [1mnull[22m

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/interceptors/csrf.interceptor.spec.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 144[2mms[22m[39m
[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2mmoveElement[2m > [22m[2mshould move element to different position
[22m[39m[INFO][OfflineProjectElements] Migrating 3 elements from localStorage to Yjs for testuser:test-project
[INFO][OfflineProjectElements] Successfully migrated elements for testuser:test-project
[DEBUG][OfflineProjectElements] Created Yjs connection for testuser:test-project:elements

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/project/project-state.service.spec.ts [2m([22m[2m29 tests[22m[2m)[22m[32m 166[2mms[22m[39m
[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2mmoveElement[2m > [22m[2mshould move element to different position
[22m[39m[DEBUG][OfflineProjectElements] Saved 3 elements for testuser/test-project

[90mstdout[2m | src/app/services/auth/xsrf.service.spec.ts[2m > [22m[2mXsrfService[2m > [22m[2mgetXsrfToken()[2m > [22m[2mshould update stored token if cookie token differs
[22m[39m[DEBUG][XsrfService] Refreshing CSRF token from server

[90mstdout[2m | src/app/services/auth/xsrf.service.spec.ts[2m > [22m[2mXsrfService[2m > [22m[2mgetXsrfToken()[2m > [22m[2mshould update stored token if cookie token differs
[22m[39m[DEBUG][XsrfService] Successfully refreshed CSRF token

[90mstdout[2m | src/app/services/offline/migration.service.spec.ts[2m > [22m[2mMigrationService[2m > [22m[2mcleanupOfflineData[2m > [22m[2mshould log cleanup operation
[22m[39m[Migration] Before cleanup - app-config: [1mnull[22m
[Migration] Before cleanup - auth_token: MISSING
[Migration] Before cleanup - offline-user: [1mnull[22m
[Migration] After cleanup - app-config: [1mnull[22m
[Migration] After cleanup - auth_token: MISSING
[Migration] After cleanup - offline-user: [1mnull[22m

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/offline/unified-project.service.spec.ts [2m([22m[2m31 tests[22m[2m)[22m[32m 145[2mms[22m[39m
[90mstdout[2m | src/app/services/auth/xsrf.service.spec.ts[2m > [22m[2mXsrfService[2m > [22m[2mgetXsrfToken()[2m > [22m[2mshould update stored token if cookie token differs
[22m[39m[DEBUG][XsrfService] Updating stored token from cookie

[90mstdout[2m | src/app/services/offline/migration.service.spec.ts[2m > [22m[2mMigrationService[2m > [22m[2mcleanupOfflineData[2m > [22m[2mshould handle empty projects list
[22m[39m[Migration] Before cleanup - app-config: [1mnull[22m
[Migration] Before cleanup - auth_token: MISSING
[Migration] Before cleanup - offline-user: [1mnull[22m
[Migration] After cleanup - app-config: [1mnull[22m
[Migration] After cleanup - auth_token: MISSING
[Migration] After cleanup - offline-user: [1mnull[22m

[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2mmoveElement[2m > [22m[2mshould change element level when moving
[22m[39m[INFO][OfflineProjectElements] Migrating 3 elements from localStorage to Yjs for testuser:test-project
[INFO][OfflineProjectElements] Successfully migrated elements for testuser:test-project
[DEBUG][OfflineProjectElements] Created Yjs connection for testuser:test-project:elements

[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2mmoveElement[2m > [22m[2mshould change element level when moving
[22m[39m[DEBUG][OfflineProjectElements] Saved 3 elements for testuser/test-project

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
[90mstdout[2m | src/app/services/auth/xsrf.service.spec.ts[2m > [22m[2mXsrfService[2m > [22m[2mcookie initialization[2m > [22m[2mshould initialize token from cookie on construction
[22m[39m[DEBUG][XsrfService] Initialized CSRF token from cookie

[90mstdout[2m | src/app/services/auth/xsrf.service.spec.ts[2m > [22m[2mXsrfService[2m > [22m[2merror handling[2m > [22m[2mshould handle invalid token format from server
[22m[39m[DEBUG][XsrfService] Refreshing CSRF token from server

stderr | src/app/services/auth/xsrf.service.spec.ts > XsrfService > error handling > should handle invalid token format from server
[ERROR][XsrfService] Failed to fetch CSRF token Error: Invalid token format received from server
    at _XsrfService.refreshToken (D:/dev/inkweld/frontend/src/app/services/auth/xsrf.service.ts:44:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:/dev/inkweld/frontend/src/app/services/auth/xsrf.service.spec.ts:184:21
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:20

[90mstdout[2m | src/app/services/auth/xsrf.service.spec.ts[2m > [22m[2mXsrfService[2m > [22m[2merror handling[2m > [22m[2mshould handle missing token in response
[22m[39m[DEBUG][XsrfService] Refreshing CSRF token from server

[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2mrenameElement[2m > [22m[2mshould rename element
[22m[39m[INFO][OfflineProjectElements] Migrating 1 elements from localStorage to Yjs for testuser:test-project
[INFO][OfflineProjectElements] Successfully migrated elements for testuser:test-project
[DEBUG][OfflineProjectElements] Created Yjs connection for testuser:test-project:elements

stderr | src/app/services/auth/xsrf.service.spec.ts > XsrfService > error handling > should handle missing token in response
[ERROR][XsrfService] Failed to fetch CSRF token Error: Invalid token format received from server
    at _XsrfService.refreshToken (D:/dev/inkweld/frontend/src/app/services/auth/xsrf.service.ts:44:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:/dev/inkweld/frontend/src/app/services/auth/xsrf.service.spec.ts:192:21
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:20

[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2mrenameElement[2m > [22m[2mshould rename element
[22m[39m[DEBUG][OfflineProjectElements] Saved 1 elements for testuser/test-project

[90mstdout[2m | src/app/services/auth/xsrf.service.spec.ts[2m > [22m[2mXsrfService[2m > [22m[2merror handling[2m > [22m[2mshould use cookie fallback when API throws error
[22m[39m[DEBUG][XsrfService] Refreshing CSRF token from server
[DEBUG][XsrfService] Using CSRF token from cookie as fallback

stderr | src/app/services/auth/xsrf.service.spec.ts > XsrfService > error handling > should use cookie fallback when API throws error
[ERROR][XsrfService] Failed to fetch CSRF token Error: Network error
    at Object.<anonymous> (D:/dev/inkweld/frontend/src/app/services/auth/xsrf.service.spec.ts:199:15)
    at Object.Mock [as getCSRFToken] (file:///D:/dev/inkweld/frontend/node_modules/@vitest/spy/dist/index.js:280:34)
    at _XsrfService.refreshToken (D:/dev/inkweld/frontend/src/app/services/auth/xsrf.service.ts:40:30)
    at D:/dev/inkweld/frontend/src/app/services/auth/xsrf.service.spec.ts:205:35
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:26
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1237:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1203:10)
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:37

[90mstdout[2m | src/app/components/bookshelf/bookshelf.component.spec.ts[2m > [22m[2mBookshelfComponent[2m > [22m[2mProject Selection[2m > [22m[2mshould emit selected project when clicking on active card
[22m[39m[Bookshelf] selectProject called
[Bookshelf] recentlyDragged: [33mfalse[39m
[Bookshelf] recentlyScrolled: [33mfalse[39m
[Bookshelf] Project clicked: {
  clickedProject: { username: [32m'testuser'[39m, slug: [32m'project-1'[39m, title: [32m'Project 1'[39m },
  clickedIndex: [33m0[39m,
  currentActiveIndex: [33m0[39m,
  allProjects: [
    { username: [32m'testuser'[39m, slug: [32m'project-1'[39m, title: [32m'Project 1'[39m },
    { username: [32m'testuser'[39m, slug: [32m'project-2'[39m, title: [32m'Project 2'[39m },
    { username: [32m'testuser'[39m, slug: [32m'project-3'[39m, title: [32m'Project 3'[39m }
  ]
}
[Bookshelf] Emitting projectSelected event for: { username: [32m'testuser'[39m, slug: [32m'project-1'[39m, title: [32m'Project 1'[39m }

[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2mproject isolation[2m > [22m[2mshould isolate elements by project key
[22m[39m[INFO][OfflineProjectElements] Migrating 1 elements from localStorage to Yjs for user1:project1
[INFO][OfflineProjectElements] Successfully migrated elements for user1:project1
[DEBUG][OfflineProjectElements] Created Yjs connection for user1:project1:elements

[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2mproject isolation[2m > [22m[2mshould isolate elements by project key
[22m[39m[DEBUG][OfflineProjectElements] Loaded 1 elements for user1/project1

[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2mproject isolation[2m > [22m[2mshould isolate elements by project key
[22m[39m[INFO][OfflineProjectElements] Migrating 1 elements from localStorage to Yjs for user2:project2
[INFO][OfflineProjectElements] Successfully migrated elements for user2:project2
[DEBUG][OfflineProjectElements] Created Yjs connection for user2:project2:elements

[90mstdout[2m | src/app/services/offline/offline-project-elements.service.spec.ts[2m > [22m[2mOfflineProjectElementsService[2m > [22m[2mproject isolation[2m > [22m[2mshould isolate elements by project key
[22m[39m[DEBUG][OfflineProjectElements] Loaded 1 elements for user2/project2

[90mstdout[2m | src/app/components/bookshelf/bookshelf.component.spec.ts[2m > [22m[2mBookshelfComponent[2m > [22m[2mProject Selection[2m > [22m[2mshould scroll to card but not emit when clicking on non-active card
[22m[39m[Bookshelf] selectProject called
[Bookshelf] recentlyDragged: [33mfalse[39m
[Bookshelf] recentlyScrolled: [33mfalse[39m
[Bookshelf] Project clicked: {
  clickedProject: { username: [32m'testuser'[39m, slug: [32m'project-2'[39m, title: [32m'Project 2'[39m },
  clickedIndex: [33m1[39m,
  currentActiveIndex: [33m0[39m,
  allProjects: [
    { username: [32m'testuser'[39m, slug: [32m'project-1'[39m, title: [32m'Project 1'[39m },
    { username: [32m'testuser'[39m, slug: [32m'project-2'[39m, title: [32m'Project 2'[39m },
    { username: [32m'testuser'[39m, slug: [32m'project-3'[39m, title: [32m'Project 3'[39m }
  ]
}
[Bookshelf] Scrolling to card index: [33m1[39m

stderr | src/app/services/project/project-file.service.spec.ts > ProjectFileService > error handling > handles getProjectFiles API error
Error fetching project files: Error: Network failure
    at D:/dev/inkweld/frontend/src/app/services/project/project-file.service.spec.ts:167:24
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:26
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1237:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1203:10)
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:37
    at Traces.$ (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/test.DqQZzsWf.js:234:21)
    at runTest (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:12)

[90mstdout[2m | src/app/components/bookshelf/bookshelf.component.spec.ts[2m > [22m[2mBookshelfComponent[2m > [22m[2mProject Selection[2m > [22m[2mshould not emit or scroll when recently dragged
[22m[39m[Bookshelf] selectProject called
[Bookshelf] recentlyDragged: [33mtrue[39m
[Bookshelf] recentlyScrolled: [33mfalse[39m
[Bookshelf] Ignoring click - recently dragged

[90mstdout[2m | src/app/components/bookshelf/bookshelf.component.spec.ts[2m > [22m[2mBookshelfComponent[2m > [22m[2mProject Selection[2m > [22m[2mshould not emit or scroll when recently scrolled
[22m[39m[Bookshelf] selectProject called
[Bookshelf] recentlyDragged: [33mfalse[39m
[Bookshelf] recentlyScrolled: [33mtrue[39m
[Bookshelf] Ignoring click - recently scrolled

stderr | src/app/services/project/project-file.service.spec.ts > ProjectFileService > error handling > handles uploadFile API error
Error uploading file: Error: Upload failed
    at D:/dev/inkweld/frontend/src/app/services/project/project-file.service.spec.ts:184:24
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:26
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1237:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1203:10)
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:37
    at Traces.$ (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/test.DqQZzsWf.js:234:21)
    at runTest (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:12)

[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mfile import[2m > [22m[2mshould handle file selection
[22m[39mProjectComponent init
Loading project testuser/test-project

[90mstdout[2m | src/app/components/bookshelf/bookshelf.component.spec.ts[2m > [22m[2mBookshelfComponent[2m > [22m[2mProject Selection[2m > [22m[2mshould set recentlyScrolled flag when scrolling to non-active card
[22m[39m[Bookshelf] selectProject called
[Bookshelf] recentlyDragged: [33mfalse[39m
[Bookshelf] recentlyScrolled: [33mfalse[39m
[Bookshelf] Project clicked: {
  clickedProject: { username: [32m'testuser'[39m, slug: [32m'project-2'[39m, title: [32m'Project 2'[39m },
  clickedIndex: [33m1[39m,
  currentActiveIndex: [33m0[39m,
  allProjects: [
    { username: [32m'testuser'[39m, slug: [32m'project-1'[39m, title: [32m'Project 1'[39m },
    { username: [32m'testuser'[39m, slug: [32m'project-2'[39m, title: [32m'Project 2'[39m },
    { username: [32m'testuser'[39m, slug: [32m'project-3'[39m, title: [32m'Project 3'[39m }
  ]
}
[Bookshelf] Scrolling to card index: [33m1[39m
[Bookshelf] Scroll cooldown complete, clicks enabled

stderr | src/app/services/project/project-file.service.spec.ts > ProjectFileService > error handling > handles deleteFile API error
Error deleting file: Error: Delete failed
    at D:/dev/inkweld/frontend/src/app/services/project/project-file.service.spec.ts:202:24
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:912:26
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1237:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1203:10)
    at file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:37
    at Traces.$ (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///D:/dev/inkweld/frontend/node_modules/vitest/dist/chunks/test.DqQZzsWf.js:234:21)
    at runTest (file:///D:/dev/inkweld/frontend/node_modules/@vitest/runner/dist/index.js:1647:12)

stderr | src/app/services/project/project-file.service.spec.ts > ProjectFileService > error handling > handles non-Error object in getProjectFiles error
Error fetching project files: string error

stderr | src/app/services/project/project-file.service.spec.ts > ProjectFileService > error handling > handles non-Error object in uploadFile error
Error uploading file: string error

stderr | src/app/services/project/project-file.service.spec.ts > ProjectFileService > error handling > handles non-Error object in deleteFile error
Error deleting file: string error

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/themes/theme.service.spec.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 96[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/offline/migration.service.spec.ts [2m([22m[2m24 tests[22m[2m)[22m[32m 113[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/offline/offline-project-elements.service.spec.ts [2m([22m[2m19 tests[22m[2m | [22m[33m1 skipped[39m[2m)[22m[32m 180[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/project/project-file.service.spec.ts [2m([22m[2m19 tests[22m[2m)[22m[32m 100[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/auth/xsrf.service.spec.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 68[2mms[22m[39m
[90mstdout[2m | src/app/components/bookshelf/bookshelf.component.spec.ts[2m > [22m[2mBookshelfComponent[2m > [22m[2mProject selection edge cases[2m > [22m[2mshould handle selecting a project when recentlyDragged is true
[22m[39m[Bookshelf] selectProject called
[Bookshelf] recentlyDragged: [33mtrue[39m
[Bookshelf] recentlyScrolled: [33mfalse[39m
[Bookshelf] Ignoring click - recently dragged

[90mstdout[2m | src/app/components/bookshelf/bookshelf.component.spec.ts[2m > [22m[2mBookshelfComponent[2m > [22m[2mProject selection edge cases[2m > [22m[2mshould handle project selection when project is not found in array
[22m[39m[Bookshelf] selectProject called
[Bookshelf] recentlyDragged: [33mfalse[39m
[Bookshelf] recentlyScrolled: [33mfalse[39m
[Bookshelf] Project clicked: {
  clickedProject: { username: [32m'testuser'[39m, slug: [32m'unknown'[39m, title: [32m'Unknown'[39m },
  clickedIndex: [33m-1[39m,
  currentActiveIndex: [33m-1[39m,
  allProjects: [
    { username: [32m'testuser'[39m, slug: [32m'project-1'[39m, title: [32m'Project 1'[39m },
    { username: [32m'testuser'[39m, slug: [32m'project-2'[39m, title: [32m'Project 2'[39m },
    { username: [32m'testuser'[39m, slug: [32m'project-3'[39m, title: [32m'Project 3'[39m }
  ]
}
[Bookshelf] Emitting projectSelected event for: { username: [32m'testuser'[39m, slug: [32m'unknown'[39m, title: [32m'Unknown'[39m }

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/pages/not-found/not-found.component.spec.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 51[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/sync/offline-element-sync.provider.spec.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 91[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/offline/storage.service.spec.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 44[2mms[22m[39m
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
[90mstdout[2m | src/app/components/lint/lint-storage.service.spec.ts[2m > [22m[2mLintStorageService[2m > [22m[2mshould reject a suggestion and save it to localStorage
[22m[39m[LintStorage] Saved 1 rejected suggestions
[LintStorage] Suggestion rejected and saved: test suggestion

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/project/document-snapshot.service.spec.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 52[2mms[22m[39m
[90mstdout[2m | src/app/components/lint/lint-storage.service.spec.ts[2m > [22m[2mLintStorageService[2m > [22m[2mshould load rejected suggestions from localStorage on init
[22m[39m[LintStorage] Loaded 2 rejected suggestions

[90mstdout[2m | src/app/components/lint/lint-storage.service.spec.ts[2m > [22m[2mLintStorageService[2m > [22m[2mshould handle errors when saving to localStorage
[22m[39m[LintStorage] Suggestion rejected and saved: test suggestion

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/components/bookshelf/bookshelf.component.spec.ts [2m([22m[2m36 tests[22m[2m)[22m[32m 195[2mms[22m[39m
[90mstdout[2m | src/app/components/lint/lint-storage.service.spec.ts[2m > [22m[2mLintStorageService[2m > [22m[2mshould reject suggestion when lint-correction-reject event is dispatched
[22m[39m[LintStorage] Saved 1 rejected suggestions
[LintStorage] Suggestion rejected and saved: test suggestion
[LintStorage] Saved 1 rejected suggestions
[LintStorage] Suggestion rejected and saved: test suggestion
[LintStorage] Saved 1 rejected suggestions
[LintStorage] Suggestion rejected and saved: test suggestion
[LintStorage] Saved 1 rejected suggestions
[LintStorage] Suggestion rejected and saved: test suggestion
[LintStorage] Saved 1 rejected suggestions
[LintStorage] Suggestion rejected and saved: test suggestion
[LintStorage] Saved 3 rejected suggestions
[LintStorage] Suggestion rejected and saved: test suggestion
[LintStorage] Saved 1 rejected suggestions
[LintStorage] Suggestion rejected and saved: test suggestion
[LintStorage] Saved 1 rejected suggestions
[LintStorage] Suggestion rejected and saved: test suggestion
[LintStorage] Saved 1 rejected suggestions
[LintStorage] Suggestion rejected and saved: test suggestion
[LintStorage] Saved 1 rejected suggestions
[LintStorage] Suggestion rejected and saved: test suggestion

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/core/dialog-gateway.service.spec.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 69[2mms[22m[39m
[90mstdout[2m | src/app/components/lint/lint-storage.service.spec.ts[2m > [22m[2mLintStorageService[2m > [22m[2mshould clear all rejected suggestions
[22m[39m[LintStorage] Saved 1 rejected suggestions
[LintStorage] Suggestion rejected and saved: test suggestion
[LintStorage] Saved 0 rejected suggestions
[LintStorage] Cleared all rejected suggestions

[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mfile import[2m > [22m[2mshould not import when no files selected
[22m[39mProjectComponent init
Loading project testuser/test-project

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/pages/unavailable/unavailable.component.spec.ts [2m([22m[2m1 test[22m[2m)[22m[32m 75[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/components/lint/lint-storage.service.spec.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 52[2mms[22m[39m
stderr | src/app/interceptors/auth.interceptor.spec.ts > AuthInterceptor > should redirect to welcome on 401 error in server mode
Session expired or invalid, redirecting to login

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/offline/offline-user.service.spec.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 49[2mms[22m[39m
stderr | src/app/interceptors/auth.interceptor.spec.ts > AuthInterceptor > should not redirect when already on welcome page
Session expired or invalid, redirecting to login

stderr | src/app/interceptors/auth.interceptor.spec.ts > AuthInterceptor > should handle navigation failure gracefully
Session expired or invalid, redirecting to login

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/interceptors/auth-token.interceptor.spec.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 71[2mms[22m[39m
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/worldbuilding/default-templates.service.spec.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 48[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/components/lint/lint-api.service.spec.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 44[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/interceptors/auth.interceptor.spec.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 35[2mms[22m[39m
[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mrecent document[2m > [22m[2mshould open recent document when clicked
[22m[39mProjectComponent init
Loading project testuser/test-project

[90mstdout[2m | src/app/utils/custom-route-reuse-strategy.spec.ts[2m > [22m[2mCustomRouteReuseStrategy[2m > [22m[2mshouldReuseRoute[2m > [22m[2mshould not reuse route when reuseComponent is false
[22m[39m[RouteReuse] Preventing component reuse for route: test-path

[90mstdout[2m | src/app/utils/custom-route-reuse-strategy.spec.ts[2m > [22m[2mCustomRouteReuseStrategy[2m > [22m[2mshouldReuseRoute[2m > [22m[2mshould not reuse project route when username changes
[22m[39m[RouteReuse] Project params changed from user1/project to user2/project, creating fresh component

[90mstdout[2m | src/app/utils/custom-route-reuse-strategy.spec.ts[2m > [22m[2mCustomRouteReuseStrategy[2m > [22m[2mshouldReuseRoute[2m > [22m[2mshould not reuse project route when slug changes
[22m[39m[RouteReuse] Project params changed from user/project1 to user/project2, creating fresh component

[90mstdout[2m | src/app/utils/custom-route-reuse-strategy.spec.ts[2m > [22m[2mCustomRouteReuseStrategy[2m > [22m[2mclearStoredProject[2m > [22m[2mshould clear stored routes when project params change
[22m[39m[RouteReuse] Project params changed from user1/project1 to user2/project2, creating fresh component

[90mstdout[2m | src/app/utils/custom-route-reuse-strategy.spec.ts[2m > [22m[2mCustomRouteReuseStrategy[2m > [22m[2mclearStoredProject[2m > [22m[2mshould iterate over stored handlers when clearing project
[22m[39m[RouteReuse] Project params changed from user1/proj1 to user2/proj2, creating fresh component

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/project/recent-files.service.spec.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 26[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/auth/auth-token.service.spec.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 26[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/pages/project/tabs/documents-list/documents-list-tab.component.spec.ts [2m([22m[2m9 tests[22m[2m)[22m[33m 1241[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/guards/auth.guard.spec.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 61[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/models/publish-plan.spec.ts [2m([22m[2m25 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/core/logger.service.spec.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 22[2mms[22m[39m
Not implemented: navigation to another Document
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/sync/element-sync-provider.factory.spec.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 17[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/utils/custom-route-reuse-strategy.spec.ts [2m([22m[2m19 tests[22m[2m)[22m[32m 6[2mms[22m[39m
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/models/project-archive.spec.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/models/schema-types.spec.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/publish/publish.service.spec.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 52[2mms[22m[39m
[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mrecent document[2m > [22m[2mshould not open document when not found
[22m[39mProjectComponent init
Loading project testuser/test-project

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/core/settings.service.spec.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/models/project-element.spec.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 2[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/utils/worldbuilding.utils.spec.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 2[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/pages/project/tabs/document/document-tab-test.spec.ts [2m([22m[2m1 test[22m[2m)[22m[32m 1[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/pipes/file-size.pipe.spec.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 1[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/pages/project/tabs/document/document-tab-minimal.spec.ts [2m([22m[2m1 test[22m[2m)[22m[32m 1[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/guards/can-deactivate-project.guard.spec.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 2[2mms[22m[39m
[90mstdout[2m | Timeout._onTimeout (D:\dev\inkweld\frontend\src\app\components\bookshelf\bookshelf.component.ts:532:17)
[22m[39m[Bookshelf] Scroll cooldown complete, clicks enabled

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/components/project-card/project-card.component.spec.ts [2m([22m[2m1 test[22m[2m)[22m[32m 1[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/models/document-sync-state.spec.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 1[2mms[22m[39m
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mrecent document[2m > [22m[2mshould handle keyboard navigation for recent documents
[22m[39mProjectComponent init
Loading project testuser/test-project

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/dialogs/template-editor-dialog/template-editor-dialog.component.spec.ts [2m([22m[2m29 tests[22m[2m)[22m[33m 13456[2mms[22m[39m
     [33m[2mâœ“[22m[39m should create [33m 982[2mms[22m[39m
     [33m[2mâœ“[22m[39m should initialize with provided schema data [33m 461[2mms[22m[39m
     [33m[2mâœ“[22m[39m should initialize tabs from schema [33m 509[2mms[22m[39m
     [33m[2mâœ“[22m[39m should assign IDs to fields without IDs during initialization [33m 439[2mms[22m[39m
       [33m[2mâœ“[22m[39m should set up expansion panel subscription [33m 499[2mms[22m[39m
       [33m[2mâœ“[22m[39m should not open panel if already expanded [33m 372[2mms[22m[39m
       [33m[2mâœ“[22m[39m should not do anything if no lastFieldId [33m 453[2mms[22m[39m
       [33m[2mâœ“[22m[39m should add a new tab [33m 539[2mms[22m[39m
       [33m[2mâœ“[22m[39m should generate unique tab labels when adding multiple tabs [33m 601[2mms[22m[39m
       [33m[2mâœ“[22m[39m should remove a tab [33m 375[2mms[22m[39m
       [33m[2mâœ“[22m[39m should adjust selectedTabIndex when removing a tab at the current index [33m 362[2mms[22m[39m
       [33m[2mâœ“[22m[39m should not remove tabs when there's only one [33m 593[2mms[22m[39m
       [33m[2mâœ“[22m[39m should update tab properties [33m 436[2mms[22m[39m
       [33m[2mâœ“[22m[39m should handle tab drag and drop [33m 445[2mms[22m[39m
       [33m[2mâœ“[22m[39m should set selectedTabIndex when adding a new tab [33m 491[2mms[22m[39m
       [33m[2mâœ“[22m[39m should move tab up [33m 394[2mms[22m[39m
       [33m[2mâœ“[22m[39m should move tab down [33m 492[2mms[22m[39m
       [33m[2mâœ“[22m[39m should add a field to a tab [33m 390[2mms[22m[39m
       [33m[2mâœ“[22m[39m should remove a field from a tab [33m 491[2mms[22m[39m
       [33m[2mâœ“[22m[39m should update field properties [33m 377[2mms[22m[39m
       [33m[2mâœ“[22m[39m should handle field drag and drop [33m 405[2mms[22m[39m
       [33m[2mâœ“[22m[39m should move fields via drag drop [33m 419[2mms[22m[39m
       [33m[2mâœ“[22m[39m should move field down within a tab [33m 435[2mms[22m[39m
       [33m[2mâœ“[22m[39m should store lastFieldId when adding a field for auto-expansion [33m 462[2mms[22m[39m
       [33m[2mâœ“[22m[39m should require template name [33m 388[2mms[22m[39m
       [33m[2mâœ“[22m[39m should require template icon [33m 386[2mms[22m[39m
       [33m[2mâœ“[22m[39m should close dialog without saving on cancel [33m 419[2mms[22m[39m
       [33m[2mâœ“[22m[39m should close dialog with updated schema on save [33m 455[2mms[22m[39m
       [33m[2mâœ“[22m[39m should not save if form is invalid [33m 382[2mms[22m[39m
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mdelete project[2m > [22m[2mshould open confirmation dialog on delete
[22m[39mProjectComponent init
Loading project testuser/test-project

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mdelete project[2m > [22m[2mshould delete project when confirmed
[22m[39mProjectComponent init
Loading project testuser/test-project

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mdelete project[2m > [22m[2mshould not delete project when cancelled
[22m[39mProjectComponent init
Loading project testuser/test-project

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mbeforeunload handler[2m > [22m[2mshould not prevent navigation when no unsaved changes
[22m[39mProjectComponent init
Loading project testuser/test-project

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mcanDeactivate guard[2m > [22m[2mshould return true when no unsaved changes
[22m[39mProjectComponent init
Loading project testuser/test-project

[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mcanDeactivate guard[2m > [22m[2mshould return true when no unsaved changes
[22m[39mChecking project de-activation guard

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2mcleanup[2m > [22m[2mshould clean up subscriptions on destroy
[22m[39mProjectComponent init
Loading project testuser/test-project

Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
Could not parse CSS stylesheet
[90mstdout[2m | src/app/pages/project/project.component.spec.ts[2m > [22m[2mProjectComponent[2m > [22m[2misLoading[2m > [22m[2mshould return loading state from projectState
[22m[39mProjectComponent init
Loading project testuser/test-project

 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/pages/project/project.component.spec.ts [2m([22m[2m44 tests[22m[2m)[22m[33m 9855[2mms[22m[39m
     [33m[2mâœ“[22m[39m should create [33m 1201[2mms[22m[39m
       [33m[2mâœ“[22m[39m should load project on init with route params [33m 536[2mms[22m[39m
       [33m[2mâœ“[22m[39m should navigate to folder route when opening folder [33m 320[2mms[22m[39m
       [33m[2mâœ“[22m[39m should exit project and navigate home [33m 374[2mms[22m[39m
       [33m[2mâœ“[22m[39m should navigate to home tab via goHome [33m 314[2mms[22m[39m
       [33m[2mâœ“[22m[39m should open existing publish plan when one exists [33m 429[2mms[22m[39m
       [33m[2mâœ“[22m[39m should open edit project dialog [33m 311[2mms[22m[39m
       [33m[2mâœ“[22m[39m should not enable zen mode when on home tab [33m 348[2mms[22m[39m
 [32mâœ“[39m [30m[45m inkweld-frontend [49m[39m src/app/services/publish/epub-generator.service.spec.ts [2m([22m[2m58 tests[22m[2m)[22m[33m 13140[2mms[22m[39m
       [33m[2mâœ“[22m[39m should generate EPUB successfully [33m 334[2mms[22m[39m
       [33m[2mâœ“[22m[39m should process page break separator [33m 311[2mms[22m[39m
       [33m[2mâœ“[22m[39m should process chapter break separator [33m 309[2mms[22m[39m

[2m Test Files [22m [1m[32m112 passed[39m[22m[90m (112)[39m
[2m      Tests [22m [1m[32m1898 passed[39m[22m[2m | [22m[33m21 skipped[39m[90m (1919)[39m
[2m   Start at [22m 01:16:15
[2m   Duration [22m 31.27s[2m (transform 9.16s, setup 22.28s, collect 60.82s, tests 147.42s, environment 223.33s, prepare 2.05s)[22m

[34m % [39m[2mCoverage report from [22m[33mv8[39m
-------------------|---------|----------|---------|---------|-------------------
File               | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
-------------------|---------|----------|---------|---------|-------------------
All files          |    79.6 |     68.8 |   81.75 |   80.62 |                   
 app               |   96.87 |     91.3 |     100 |   96.77 |                   
  app.component.ts |   96.87 |     91.3 |     100 |   96.77 | 91                
 ...ents/bookshelf |   76.65 |    60.27 |   77.27 |   80.45 |                   
  ....component.ts |   76.65 |    60.27 |   77.27 |   80.45 | ...08-357,451-484 
 ...element-editor |   74.77 |    64.28 |   89.47 |   74.07 |                   
  ....component.ts |   74.77 |    64.28 |   89.47 |   74.07 | ...97,312,441-447 
 ...ents/file-list |     100 |     90.9 |     100 |     100 |                   
  ....component.ts |     100 |     90.9 |     100 |     100 | 43                
 ...element-editor |   87.87 |    65.78 |   94.44 |   86.44 |                   
  ....component.ts |   87.87 |    65.78 |   94.44 |   86.44 | ...59,167-168,181 
 ...omponents/lint |      75 |    60.13 |   88.23 |   75.38 |                   
  ....extension.ts |       0 |        0 |       0 |       0 |                   
  ...pi.service.ts |    90.9 |      100 |      50 |      90 | 19                
  ....component.ts |   95.38 |    96.55 |     100 |   94.11 | 154-162           
  ....component.ts |     100 |    76.47 |     100 |     100 | 84-96,114-115     
  lint-plugin.ts   |   50.37 |    40.65 |   73.68 |   53.12 | ...54-280,336-342 
  ...ge.service.ts |     100 |    83.33 |     100 |     100 | 76-86             
 ...-provider-list |   56.32 |    54.16 |   64.28 |   66.17 |                   
  ....component.ts |   56.32 |    54.16 |   64.28 |   66.17 | 27-29,40-63       
 ...s/project-card |     100 |       60 |     100 |     100 |                   
  ....component.ts |     100 |       60 |     100 |     100 | 21                
 .../project-cover |    90.9 |    79.41 |     100 |   90.69 |                   
  ....component.ts |    90.9 |    79.41 |     100 |   90.69 | 83,121-125,139    
 ...s/project-tree |   87.24 |    62.31 |   87.87 |   88.11 |                   
  ....component.ts |   87.24 |    62.31 |   87.87 |   88.11 | ...38-239,502-509 
 ...tree-node-icon |     100 |      100 |     100 |     100 |                   
  ....component.ts |     100 |      100 |     100 |     100 |                   
 ...nents/side-nav |     100 |    84.61 |     100 |     100 |                   
  ....component.ts |     100 |    84.61 |     100 |     100 | 44,65             
 ...snapshot-panel |     100 |    80.95 |     100 |     100 |                   
  ....component.ts |     100 |    80.95 |     100 |     100 | 49-61             
 ...ts/user-avatar |   88.05 |    82.75 |      90 |   90.76 |                   
  ....component.ts |   88.05 |    82.75 |      90 |   90.76 | ...36-138,161-162 
 ...ents/user-menu |     100 |      100 |     100 |     100 |                   
  ....component.ts |     100 |      100 |     100 |     100 |                   
 .../worldbuilding |   93.75 |    83.72 |      92 |   93.49 |                   
  ....component.ts |   93.75 |    83.72 |      92 |   93.49 | ...12,257-259,326 
 ...rmation-dialog |     100 |      100 |     100 |     100 |                   
  ....component.ts |     100 |      100 |     100 |     100 |                   
 ...napshot-dialog |     100 |     90.9 |     100 |     100 |                   
  ....component.ts |     100 |     90.9 |     100 |     100 | 73                
 ...-avatar-dialog |   98.03 |     82.6 |     100 |      98 |                   
  ....component.ts |   98.03 |     82.6 |     100 |      98 | 99                
 ...project-dialog |   97.36 |       78 |   94.11 |   97.29 |                   
  ....component.ts |   97.36 |       78 |   94.11 |   97.29 | 148-152           
 ...gs/file-upload |      75 |    86.66 |   63.63 |   87.17 |                   
  ....component.ts |      75 |    86.66 |   63.63 |   87.17 | 33,41-43,54       
 ...e-cover-dialog |     100 |    94.44 |     100 |     100 |                   
  ....component.ts |     100 |    94.44 |     100 |     100 | 86                
 ...-viewer-dialog |     100 |      100 |     100 |     100 |                   
  ....component.ts |     100 |      100 |     100 |     100 |                   
 ...element-dialog |   97.46 |    80.48 |     100 |    97.4 |                   
  ....component.ts |   97.46 |    80.48 |     100 |    97.4 | 178-179           
 ...rogress-dialog |     100 |      100 |     100 |     100 |                   
  ....component.ts |     100 |      100 |     100 |     100 |                   
 .../rename-dialog |   91.17 |     90.9 |      50 |     100 |                   
  ....component.ts |   91.17 |     90.9 |      50 |     100 | 20                
 ...napshot-dialog |     100 |      100 |     100 |     100 |                   
  ....component.ts |     100 |      100 |     100 |     100 |                   
 ...-editor-dialog |     100 |       76 |     100 |     100 |                   
  ....component.ts |     100 |       76 |     100 |     100 | 99-151,208        
 ...ettings-dialog |     100 |     90.9 |     100 |     100 |                   
  ....component.ts |     100 |     90.9 |     100 |     100 | 79                
 ...ction-settings |   98.55 |    75.32 |     100 |   98.52 |                   
  ....component.ts |   98.55 |    75.32 |     100 |   98.52 | 63,185            
 ...neral-settings |     100 |      100 |     100 |     100 |                   
  ....component.ts |     100 |      100 |     100 |     100 |                   
 ...oject-settings |     100 |      100 |     100 |     100 |                   
  ....component.ts |     100 |      100 |     100 |     100 |                   
 ...-tree-settings |     100 |      100 |     100 |     100 |                   
  ....component.ts |     100 |      100 |     100 |     100 |                   
 .../sync-settings |    90.9 |    89.65 |    90.9 |   91.17 |                   
  ....component.ts |    90.9 |    89.65 |    90.9 |   91.17 | 69-71             
 app/guards        |   96.29 |    88.88 |     100 |     100 |                   
  auth.guard.ts    |     100 |      100 |     100 |     100 |                   
  ...ject.guard.ts |   66.66 |        0 |     100 |     100 | 9                 
 app/interceptors  |   92.75 |    91.22 |   92.85 |   92.53 |                   
  ...nterceptor.ts |     100 |      100 |     100 |     100 |                   
  ...nterceptor.ts |     100 |      100 |     100 |     100 |                   
  ...nterceptor.ts |   88.63 |    86.84 |   88.88 |   88.37 | 79-87,116         
 app/models        |     100 |      100 |     100 |     100 |                   
  ...sync-state.ts |     100 |      100 |     100 |     100 |                   
  ...ct-archive.ts |     100 |      100 |     100 |     100 |                   
  ...ct-element.ts |       0 |        0 |       0 |       0 |                   
  publish-plan.ts  |     100 |      100 |     100 |     100 |                   
  schema-types.ts  |     100 |      100 |     100 |     100 |                   
 ...proval-pending |     100 |      100 |     100 |     100 |                   
  ....component.ts |     100 |      100 |     100 |     100 |                   
 ...create-project |     100 |    94.44 |     100 |     100 |                   
  ....component.ts |     100 |    94.44 |     100 |     100 | 65                
 app/pages/home    |   98.55 |    79.48 |   93.33 |   98.52 |                   
  ....component.ts |   98.55 |    79.48 |   93.33 |   98.52 | 96                
 ...ages/not-found |     100 |      100 |     100 |     100 |                   
  ....component.ts |     100 |      100 |     100 |     100 |                   
 app/pages/project |    79.8 |    58.51 |   85.41 |    80.8 |                   
  ....component.ts |    79.8 |    58.51 |   85.41 |    80.8 | ...54,492,528-529 
 ...s/project/tabs |   70.11 |    51.44 |   80.76 |   70.83 |                   
  ....component.ts |   70.11 |    51.44 |   80.76 |   70.83 | ...23,427,448-458 
 .../tabs/document |     100 |       80 |     100 |     100 |                   
  ....component.ts |     100 |       80 |     100 |     100 | 14,38             
 ...documents-list |   82.69 |    62.06 |    92.3 |   81.25 |                   
  ....component.ts |   82.69 |    62.06 |    92.3 |   81.25 | ...11-115,129-139 
 ...ct/tabs/folder |     100 |    90.47 |     100 |     100 |                   
  ....component.ts |     100 |    90.47 |     100 |     100 | 22                
 ...ject/tabs/home |   71.42 |    48.48 |   68.18 |   72.72 |                   
  ....component.ts |   71.42 |    48.48 |   68.18 |   72.72 | ...77-178,260-343 
 .../project-files |   85.29 |    54.28 |   91.66 |   87.69 |                   
  ....component.ts |   85.29 |    54.28 |   91.66 |   87.69 | ...53,163,168-169 
 ...s/publish-plan |   22.93 |    24.42 |   26.08 |   25.53 |                   
  ....component.ts |   22.93 |    24.42 |   26.08 |   25.53 | ...56-460,467-528 
 ...tabs/templates |   93.66 |    70.66 |   84.21 |   94.02 |                   
  ....component.ts |   93.66 |    70.66 |   84.21 |   94.02 | ...95,328,373,420 
 .../worldbuilding |     100 |    86.66 |     100 |     100 |                   
  ....component.ts |     100 |    86.66 |     100 |     100 | 28-31             
 ...pages/register |    82.9 |    74.72 |      80 |   82.72 |                   
  ....component.ts |    82.9 |    74.72 |      80 |   82.72 | ...68-474,556-569 
 app/pages/reset   |   57.14 |    58.82 |   44.44 |    57.5 |                   
  ....component.ts |   57.14 |    58.82 |   44.44 |    57.5 | ...83-100,117-118 
 app/pages/setup   |     100 |    88.63 |     100 |     100 |                   
  ....component.ts |     100 |    88.63 |     100 |     100 | 55-58,82          
 ...es/unavailable |     100 |      100 |     100 |     100 |                   
  ....component.ts |     100 |      100 |     100 |     100 |                   
 ...s/user-profile |   93.18 |    77.77 |     100 |   93.02 |                   
  ....component.ts |   93.18 |    77.77 |     100 |   93.02 | 98-99,122         
 app/pages/welcome |     100 |    96.87 |     100 |     100 |                   
  ....component.ts |     100 |    96.87 |     100 |     100 | 131               
 app/pipes         |     100 |      100 |     100 |     100 |                   
  ...-size.pipe.ts |     100 |      100 |     100 |     100 |                   
 app/services/auth |     100 |    92.59 |     100 |     100 |                   
  ...en.service.ts |     100 |      100 |     100 |     100 |                   
  xsrf.service.ts  |     100 |       92 |     100 |     100 | 22,114            
 app/services/core |    97.4 |    82.14 |     100 |   97.29 |                   
  ...ay.service.ts |     100 |      100 |     100 |     100 |                   
  ...er.service.ts |     100 |     62.5 |     100 |     100 | 26-85             
  ...gs.service.ts |     100 |      100 |     100 |     100 |                   
  setup.service.ts |     100 |    90.62 |     100 |     100 | 19-21             
  ...ig.service.ts |   87.09 |       70 |     100 |   86.66 | 58-63             
 ...rvices/offline |   94.46 |    84.49 |   90.79 |   94.15 |                   
  ...on.service.ts |     100 |    83.72 |     100 |     100 | ...48,316,337,384 
  ...ts.service.ts |   84.49 |    80.64 |   88.46 |    82.9 | ...71-398,425-430 
  ...ct.service.ts |    98.8 |     82.6 |     100 |   98.76 | 178               
  ...ge.service.ts |   98.01 |     92.3 |   93.33 |   97.97 | 241,380           
  ...er.service.ts |     100 |    71.42 |     100 |     100 | 19-23             
  ...nc.service.ts |   92.95 |    86.36 |   94.44 |   92.85 | 241,276-278,294   
  ...ge.service.ts |   87.32 |    81.25 |   68.96 |   85.93 | ...37,145,162,170 
  ...ct.service.ts |     100 |    88.33 |     100 |     100 | ...2,40,48,55,119 
 ...rvices/project |   71.83 |    60.11 |   70.83 |   72.51 |                   
  ...ot.service.ts |     100 |      100 |     100 |     100 |                   
  ...nt.service.ts |   43.82 |    31.25 |   39.47 |   45.01 | ...34,845,904-945 
  ...ee.service.ts |     100 |    97.05 |     100 |     100 | 134,298           
  ...le.service.ts |   78.57 |    76.92 |   83.33 |   76.92 | ...08-111,145-148 
  ...rt.service.ts |   89.67 |    74.35 |   88.23 |   89.47 | ...46,456,468,487 
  ...te.service.ts |   60.05 |    48.27 |   55.26 |   62.45 | ...57-883,897-910 
  ...ct.service.ts |   88.32 |    66.66 |   86.36 |   88.54 | ...55,678-679,714 
  ...es.service.ts |     100 |    83.33 |     100 |     100 | 20                
  ...er.service.ts |   78.91 |    68.11 |   76.92 |   78.51 | ...62-465,526-565 
 ...rvices/publish |   83.76 |    69.46 |   85.36 |   86.11 |                   
  ...or.service.ts |   86.83 |    70.49 |      98 |   88.62 | ...1245-1250,1279 
  ...or.service.ts |   95.45 |    83.73 |     100 |   98.48 | 399,447,486       
  index.ts         |       0 |        0 |       0 |       0 |                   
  ...or.service.ts |   89.59 |    78.52 |   97.22 |   94.76 | ...75,386,416,437 
  ...or.service.ts |   86.99 |    72.84 |   94.23 |   92.55 | ...23,932,961-962 
  ...nc.service.ts |   93.18 |    88.63 |   94.73 |    93.6 | ...14-417,438-442 
  ...an.service.ts |     100 |     87.5 |     100 |     100 | 32                
  ...sh.service.ts |   41.43 |    21.48 |   30.23 |   41.34 | ...11,824,848-885 
 app/services/sync |   29.07 |    24.13 |   23.91 |   28.72 |                   
  ...er.factory.ts |     100 |      100 |     100 |     100 |                   
  ....interface.ts |       0 |      100 |     100 |       0 | 129               
  index.ts         |       0 |        0 |       0 |       0 |                   
  ...c.provider.ts |   85.36 |    65.21 |   61.53 |      85 | 126,209-241       
  ...c.provider.ts |    0.53 |        0 |       0 |    0.54 | 51-518            
 app/services/user |    91.3 |       73 |    86.2 |   91.16 |                   
  ...er.service.ts |     100 |       80 |     100 |     100 | ...48,56,62,85,94 
  user.service.ts  |   86.88 |    68.33 |   77.77 |   86.66 | ...38-239,250-264 
 .../worldbuilding |    55.8 |    68.78 |    64.7 |   55.75 |                   
  ...es.service.ts |     100 |      100 |     100 |     100 |                   
  ...ng.service.ts |   53.52 |    67.97 |    61.7 |   53.55 | ...1036,1047,1143 
 app/utils         |     100 |      100 |     100 |     100 |                   
  ...e-strategy.ts |     100 |      100 |     100 |     100 |                   
  ...ding.utils.ts |     100 |      100 |     100 |     100 |                   
 themes            |     100 |      100 |     100 |     100 |                   
  theme.service.ts |     100 |      100 |     100 |     100 |                   
-------------------|---------|----------|---------|---------|-------------------
ERROR: Coverage for statements (79.6%) does not meet global threshold (80%)
