<div class="forgot-password-container" data-testid="forgot-password-page">
  <mat-card class="forgot-password-card">
    <mat-card-content>
      @if (!submitted()) {
        <div class="card-header">
          <mat-icon class="header-icon">lock_reset</mat-icon>
          <h2>Forgot Password</h2>
          <p class="subtitle">
            Enter the email address associated with your account, and we'll send
            you a link to reset your password.
          </p>
        </div>

        <form (ngSubmit)="onSubmit()" data-testid="forgot-password-form">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Email Address</mat-label>
            <input
              matInput
              type="email"
              [(ngModel)]="email"
              name="email"
              required
              data-testid="forgot-email-input"
              aria-label="Email address" />
          </mat-form-field>

          @if (error()) {
            <div class="error-message" data-testid="forgot-error">
              <mat-icon>error_outline</mat-icon>
              <span>{{ error() }}</span>
            </div>
          }

          <button
            mat-raised-button
            color="primary"
            type="submit"
            [disabled]="isSubmitting() || !email.trim()"
            class="submit-button"
            data-testid="forgot-submit-button">
            @if (isSubmitting()) {
              <mat-spinner diameter="18" class="button-spinner"></mat-spinner>
            } @else {
              Send Reset Link
            }
          </button>
        </form>
      } @else {
        <div class="success-container" data-testid="forgot-success">
          <mat-icon class="success-icon">mark_email_read</mat-icon>
          <h2>Check Your Email</h2>
          <p>
            If an account with that email address exists, we've sent a password
            reset link. Please check your inbox (and spam folder).
          </p>
          <p class="hint">The link will expire in 60 minutes.</p>
        </div>
      }

      <div class="back-link">
        <a routerLink="/" data-testid="back-to-login">Back to home</a>
      </div>
    </mat-card-content>
  </mat-card>
</div>
