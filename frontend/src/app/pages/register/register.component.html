<div class="register-container" [class.mobile]="isMobile">
  <div class="content-wrapper">
    <mat-card>
      <div class="logo-container">
        <img src="/logo.png" alt="Inkweld Logo" class="logo-image" />
      </div>

      <div class="card-content">
        <h2 class="title">Register for Inkweld</h2>

        <form (ngSubmit)="onRegister()">
          <mat-form-field appearance="outline">
            <mat-label>Username</mat-label>
            <input
              matInput
              type="text"
              [(ngModel)]="username"
              name="username"
              required
              (blur)="checkUsernameAvailability()"
              aria-label="Username" />
            <mat-icon matSuffix>
              @switch (usernameAvailability) {
                @case ('available') {
                  <mat-icon color="primary">check_circle</mat-icon>
                }
                @case ('unavailable') {
                  <mat-icon color="warn">cancel</mat-icon>
                }
              }
            </mat-icon>
            @if (usernameSuggestions && usernameSuggestions.length > 0) {
              <mat-hint>
                Suggestions:
                @for (
                  suggestion of usernameSuggestions;
                  track suggestion;
                  let last = $last
                ) {
                  <button
                    mat-button
                    type="button"
                    (click)="selectSuggestion(suggestion)"
                    class="suggestion-button">
                    {{ suggestion }}
                  </button>
                  {{ last ? '' : ', ' }}
                }
              </mat-hint>
            }
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Name</mat-label>
            <input
              matInput
              type="text"
              [(ngModel)]="name"
              name="name"
              required
              aria-label="Name" />
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Email</mat-label>
            <input
              matInput
              type="email"
              [(ngModel)]="email"
              name="email"
              required
              aria-label="Email" />
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Password</mat-label>
            <input
              matInput
              type="password"
              [(ngModel)]="password"
              name="password"
              required
              aria-label="Password" />
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Confirm Password</mat-label>
            <input
              matInput
              type="password"
              [(ngModel)]="confirmPassword"
              name="confirmPassword"
              required
              aria-label="Confirm Password" />
          </mat-form-field>
          <button
            mat-raised-button
            color="primary"
            type="submit"
            class="register-button">
            Register
          </button>
        </form>

        <mat-divider></mat-divider>

        <div class="oauth-container">
          <app-oauth-provider-list
            [isRegisterContext]="true"></app-oauth-provider-list>
        </div>

        <button
          mat-raised-button
          color="primary"
          type="button"
          routerLink="/welcome"
          class="login-button">
          Already have an account? Login here
        </button>
      </div>
    </mat-card>
  </div>
</div>
