<!-- Mobile Open Tabs List -->
<div class="mobile-open-tabs">
  <h3 class="mobile-tabs-title">Open Tabs</h3>
  <div class="mobile-tabs-list">
    <!-- Home Tab -->
    <div
      class="mobile-tab-item"
      [class.active]="projectState.selectedTabIndex() === 0"
      (click)="selectTabAndToggle(0)"
      (keydown.enter)="selectTabAndToggle(0)"
      (keydown.space)="selectTabAndToggle(0)"
      tabindex="0"
      role="button">
      <mat-icon>home</mat-icon>
      <span>Home</span>
    </div>
    <!-- Other Open Tabs -->
    @for (tab of projectState.openTabs(); track tab.id; let i = $index) {
      <div
        class="mobile-tab-item"
        [class.active]="projectState.selectedTabIndex() === i + 1"
        (click)="selectTabAndToggle(i + 1)"
        (keydown.enter)="selectTabAndToggle(i + 1)"
        (keydown.space)="selectTabAndToggle(i + 1)"
        tabindex="0"
        role="button">
        <mat-icon>
          {{
            tab.type === 'system'
              ? tab.systemType === 'documents-list'
                ? 'description'
                : 'folder_special'
              : tab.type === 'folder'
                ? 'folder'
                : 'insert_drive_file'
          }}
        </mat-icon>
        <span class="mobile-tab-name">{{ tab.name }}</span>
        @if (i + 1 > 0) {
          <button
            mat-icon-button
            class="mobile-close-tab"
            (click)="closeTab(i + 1, $event)"
            aria-label="Close tab">
            <mat-icon>close</mat-icon>
          </button>
        }
      </div>
    }
  </div>
</div>

<div class="mobile-sidenav-divider"></div>

<!-- Project Tree (Slot for ng-content) -->
<ng-content></ng-content>

<!-- Exit Button -->
<div class="mobile-exit-button">
  <button mat-raised-button color="warn" (click)="onExitProject()">
    Exit Project
  </button>
</div>
