<div class="generate-cover-dialog">
  <h2 mat-dialog-title>Generate Project Cover</h2>

  <mat-dialog-content>
    <div class="content-container">
      <!-- Loading state -->
      @if (loading) {
        <div class="loading-container">
          <mat-spinner diameter="48"></mat-spinner>
          <p class="loading-text">Generating your project cover image...</p>
          <p class="loading-subtext">This may take a moment</p>
        </div>
      }

      <!-- Error state -->
      @if (error && !loading) {
        <div class="error-container">
          <mat-icon color="warn">error</mat-icon>
          <p class="error-text">{{ error }}</p>
          <button mat-flat-button color="primary" (click)="onRetry()">
            <mat-icon>refresh</mat-icon>
            Try Again
          </button>
        </div>
      }

      <!-- Success state -->
      @if ((imageUrl || imageBase64) && !loading) {
        <div class="image-container">
          <p class="preview-text">Here's your generated cover image:</p>
          <div class="image-wrapper">
            @if (imageUrl) {
              <img
                [src]="imageUrl"
                alt="Generated project cover"
                class="cover-image" />
            }
            @if (imageBase64) {
              <img
                [src]="imageBase64"
                alt="Generated project cover"
                class="cover-image" />
            }
          </div>
        </div>
      }
    </div>
  </mat-dialog-content>

  <mat-dialog-actions align="end">
    <button mat-button (click)="onCancel()" [disabled]="loading">Cancel</button>
    @if (!error && (imageUrl || imageBase64)) {
      <button
        mat-flat-button
        color="primary"
        (click)="onApprove()"
        [disabled]="loading">
        <mat-icon>check</mat-icon>
        Approve
      </button>
    }
  </mat-dialog-actions>
</div>
