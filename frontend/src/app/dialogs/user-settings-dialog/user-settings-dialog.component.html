<div class="dialog-header">
  <h2 mat-dialog-title>Settings</h2>
  <button
    mat-icon-button
    mat-dialog-close
    class="close-button"
    data-testid="settings-close-button">
    <mat-icon>close</mat-icon>
  </button>
</div>
<mat-divider></mat-divider>
<mat-dialog-content>
  <div class="settings-container" [class.mobile]="isMobile">
    <mat-nav-list class="settings-nav" role="tablist" [class.mobile]="isMobile">
      <a
        mat-list-item
        role="tab"
        (click)="selectCategory('account')"
        (keydown.enter)="selectCategory('account')"
        [attr.aria-selected]="selectedCategory === 'account'"
        [class.active]="selectedCategory === 'account'"
        tabindex="0"
        aria-label="Account settings">
        <mat-icon matListItemIcon>person</mat-icon>
        <span matListItemTitle>Account</span>
      </a>
      <a
        mat-list-item
        role="tab"
        (click)="selectCategory('authorized-apps')"
        (keydown.enter)="selectCategory('authorized-apps')"
        [attr.aria-selected]="selectedCategory === 'authorized-apps'"
        [class.active]="selectedCategory === 'authorized-apps'"
        tabindex="1"
        aria-label="Authorized Apps settings">
        <mat-icon matListItemIcon>apps</mat-icon>
        <span matListItemTitle>Authorized Apps</span>
      </a>
      <a
        mat-list-item
        role="tab"
        (click)="selectCategory('project-tree')"
        (keydown.enter)="selectCategory('project-tree')"
        [attr.aria-selected]="selectedCategory === 'project-tree'"
        [class.active]="selectedCategory === 'project-tree'"
        tabindex="2"
        aria-label="Project Tree settings">
        <mat-icon matListItemIcon>account_tree</mat-icon>
        <span matListItemTitle>Project Tree</span>
      </a>
      <a
        mat-list-item
        role="tab"
        (click)="selectCategory('project')"
        (keydown.enter)="selectCategory('project')"
        [attr.aria-selected]="selectedCategory === 'project'"
        [class.active]="selectedCategory === 'project'"
        tabindex="3"
        aria-label="Project settings">
        <mat-icon matListItemIcon>description</mat-icon>
        <span matListItemTitle>Project</span>
      </a>
    </mat-nav-list>

    <div
      class="settings-content"
      [class.mobile]="isMobile"
      role="tabpanel"
      [@slideAnimation]="getAnimationState()">
      @switch (selectedCategory) {
        @case ('account') {
          <app-account-settings />
        }
        @case ('authorized-apps') {
          <app-authorized-apps />
        }
        @case ('project-tree') {
          <app-project-tree-settings />
        }
        @case ('project') {
          <app-project-settings />
        }
      }
    </div>
  </div>
</mat-dialog-content>
