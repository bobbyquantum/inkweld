<div class="dialog-header">
  <h2 mat-dialog-title>Settings</h2>
  <button
    mat-icon-button
    mat-dialog-close
    class="close-button"
    data-testid="settings-close-button">
    <mat-icon>close</mat-icon>
  </button>
</div>
<mat-divider></mat-divider>
<mat-dialog-content>
  <div class="settings-container" [class.mobile]="isMobile">
    <mat-nav-list class="settings-nav" role="tablist" [class.mobile]="isMobile">
      <a
        mat-list-item
        role="tab"
        (click)="selectCategory('general')"
        (keydown.enter)="selectCategory('general')"
        [attr.aria-selected]="selectedCategory === 'general'"
        [class.active]="selectedCategory === 'general'"
        tabindex="0"
        aria-label="General settings">
        <mat-icon matListItemIcon>settings</mat-icon>
        <span matListItemTitle>General</span>
      </a>
      <a
        mat-list-item
        role="tab"
        (click)="selectCategory('connection')"
        (keydown.enter)="selectCategory('connection')"
        [attr.aria-selected]="selectedCategory === 'connection'"
        [class.active]="selectedCategory === 'connection'"
        tabindex="1"
        aria-label="Connection settings"
        data-testid="connection-tab">
        <mat-icon matListItemIcon>cloud</mat-icon>
        <span matListItemTitle>Connection</span>
      </a>
      <a
        mat-list-item
        role="tab"
        (click)="selectCategory('project-tree')"
        (keydown.enter)="selectCategory('project-tree')"
        [attr.aria-selected]="selectedCategory === 'project-tree'"
        [class.active]="selectedCategory === 'project-tree'"
        tabindex="2"
        aria-label="Project Tree settings">
        <mat-icon matListItemIcon>account_tree</mat-icon>
        <span matListItemTitle>Project Tree</span>
      </a>
      <a
        mat-list-item
        role="tab"
        (click)="selectCategory('project')"
        (keydown.enter)="selectCategory('project')"
        [attr.aria-selected]="selectedCategory === 'project'"
        [class.active]="selectedCategory === 'project'"
        tabindex="3"
        aria-label="Project settings">
        <mat-icon matListItemIcon>description</mat-icon>
        <span matListItemTitle>Project</span>
      </a>
      <a
        mat-list-item
        role="tab"
        (click)="selectCategory('sync')"
        (keydown.enter)="selectCategory('sync')"
        [attr.aria-selected]="selectedCategory === 'sync'"
        [class.active]="selectedCategory === 'sync'"
        tabindex="4"
        aria-label="Sync settings">
        <mat-icon matListItemIcon>sync</mat-icon>
        <span matListItemTitle>Sync</span>
      </a>
    </mat-nav-list>

    <div
      class="settings-content"
      [class.mobile]="isMobile"
      role="tabpanel"
      [@slideAnimation]="getAnimationState()">
      @switch (selectedCategory) {
        @case ('general') {
          <app-general-settings />
        }
        @case ('connection') {
          <app-connection-settings />
        }
        @case ('project-tree') {
          <app-project-tree-settings />
        }
        @case ('project') {
          <app-project-settings />
        }
        @case ('sync') {
          <app-sync-settings />
        }
      }
    </div>
  </div>
</mat-dialog-content>
